{"version":3,"sources":["constants.js","redux/constants.js","utils/utils.js","redux/selectors/selectGameData.js","redux/reducers/loadedAssetsReducer.js","redux/reducers/gameDataReducer.js","redux/reducers/heroDataReducer.js","redux/reducers/mapDataReducer.js","redux/reducers/dialogReducer.js","redux/reducers/menuReducer.js","redux/reducers/index.js","redux/store.js","redux/selectors/selectDialog.js","assets/images/d_pad_button.png","redux/selectors/selectMenu.js","assets/images/a_button.png","assets/images/b_button.png","assets/atlases/generated lazy /^/.//.*/.json$/ groupOptions: {} namespace object","assets/images lazy /^/.//.*/.png$/ groupOptions: {} namespace object","assets/atlases/generated lazy /^/.//.*/.png$/ groupOptions: {} namespace object","Game.jsx","game/scenes/BootScene.js","redux/actions/setGameHeightAction.js","redux/actions/setGameWidthAction.js","redux/actions/setGameZoomAction.js","components/VirtualGamepad.jsx","components/GameMenu.jsx","redux/actions/addLoadedFontAction.js","redux/actions/addLoadedAtlasAction.js","redux/actions/addLoadedImageAction.js","redux/actions/addLoadedMapAction.js","redux/actions/addLoadedJSONAction.js","redux/actions/addTilesetAction.js","redux/selectors/selectLoadedAssets.js","game/scenes/LoadAssetsScene.js","redux/actions/setMapKeyAction.js","redux/actions/setHeroFacingDirectionAction.js","redux/actions/setHeroInitialPositionAction.js","redux/actions/setHeroPreviousPositionAction.js","redux/actions/setHeroInitialFrameAction.js","redux/actions/setMenuItemsAction.js","redux/actions/setMenuOnSelectAction.js","game/scenes/MainMenuScene.js","redux/selectors/selectMapData.js","redux/selectors/selectHeroData.js","redux/actions/setDialogCharacterNameAction.js","redux/actions/setDialogMessagesAction.js","redux/actions/setDialogActionAction.js","utils/sceneHelpers.js","game/scenes/GameScene.js","components/Message.jsx","components/DialogBox.jsx","index.js","assets/maps weak /^/.//.*$","assets/images weak /^/.//.*$","assets/tilesets weak /^/.//.*$","assets/atlases/generated weak /^/.//.*$","assets/maps lazy /^/.//.*/.json$/ groupOptions: {} namespace object","assets/tilesets lazy /^/.//.*/.json$/ groupOptions: {} namespace object","assets/tilesets lazy /^/.//.*$/ groupOptions: {} namespace object","assets/atlases/generated lazy /^/.//.*$/ groupOptions: {} namespace object"],"names":["TILE_WIDTH","TILE_HEIGHT","MIN_GAME_WIDTH","MIN_GAME_HEIGHT","RESIZE_THRESHOLD","HERO_SPRITE_NAME","ENEMY_SPRITE_NAME","COIN_SPRITE_NAME","HEART_SPRITE_NAME","CRYSTAL_SPRITE_NAME","KEY_SPRITE_NAME","ENEMY","COIN","HEART","CRYSTAL","KEY","IDLE_FRAME","RIGHT_DIRECTION","LEFT_DIRECTION","UP_DIRECTION","DOWN_DIRECTION","IGNORED_TILESETS","ENTER_KEY","SPACE_KEY","ESCAPE_KEY","ARROW_LEFT_KEY","ARROW_UP_KEY","ARROW_RIGHT_KEY","ARROW_DOWN_KEY","ADD_LOADED_FONT","ADD_LOADED_ATLAS","ADD_LOADED_IMAGE","ADD_LOADED_MAP","ADD_LOADED_JSON","SET_MAP_KEY","ADD_TILESET","SET_FACING_DIRECTION","SET_INITIAL_POSITION","SET_PREVIOUS_POSITION","SET_INITIAL_FRAME","SET_GAME_WIDTH","SET_GAME_HEIGHT","SET_GAME_ZOOM","SET_DIALOG_MESSAGES","SET_DIALOG_ACTION","SET_DIALOG_CHARACTER_NAME","SET_MENU_ITEMS","SET_MENU_POSITION","ADD_MENU_ITEM","SET_MENU_ON_SELECT","simulateKeyEvent","code","type","keysMap","event","document","createEvent","initEvent","keyCode","dispatchEvent","calculateGameSize","width","height","tileWidth","tileHeight","widthThreshold","heightThreshold","widthScale","Math","floor","window","innerWidth","heightScale","innerHeight","zoom","min","newWidth","newHeight","createInteractiveGameObject","scene","x","y","isDebug","origin","customCollider","GameObjects","Rectangle","setOrigin","setFillStyle","physics","add","existing","asyncLoader","loaderPlugin","Promise","resolve","reject","on","start","isMapFileAvailable","file","console","error","isImageFileAvailable","isTilesetFileAvailable","isGeneratedAtlasFileAvailable","selectGameWidth","state","game","selectGameHeight","selectGameZoom","defaultState","fonts","atlases","images","maps","jsons","loadedAssetsReducer","action","payload","gameDataReducer","facingDirection","initialPosition","previousPosition","initialFrame","heroDataReducer","mapKey","tilesets","mapDataReducer","messages","characterName","dialogReducer","items","position","onSelect","menuReducer","combineReducers","loadedAssets","heroData","mapData","dialog","menu","configureStore","initialState","createStore","rootReducer","applyMiddleware","thunk","selectDialogMessages","selectDialogAction","selectDialogCharacterName","selectMenuItems","selectMenuPosition","selectMenuOnSelect","map","webpackAsyncContext","req","__webpack_require__","o","then","e","Error","ids","id","t","keys","Object","module","exports","all","slice","Game","dispatch","useDispatch","useState","setGame","dialogMessages","useSelector","menuItems","updateGameReduxState","useCallback","gameWidth","gameHeight","gameZoom","setGameHeightAction","setGameWidthAction","setGameZoomAction","useEffect","timeOutFunctionId","phaserGame","Phaser","AUTO","title","parent","orientation","Scale","LANDSCAPE","localStorageName","autoRound","pixelArt","scale","autoCenter","CENTER_BOTH","mode","NONE","BootScene","LoadAssetsScene","GameScene","MainMenuScene","default","arcade","debug","process","NODE_ENV","plugins","key","plugin","GridEngine","mapping","backgroundColor","workAfterResizeIsDone","gameSize","resize","setZoom","addEventListener","clearTimeout","setTimeout","length","isMobile","this","nextScene","assets","Scene","useStyles","makeStyles","theme","buttonsWrapper","display","justifyContent","padding","marginTop","ceil","userSelect","userDrag","zIndex","button","pointerEvents","filter","aButton","bButton","dPadWrapper","dPadLeft","marginBottom","dPadRight","transform","dPadUp","marginLeft","dPadDown","VirtualGamepad","classes","dPadLeftRef","useRef","dPadRightRef","dPadUpRef","dPadDownRef","aButtonRef","bButtonRef","eventRef","wasAButtonClicked","current","getBoundingClientRect","elX","elY","radius","Geom","Circle","contains","wasBButtonClicked","wasLeftButtonClicked","left","right","top","bottom","Polygon","wasUpButtonClicked","wasRightButtonClicked","wasDownButtonClicked","getPressedButton","handleButtonPressed","pressedButton","element","classList","remove","handlePointerDown","handlePointerUp","removeEventListener","handleContextMenuCallback","preventDefault","stopPropagation","className","ref","classNames","src","dPadButton","alt","onContextMenu","menuWrapper","fontFamily","fontSize","textTransform","menuPositionWrapper","menuWidth","minWidth","menuItemsWrapper","textAlign","menuItem","cursor","listStyle","border","selectedMenuItem","GameMenu","onSelected","selectedItemIndex","setSelectedItemIndex","handleKeyPressed","item","index","onMouseEnter","onClick","addLoadedFontAction","addLoadedAtlasAction","addLoadedImageAction","addLoadedMapAction","addLoadedJSONAction","addTilesetAction","selectLoadedFonts","selectLoadedAtlases","selectLoadedImages","selectLoadedMaps","selectLoadedJSONs","initData","a","getState","store","newFontsCount","forEach","font","includes","color","config","text","Display","Color","RGBToString","r","g","b","loadedAtlases","loadedImages","loadedMaps","mapJson","tileset","source","split","pop","image","layers","layer","objects","object","gid","properties","jsonPath","imagePath","load","atlas","property","name","value","loadedJSONs","tilesetName","tilesetJson","jsonResult","json","cache","get","tilesetImage","imageExtension","replace","tilemapTiledJSON","imageName","textures","find","texture","ready","fontFace","setMapKeyAction","setHeroFacingDirectionAction","setHeroInitialPositionAction","setHeroPreviousPositionAction","setHeroInitialFrameAction","setMenuItemsAction","setMenuOnSelectAction","handleStartGameSelected","location","reload","selectMapKey","selectTilesets","selectHeroFacingDirection","selectHeroInitialPosition","selectHeroInitialFrame","setDialogCharacterNameAction","setDialogMessagesAction","setDialogActionAction","getSelectorData","selector","handleObjectsLayer","objectLayerData","layerIndex","objectIndex","enemy","sprite","setName","setDepth","sprites","enemies","gridEngine","addCharacter","offsetY","startPosition","enemyActionHeroCollider","collider","heroSprite","actionCollider","Input","Keyboard","JustDown","actionKey","active","time","delayedCall","coin","animationKey","anims","exists","create","frames","Array","from","n","frame","toString","padStart","frameRate","repeat","yoyo","play","heart","crystal","handleCreateHeroAnimations","direction","assetKey","animationName","frameQuantity","createWalkingAnimation","input","keyboard","addKey","KeyCodes","SPACE","cursors","createCursorKeys","wasd","addKeys","W","S","A","D","handleCreateControls","group","make","tilemap","addTilesetImage","layerData","createLayer","handleCreateMap","update","delta","getFacingDirection","setX","actionColliderSizeOffset","setY","handleCreateHero","characterCollisionStrategy","collisionTilePropertyName","numberOfDirections","characters","handleConfigureGridEngine","sys","camera","cameras","main","startFollow","setFollowOffset","setBounds","max","widthInPixels","heightInPixels","setPosition","handleConfigureCamera","movementStarted","subscribe","charId","char","getChildren","movementStopped","stop","setFrame","directionChanged","handleCreateCharactersMovements","isDown","move","up","down","dialogMessage","lineHeight","Message","message","trail","onMessageEnded","forceShowFullMessage","useMemo","trim","letter","transitions","useTransition","enter","onRest","status","controller","styles","span","style","dialogWindow","imageRendering","minHeight","maxHeight","dialogTitle","fontWeight","dialogFooter","DialogBox","dialogAction","currentMessage","setCurrentMessage","messageEnded","setMessageEnded","setForceShowFullMessage","handleClick","createTheme","ReactDOM","render","getElementById","webpackContext","webpackContextResolve","m"],"mappings":"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","file":"static/js/main.83fcdb7d.chunk.js","sourcesContent":["export const TILE_WIDTH = 16;\nexport const TILE_HEIGHT = 16;\n\nexport const MIN_GAME_WIDTH = 25 * TILE_WIDTH; // 400\nexport const MIN_GAME_HEIGHT = 14 * TILE_HEIGHT; // 224\n\nexport const RESIZE_THRESHOLD = 500;\n\nexport const HERO_SPRITE_NAME = 'hero';\nexport const ENEMY_SPRITE_NAME = 'enemy';\nexport const COIN_SPRITE_NAME = 'coin';\nexport const HEART_SPRITE_NAME = 'heart';\nexport const CRYSTAL_SPRITE_NAME = 'crystal';\nexport const KEY_SPRITE_NAME = 'key';\n\n// Game Objects Tiled IDs\nexport const ENEMY = 1;\nexport const COIN = 2;\nexport const HEART = 3;\nexport const CRYSTAL = 4;\nexport const KEY = 5;\n\nexport const IDLE_FRAME = 'walk_position_02';\n\n// Directions\nexport const RIGHT_DIRECTION = 'right';\nexport const LEFT_DIRECTION = 'left';\nexport const UP_DIRECTION = 'up';\nexport const DOWN_DIRECTION = 'down';\n\nexport const IGNORED_TILESETS = ['objects'];\n\n// Keys\nexport const ENTER_KEY = 'Enter';\nexport const SPACE_KEY = 'Space';\nexport const ESCAPE_KEY = 'Escape';\nexport const ARROW_LEFT_KEY = 'ArrowLeft';\nexport const ARROW_UP_KEY = 'ArrowUp';\nexport const ARROW_RIGHT_KEY = 'ArrowRight';\nexport const ARROW_DOWN_KEY = 'ArrowDown';\n","// Assets\nexport const ADD_LOADED_FONT = 'ADD_LOADED_FONT';\nexport const ADD_LOADED_ATLAS = 'ADD_LOADED_ATLAS';\nexport const ADD_LOADED_IMAGE = 'ADD_LOADED_IMAGE';\nexport const ADD_LOADED_MAP = 'ADD_LOADED_MAPS';\nexport const ADD_LOADED_JSON = 'ADD_LOADED_JSON';\n\n// Map data\nexport const SET_MAP_KEY = 'SET_MAP_KEY';\nexport const ADD_TILESET = 'SET_TILESET';\n\n// Hero data\nexport const SET_FACING_DIRECTION = 'SET_FACING_DIRECTION';\nexport const SET_INITIAL_POSITION = 'SET_INITIAL_POSITION';\nexport const SET_PREVIOUS_POSITION = 'SET_PREVIOUS_POSITION';\nexport const SET_INITIAL_FRAME = 'SET_INITIAL_FRAME';\n\n// Game data\nexport const SET_GAME_WIDTH = 'SET_GAME_WIDTH';\nexport const SET_GAME_HEIGHT = 'SET_GAME_HEIGHT';\nexport const SET_GAME_ZOOM = 'SET_GAME_ZOOM';\n\n// Dialog\nexport const SET_DIALOG_MESSAGES = 'SET_DIALOG_MESSAGES';\nexport const SET_DIALOG_ACTION = 'SET_DIALOG_ACTION';\nexport const SET_DIALOG_CHARACTER_NAME = 'SET_DIALOG_CHARACTER_NAME';\n\n// Menu\nexport const SET_MENU_ITEMS = 'SET_MENU_ITEMS';\nexport const SET_MENU_POSITION = 'SET_MENU_POSITION';\nexport const ADD_MENU_ITEM = 'ADD_MENU_ITEM';\nexport const SET_MENU_ON_SELECT = 'SET_MENU_ON_SELECT';\n","import { GameObjects } from 'phaser';\nimport {\n    ENTER_KEY,\n    SPACE_KEY,\n    ARROW_UP_KEY,\n    ARROW_DOWN_KEY,\n    ARROW_LEFT_KEY,\n    ARROW_RIGHT_KEY,\n} from '../constants';\n\nexport const isObject = (obj) =>\n    typeof obj === 'object' && obj?.constructor === Object;\n\nexport const isObjectEmpty = (obj) =>\n    isObject(obj) && Object.keys(obj).length === 0;\n\nexport const isObjectNotEmpty = (obj) =>\n    isObject(obj) && Object.keys(obj).length > 0;\n\n/**\n * source https://gist.github.com/GlauberF/d8278ce3aa592389e6e3d4e758e6a0c2\n * Simulate a key event.\n * @param {String} code The code of the key to simulate\n * @param {String} type (optional) The type of event : down, up or press. The default is down\n */\nexport const simulateKeyEvent = (code, type = 'down') => {\n    const keysMap = {\n        [ENTER_KEY]: 13,\n        [SPACE_KEY]: 32,\n        [ARROW_LEFT_KEY]: 37,\n        [ARROW_UP_KEY]: 38,\n        [ARROW_RIGHT_KEY]: 39,\n        [ARROW_DOWN_KEY]: 40,\n    };\n\n    const event = document.createEvent('HTMLEvents');\n    event.initEvent(`key${type}`, true, false);\n    event.code = code;\n    event.keyCode = keysMap[code];\n\n    document.dispatchEvent(event);\n};\n\nexport const calculateGameSize = (\n    width,\n    height,\n    tileWidth,\n    tileHeight,\n    widthThreshold = 0.5,\n    heightThreshold = 0.5\n) => {\n    const widthScale = Math.floor(window.innerWidth / width);\n    const heightScale = Math.floor(window.innerHeight / height);\n    const zoom = Math.min(widthScale, heightScale) || 1;\n\n    const newWidth = Math.floor(window.innerWidth / tileWidth) * tileWidth / zoom;\n    const newHeight = Math.floor(window.innerHeight / tileHeight) * tileHeight / zoom;\n\n    return {\n        zoom,\n        width: Math.min(newWidth, Math.floor((width * (1 + widthThreshold)) / tileWidth) * tileWidth),\n        height: Math.min(newHeight, Math.floor((height * (1 + heightThreshold)) / tileHeight) * tileHeight),\n    };\n};\n\nexport const createInteractiveGameObject = (\n    scene,\n    x,\n    y,\n    width,\n    height,\n    isDebug = false,\n    origin = { x: 0, y: 0 }\n) => {\n    const customCollider = new GameObjects.Rectangle(\n        scene,\n        x,\n        y,\n        width,\n        height\n    ).setOrigin(origin.x, origin.y);\n\n    if (isDebug) {\n        customCollider.setFillStyle(0x741B47);\n    }\n\n    scene.physics.add.existing(customCollider);\n\n    return customCollider;\n};\n\n// Thanks yannick @ https://phaser.discourse.group/t/loading-audio/1306/4\nexport const asyncLoader = (loaderPlugin) => new Promise((resolve, reject) => {\n    loaderPlugin.on('filecomplete', resolve).on('loaderror', reject);\n    loaderPlugin.start();\n});\n\n// Functions to check if a file exists within Webpack modules\n// This might look dumb, but due to the way Webpack works, this is the only way to properly check\n// Using a full path as a variable doesn't work because: https://github.com/webpack/webpack/issues/6680#issuecomment-370800037\nexport const isMapFileAvailable = (file) => {\n    try {\n        require.resolveWeak(`../assets/maps/${file}`);\n        return true;\n    } catch {\n        console.error(`Error loading file ${file}`);\n        return false;\n    }\n};\n\nexport const isImageFileAvailable = (file) => {\n    try {\n        require.resolveWeak(`../assets/images/${file}`);\n        return true;\n    } catch {\n        console.error(`Error loading file ${file}`);\n        return false;\n    }\n};\n\nexport const isTilesetFileAvailable = (file) => {\n    try {\n        require.resolveWeak(`../assets/tilesets/${file}`);\n        return true;\n    } catch {\n        console.error(`Error loading file ${file}`);\n        return false;\n    }\n};\n\nexport const isGeneratedAtlasFileAvailable = (file) => {\n    try {\n        require.resolveWeak(`../assets/atlases/generated/${file}`);\n        return true;\n    } catch {\n        console.error(`Error loading file ${file}`);\n        return false;\n    }\n};\n\n","export const selectGameWidth = (state) => state.game.width;\n\nexport const selectGameHeight = (state) => state.game.height;\n\nexport const selectGameZoom = (state) => state.game.zoom;\n","import {\n    ADD_LOADED_MAP,\n    ADD_LOADED_FONT,\n    ADD_LOADED_JSON,\n    ADD_LOADED_ATLAS,\n    ADD_LOADED_IMAGE,\n} from '../constants';\n\nconst defaultState = {\n    fonts: [],\n    atlases: [],\n    images: [],\n    maps: [],\n    jsons: [],\n};\n\nconst loadedAssetsReducer = (state = defaultState, action) => {\n    switch (action.type) {\n        case ADD_LOADED_FONT: {\n            return {\n                ...state,\n                fonts: [\n                    ...state.fonts,\n                    action.payload,\n                ],\n            };\n        }\n\n        case ADD_LOADED_ATLAS: {\n            return {\n                ...state,\n                atlases: [\n                    ...state.atlases,\n                    action.payload,\n                ],\n            };\n        }\n\n        case ADD_LOADED_IMAGE: {\n            return {\n                ...state,\n                images: [\n                    ...state.images,\n                    action.payload,\n                ],\n            };\n        }\n\n        case ADD_LOADED_MAP: {\n            return {\n                ...state,\n                maps: [\n                    ...state.maps,\n                    action.payload,\n                ],\n            };\n        }\n\n        case ADD_LOADED_JSON: {\n            return {\n                ...state,\n                jsons: [\n                    ...state.jsons,\n                    action.payload,\n                ],\n            };\n        }\n\n        default:\n            return state;\n    }\n};\n\nexport default loadedAssetsReducer;\n","import { MIN_GAME_HEIGHT, MIN_GAME_WIDTH } from '../../constants';\nimport {\n    SET_GAME_ZOOM,\n    SET_GAME_WIDTH,\n    SET_GAME_HEIGHT,\n} from '../constants';\n\nconst defaultState = {\n    width: MIN_GAME_WIDTH,\n    height: MIN_GAME_HEIGHT,\n    zoom: 1,\n};\n\nconst gameDataReducer = (state = defaultState, action) => {\n    switch (action.type) {\n        case SET_GAME_WIDTH: {\n            return {\n                ...state,\n                width: action.payload,\n            };\n        }\n\n        case SET_GAME_HEIGHT: {\n            return {\n                ...state,\n                height: action.payload,\n            };\n        }\n\n        case SET_GAME_ZOOM: {\n            return {\n                ...state,\n                zoom: action.payload,\n            };\n        }\n\n        default:\n            return state;\n    }\n};\n\nexport default gameDataReducer;\n","import {\n    SET_INITIAL_FRAME,\n    SET_INITIAL_POSITION,\n    SET_FACING_DIRECTION,\n    SET_PREVIOUS_POSITION,\n} from '../constants';\n\nconst defaultState = {\n    facingDirection: '',\n    initialPosition: {},\n    previousPosition: {},\n    initialFrame: '',\n};\n\nconst heroDataReducer = (state = defaultState, action) => {\n    switch (action.type) {\n        case SET_FACING_DIRECTION: {\n            return {\n                ...state,\n                facingDirection: action.payload,\n            };\n        }\n\n        case SET_INITIAL_POSITION: {\n            return {\n                ...state,\n                initialPosition: action.payload,\n            };\n        }\n\n        case SET_PREVIOUS_POSITION: {\n            return {\n                ...state,\n                previousPosition: action.payload,\n            };\n        }\n\n        case SET_INITIAL_FRAME: {\n            return {\n                ...state,\n                initialFrame: action.payload,\n            };\n        }\n\n        default:\n            return state;\n    }\n};\n\nexport default heroDataReducer;\n","import {\n    ADD_TILESET,\n    SET_MAP_KEY,\n} from '../constants';\n\nconst defaultState = {\n    mapKey: '',\n    tilesets: [],\n};\n\nconst mapDataReducer = (state = defaultState, action) => {\n    switch (action.type) {\n        case SET_MAP_KEY: {\n            return {\n                ...state,\n                mapKey: action.payload,\n            };\n        }\n\n        case ADD_TILESET: {\n            return {\n                ...state,\n                tilesets: [\n                    ...state.tilesets,\n                    action.payload,\n                ],\n            };\n        }\n\n        default:\n            return state;\n    }\n};\n\nexport default mapDataReducer;\n","import {\n    SET_DIALOG_ACTION,\n    SET_DIALOG_MESSAGES,\n    SET_DIALOG_CHARACTER_NAME,\n} from '../constants';\n\nconst defaultState = {\n    messages: [],\n    action: null,\n    characterName: '',\n};\n\nconst dialogReducer = (state = defaultState, action) => {\n    switch (action.type) {\n        case SET_DIALOG_MESSAGES: {\n            return {\n                ...state,\n                messages: action.payload,\n            };\n        }\n\n        case SET_DIALOG_ACTION: {\n            return {\n                ...state,\n                action: action.payload,\n            };\n        }\n\n        case SET_DIALOG_CHARACTER_NAME: {\n            return {\n                ...state,\n                characterName: action.payload,\n            };\n        }\n\n        default:\n            return state;\n    }\n};\n\nexport default dialogReducer;\n","import {\n    ADD_MENU_ITEM,\n    SET_MENU_ITEMS,\n    SET_MENU_POSITION,\n    SET_MENU_ON_SELECT,\n} from '../constants';\n\nconst defaultState = {\n    items: [],\n    position: 'center',\n    onSelect: null,\n};\n\nconst menuReducer = (state = defaultState, action) => {\n    switch (action.type) {\n        case SET_MENU_ITEMS: {\n            return {\n                ...state,\n                items: action.payload,\n            };\n        }\n\n        case SET_MENU_ON_SELECT: {\n            return {\n                ...state,\n                onSelect: action.payload,\n            };\n        }\n\n        case SET_MENU_POSITION: {\n            return {\n                ...state,\n                position: action.payload,\n            };\n        }\n\n        case ADD_MENU_ITEM: {\n            return {\n                ...state,\n                items: [\n                    ...state.items,\n                    action.payload,\n                ],\n            };\n        }\n\n        default:\n            return state;\n    }\n};\n\nexport default menuReducer;\n","import { combineReducers } from 'redux';\n\n// Reducers\nimport loadedAssetsReducer from './loadedAssetsReducer';\nimport gameDataReducer from './gameDataReducer';\nimport heroDataReducer from './heroDataReducer';\nimport mapDataReducer from './mapDataReducer';\nimport dialogReducer from './dialogReducer';\nimport menuReducer from './menuReducer';\n\nexport default combineReducers({\n    loadedAssets: loadedAssetsReducer,\n    heroData: heroDataReducer,\n    mapData: mapDataReducer,\n    game: gameDataReducer,\n    dialog: dialogReducer,\n    menu: menuReducer,\n});\n","import { createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport rootReducer from './reducers';\n\nfunction configureStore(initialState = {}) {\n    return createStore(\n        rootReducer,\n        initialState,\n        applyMiddleware(thunk)\n    );\n}\n\nexport default configureStore();\n","export const selectDialogMessages = (state) => state.dialog.messages;\n\nexport const selectDialogAction = (state) => state.dialog.action;\n\nexport const selectDialogCharacterName = (state) => state.dialog.characterName;\n","export default __webpack_public_path__ + \"static/media/d_pad_button.e6266178.png\";","export const selectMenuItems = (state) => state.menu.items;\n\nexport const selectMenuPosition = (state) => state.menu.position;\n\nexport const selectMenuOnSelect = (state) => state.menu.onSelect;\n","export default __webpack_public_path__ + \"static/media/a_button.28fbe1ed.png\";","export default __webpack_public_path__ + \"static/media/b_button.1d70a5d8.png\";","var map = {\n\t\"./coin.json\": [\n\t\t39,\n\t\t0\n\t],\n\t\"./enemy.json\": [\n\t\t40,\n\t\t1\n\t],\n\t\"./hero.json\": [\n\t\t41,\n\t\t2\n\t],\n\t\"./npc_01.json\": [\n\t\t42,\n\t\t3\n\t],\n\t\"./npc_02.json\": [\n\t\t43,\n\t\t4\n\t],\n\t\"./npc_03.json\": [\n\t\t44,\n\t\t5\n\t],\n\t\"./npc_04.json\": [\n\t\t45,\n\t\t6\n\t],\n\t\"./npc_05.json\": [\n\t\t46,\n\t\t7\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 3);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 59;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./a_button.png\": [\n\t\t51\n\t],\n\t\"./b_button.png\": [\n\t\t52\n\t],\n\t\"./crystal.png\": [\n\t\t103,\n\t\t23\n\t],\n\t\"./d_pad_button.png\": [\n\t\t28\n\t],\n\t\"./heart_empty.png\": [\n\t\t104,\n\t\t24\n\t],\n\t\"./heart_full.png\": [\n\t\t102,\n\t\t19\n\t],\n\t\"./heart_half.png\": [\n\t\t105,\n\t\t25\n\t],\n\t\"./key.png\": [\n\t\t106,\n\t\t26\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 60;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./coin.png\": [\n\t\t67,\n\t\t11\n\t],\n\t\"./enemy.png\": [\n\t\t68,\n\t\t12\n\t],\n\t\"./hero.png\": [\n\t\t69,\n\t\t13\n\t],\n\t\"./npc_01.png\": [\n\t\t70,\n\t\t14\n\t],\n\t\"./npc_02.png\": [\n\t\t71,\n\t\t15\n\t],\n\t\"./npc_03.png\": [\n\t\t72,\n\t\t16\n\t],\n\t\"./npc_04.png\": [\n\t\t73,\n\t\t17\n\t],\n\t\"./npc_05.png\": [\n\t\t74,\n\t\t18\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 76;\nmodule.exports = webpackAsyncContext;","import Phaser from 'phaser';\nimport GridEngine from 'grid-engine';\nimport { useCallback, useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport isMobile from 'is-mobile';\n\n// Utils\nimport { calculateGameSize } from './utils/utils';\n\n// Constants\nimport {\n    TILE_WIDTH,\n    TILE_HEIGHT,\n    MIN_GAME_WIDTH,\n    MIN_GAME_HEIGHT,\n    RESIZE_THRESHOLD,\n} from './constants';\n\n// Game Scenes\nimport GameScene from './game/scenes/GameScene';\nimport BootScene from './game/scenes/BootScene';\nimport LoadAssetsScene from './game/scenes/LoadAssetsScene';\nimport MainMenuScene from './game/scenes/MainMenuScene';\n\n// Actions\nimport setGameHeightAction from './redux/actions/setGameHeightAction';\nimport setGameWidthAction from './redux/actions/setGameWidthAction';\nimport setGameZoomAction from './redux/actions/setGameZoomAction';\n\n// Components\nimport DialogBox from './components/DialogBox';\nimport VirtualGamepad from './components/VirtualGamepad';\nimport GameMenu from './components/GameMenu';\n\n// Selectors\nimport { selectDialogMessages } from './redux/selectors/selectDialog';\nimport { selectMenuItems } from './redux/selectors/selectMenu';\n\nconst Game = () => {\n    const dispatch = useDispatch();\n    const [game, setGame] = useState(null);\n    const dialogMessages = useSelector(selectDialogMessages);\n    const menuItems = useSelector(selectMenuItems);\n\n    const updateGameReduxState = useCallback((\n        gameWidth,\n        gameHeight,\n        gameZoom\n    ) => {\n        dispatch(setGameHeightAction(gameHeight));\n        dispatch(setGameWidthAction(gameWidth));\n        dispatch(setGameZoomAction(gameZoom));\n    }, [dispatch]);\n\n    // Create the game inside a useEffect\n    // to create it only once\n    useEffect(() => {\n        // do this otherwise development hot-reload\n        // will create a bunch of Phaser instances\n        if (game) {\n            return;\n        }\n\n        const { width, height, zoom } = calculateGameSize(\n            MIN_GAME_WIDTH,\n            MIN_GAME_HEIGHT,\n            TILE_WIDTH,\n            TILE_HEIGHT\n        );\n\n        const phaserGame = new Phaser.Game({\n            type: Phaser.AUTO,\n            title: 'some-game-title',\n            parent: 'game-content',\n            orientation: Phaser.Scale.LANDSCAPE,\n            localStorageName: 'some-game-title',\n            width,\n            height,\n            zoom,\n            autoRound: true,\n            pixelArt: true,\n            scale: {\n                autoCenter: Phaser.Scale.CENTER_BOTH,\n                mode: Phaser.Scale.NONE,\n            },\n            scene: [\n                BootScene,\n                LoadAssetsScene,\n                GameScene,\n                MainMenuScene,\n            ],\n            physics: {\n                default: 'arcade',\n                arcade: {\n                    debug: process?.env?.NODE_ENV !== 'production',\n                },\n            },\n            plugins: {\n                scene: [\n                    {\n                        key: 'gridEngine',\n                        plugin: GridEngine,\n                        mapping: 'gridEngine',\n                    },\n                ],\n            },\n            backgroundColor: '#000000',\n        });\n\n        updateGameReduxState(width, height, zoom);\n\n        // Create listener to resize the game\n        // when the window is resized\n        let timeOutFunctionId;\n        const workAfterResizeIsDone = () => {\n            const gameSize = calculateGameSize(\n                MIN_GAME_WIDTH,\n                MIN_GAME_HEIGHT,\n                TILE_WIDTH,\n                TILE_HEIGHT\n            );\n\n            updateGameReduxState(gameSize.width, gameSize.height, gameSize.zoom);\n            phaserGame.scale.resize(gameSize.width, gameSize.height);\n            phaserGame.scale.setZoom(gameSize.zoom);\n        };\n\n        window.addEventListener('resize', () => {\n            clearTimeout(timeOutFunctionId);\n            timeOutFunctionId = setTimeout(workAfterResizeIsDone, RESIZE_THRESHOLD);\n        });\n\n        setGame(phaserGame);\n        // window.phaserGame = game;\n    }, [\n        game,\n        updateGameReduxState,\n    ]);\n\n    return (\n        <div>\n            <div\n                id=\"game-content\"\n                key=\"game-content\"\n            >\n                {/* this is where the game canvas will be rendered */}\n            </div>\n            {dialogMessages.length > 0 && (\n                <DialogBox />\n            )}\n            {menuItems.length > 0 && (\n                <GameMenu />\n            )}\n            {isMobile() && (\n                <VirtualGamepad />\n            )}\n        </div>\n    );\n};\n\nexport default Game;\n","import { Scene } from 'phaser';\n\nexport default class BootScene extends Scene {\n    constructor() {\n        super('BootScene');\n    }\n\n    preload() {\n        // Preload assets for the splash and title screens\n    }\n\n    create() {\n        this.scene.start('LoadAssetsScene', {\n            nextScene: 'MainMenuScene',\n            assets: {\n                fonts: ['\"Press Start 2P\"'],\n            },\n        });\n    }\n}\n","import { SET_GAME_HEIGHT } from '../constants';\n\nconst setGameHeightAction = (payload) => (dispatch) => dispatch({\n    type: SET_GAME_HEIGHT,\n    payload,\n});\n\nexport default setGameHeightAction;\n","import { SET_GAME_WIDTH } from '../constants';\n\nconst setGameWidthAction = (payload) => (dispatch) => dispatch({\n    type: SET_GAME_WIDTH,\n    payload,\n});\n\nexport default setGameWidthAction;\n","import { SET_GAME_ZOOM } from '../constants';\n\nconst setGameZoomAction = (payload) => (dispatch) => dispatch({\n    type: SET_GAME_ZOOM,\n    payload,\n});\n\nexport default setGameZoomAction;\n","import { useCallback, useEffect, useRef } from 'react';\nimport { Geom } from 'phaser';\nimport { makeStyles } from '@mui/styles';\nimport classNames from 'classnames';\nimport { useSelector } from 'react-redux';\n\n// Images\nimport dPadButton from '../assets/images/d_pad_button.png';\nimport aButton from '../assets/images/a_button.png';\nimport bButton from '../assets/images/b_button.png';\n\n// Selectors\nimport { selectGameHeight, selectGameWidth, selectGameZoom } from '../redux/selectors/selectGameData';\n\n// Utils\nimport { simulateKeyEvent } from '../utils/utils';\n\n// Constants\nimport {\n    ARROW_DOWN_KEY,\n    ARROW_LEFT_KEY,\n    ARROW_RIGHT_KEY,\n    ARROW_UP_KEY,\n    ENTER_KEY,\n    SPACE_KEY,\n} from '../constants';\n\nconst useStyles = makeStyles((theme) => ({\n    buttonsWrapper: ({ zoom, height }) => ({\n        display: 'flex',\n        justifyContent: 'space-between',\n        padding: `0 ${15 * zoom}px`,\n        // marginTop: `-${85 * zoom}px`,\n        marginTop: `${Math.ceil(window.innerHeight - (height * zoom) - (100 * zoom))}px`,\n        position: 'relative',\n        userSelect: 'none',\n        userDrag: 'none',\n        zIndex: 10,\n    }),\n    button: ({ zoom, width }) => ({\n        pointerEvents: 'none',\n        '-webkit-touch-callout': 'none',\n        userSelect: 'none',\n        userDrag: 'none',\n        '&.is-touched': {\n            filter: 'saturate(300%) brightness(70%)',\n        },\n    }),\n    aButton: ({ zoom, width }) => ({\n        width: `${40 * zoom}px`,\n        height: `${40 * zoom}px`,\n    }),\n    bButton: ({ zoom, width }) => ({\n        width: `${40 * zoom}px`,\n        height: `${40 * zoom}px`,\n    }),\n    dPadWrapper: ({ zoom, width }) => ({\n        width: `${76 * zoom}px`,\n        height: `${76 * zoom}px`,\n    }),\n    dPadLeft: ({ zoom, width }) => ({\n        width: `${38 * zoom}px`,\n        height: `${30.5 * zoom}px`,\n        marginBottom: `-${19 * zoom}px`,\n    }),\n    dPadRight: ({ zoom, width }) => ({\n        transform: 'rotate(180deg)',\n        width: `${38 * zoom}px`,\n        height: `${30.5 * zoom}px`,\n        marginBottom: `-${19 * zoom}px`,\n    }),\n    dPadUp: ({ zoom, width }) => ({\n        transform: 'rotate(90deg)',\n        width: `${38 * zoom}px`,\n        height: `${30.5 * zoom}px`,\n        marginLeft: `-${57 * zoom}px`,\n    }),\n    dPadDown: ({ zoom, width }) => ({\n        transform: 'rotate(270deg)',\n        width: `${38 * zoom}px`,\n        height: `${30.5 * zoom}px`,\n        marginLeft: `-${38 * zoom}px`,\n        marginBottom: `-${38 * zoom}px`,\n    }),\n}));\n\nconst VirtualGamepad = () => {\n    const gameWidth = useSelector(selectGameWidth);\n    const gameHeight = useSelector(selectGameHeight);\n    const gameZoom = useSelector(selectGameZoom);\n\n    const classes = useStyles({\n        width: gameWidth,\n        height: gameHeight,\n        zoom: gameZoom,\n    });\n\n    const dPadLeftRef = useRef(null);\n    const dPadRightRef = useRef(null);\n    const dPadUpRef = useRef(null);\n    const dPadDownRef = useRef(null);\n    const aButtonRef = useRef(null);\n    const bButtonRef = useRef(null);\n    const eventRef = useRef({});\n\n    const wasAButtonClicked = useCallback((x, y) => {\n        const { width, x: elX, y: elY } = aButtonRef.current.getBoundingClientRect();\n        const radius = width / 2;\n        const circle = new Geom.Circle(\n            // this is needed because Circles have origin set to 0.5\n            elX + radius,\n            elY + radius,\n            radius\n        );\n\n        return circle.contains(x, y);\n    }, [aButtonRef]);\n\n    const wasBButtonClicked = useCallback((x, y) => {\n        const { width, x: elX, y: elY } = bButtonRef.current.getBoundingClientRect();\n        const radius = width / 2;\n        const circle = new Geom.Circle(\n            // this is needed because Circles have origin set to 0.5\n            elX + radius,\n            elY + radius,\n            radius\n        );\n\n        return circle.contains(x, y);\n    }, [bButtonRef]);\n\n    const wasLeftButtonClicked = useCallback((x, y) => {\n        const { left, right, top, bottom, height } = dPadLeftRef.current.getBoundingClientRect();\n        const polygon = new Geom.Polygon([\n            { x: left, y: top },\n            { x: right - 31, y: top },\n            { x: right, y: top + (height / 2) },\n            { x: right - 31, y: bottom },\n            { x: left, y: bottom },\n        ]);\n\n        return polygon.contains(x, y);\n    }, [dPadLeftRef]);\n\n    const wasUpButtonClicked = useCallback((x, y) => {\n        const { left, right, top, bottom, width } = dPadUpRef.current.getBoundingClientRect();\n        const polygon = new Geom.Polygon([\n            { x: left, y: top },\n            { x: right, y: top },\n            { x: right, y: bottom - 31 },\n            { x: left + (width / 2), y: bottom },\n            { x: left, y: bottom - 31 },\n        ]);\n\n        return polygon.contains(x, y);\n    }, [dPadUpRef]);\n\n    const wasRightButtonClicked = useCallback((x, y) => {\n        const { left, right, top, bottom, height } = dPadRightRef.current.getBoundingClientRect();\n        const polygon = new Geom.Polygon([\n            { x: left, y: top + (height / 2) },\n            { x: left + 31, y: top },\n            { x: right, y: top },\n            { x: right, y: bottom },\n            { x: left + 31, y: bottom },\n        ]);\n\n        return polygon.contains(x, y);\n    }, [dPadRightRef]);\n\n    const wasDownButtonClicked = useCallback((x, y) => {\n        const { left, right, top, bottom, width } = dPadDownRef.current.getBoundingClientRect();\n        const polygon = new Geom.Polygon([\n            { x: left + (width / 2), y: top },\n            { x: right, y: top + 31 },\n            { x: right, y: bottom },\n            { x: left, y: bottom },\n            { x: left, y: top + 31 },\n        ]);\n\n        return polygon.contains(x, y);\n    }, [dPadDownRef]);\n\n    const getPressedButton = useCallback((x, y) => {\n        if (wasLeftButtonClicked(x, y)) {\n            return [ARROW_LEFT_KEY, dPadLeftRef];\n        }\n\n        if (wasRightButtonClicked(x, y)) {\n            return [ARROW_RIGHT_KEY, dPadRightRef];\n        }\n\n        if (wasUpButtonClicked(x, y)) {\n            return [ARROW_UP_KEY, dPadUpRef];\n        }\n\n        if (wasDownButtonClicked(x, y)) {\n            return [ARROW_DOWN_KEY, dPadDownRef];\n        }\n\n        if (wasAButtonClicked(x, y)) {\n            return [SPACE_KEY, aButtonRef];\n        }\n\n        if (wasBButtonClicked(x, y)) {\n            return [ENTER_KEY, bButtonRef];\n        }\n\n        return [];\n    }, [\n        wasAButtonClicked,\n        wasBButtonClicked,\n        wasUpButtonClicked,\n        wasDownButtonClicked,\n        wasLeftButtonClicked,\n        wasRightButtonClicked,\n    ]);\n\n    const handleButtonPressed = useCallback((event, type) => {\n        const { x, y } = event;\n\n        const [pressedButton, element] = getPressedButton(x, y);\n        if (pressedButton && element) {\n            simulateKeyEvent(pressedButton, type);\n            if (type === 'down') {\n                element.current.classList.add('is-touched');\n            } else {\n                element.current.classList.remove('is-touched');\n            }\n        }\n    }, [getPressedButton]);\n\n    useEffect(() => {\n        const handlePointerDown = (event) => {\n            eventRef.current = event;\n            handleButtonPressed(event, 'down');\n        };\n        document.addEventListener('pointerdown', handlePointerDown);\n\n        const handlePointerUp = (event) => {\n            handleButtonPressed(eventRef.current, 'up');\n            eventRef.current = {};\n        };\n        document.addEventListener('pointerup', handlePointerUp);\n\n        return () => {\n            window.removeEventListener('pointerdown', handlePointerDown);\n            window.removeEventListener('pointerup', handlePointerUp);\n        };\n    }, []);\n\n    const handleContextMenuCallback = useCallback((event) => {\n        event.preventDefault();\n        event.stopPropagation();\n        return false;\n    }, []);\n\n    return (\n        <div className={classes.buttonsWrapper}>\n            <div className={classes.dPadWrapper}>\n                <img\n                    ref={dPadLeftRef}\n                    className={classNames(classes.button, classes.dPadLeft)}\n                    src={dPadButton}\n                    alt=\"test\"\n                    onContextMenu={handleContextMenuCallback}\n                />\n                <img\n                    ref={dPadRightRef}\n                    className={classNames(classes.button, classes.dPadRight)}\n                    src={dPadButton}\n                    alt=\"test\"\n                    onContextMenu={handleContextMenuCallback}\n                />\n                <img\n                    ref={dPadUpRef}\n                    className={classNames(classes.button, classes.dPadUp)}\n                    src={dPadButton}\n                    alt=\"test\"\n                    onContextMenu={handleContextMenuCallback}\n                />\n                <img\n                    ref={dPadDownRef}\n                    className={classNames(classes.button, classes.dPadDown)}\n                    src={dPadButton}\n                    alt=\"test\"\n                    onContextMenu={handleContextMenuCallback}\n                />\n            </div>\n            <div>\n                <img\n                    ref={aButtonRef}\n                    className={classNames(classes.button, classes.aButton)}\n                    src={aButton}\n                    alt=\"test\"\n                    onContextMenu={handleContextMenuCallback}\n                />\n                <img\n                    ref={bButtonRef}\n                    className={classNames(classes.button, classes.bButton)}\n                    src={bButton}\n                    alt=\"test\"\n                    onContextMenu={handleContextMenuCallback}\n                />\n            </div>\n        </div>\n    );\n};\n\nexport default VirtualGamepad;\n","import { useEffect, useState } from 'react';\nimport { makeStyles } from '@mui/styles';\nimport classNames from 'classnames';\nimport { useSelector } from 'react-redux';\n\n// Constants\nimport { ARROW_DOWN_KEY, ARROW_UP_KEY, ENTER_KEY } from '../constants';\n\n// Selectors\nimport { selectGameHeight, selectGameWidth, selectGameZoom } from '../redux/selectors/selectGameData';\nimport { selectMenuItems, selectMenuOnSelect, selectMenuPosition } from '../redux/selectors/selectMenu';\n\nconst useStyles = makeStyles((theme) => ({\n    menuWrapper: ({ zoom }) => ({\n        fontFamily: '\"Press Start 2P\"',\n        fontSize: `${10 * zoom}px`,\n        textTransform: 'uppercase',\n        position: 'absolute',\n        transform: 'translate(-50%, 0%)',\n    }),\n    menuPositionWrapper: ({ zoom, position, width, height }) => {\n        const left = window.innerWidth - (width * zoom);\n        const menuWidth = 160 * zoom;\n        if (position === 'center') {\n            return {\n                minWidth: `${menuWidth}px`,\n                left: '50%',\n                top: `${(height * zoom) / 2}px`,\n            };\n        }\n\n        if (position === 'left') {\n            return {\n                minWidth: `${menuWidth}px`,\n                left: `${(95 * zoom) + left / 2}px`,\n                top: `${50 * zoom}px`,\n            };\n        }\n\n        return {};\n    },\n    menuItemsWrapper: {\n        textAlign: 'center',\n        padding: 0,\n    },\n    menuItem: ({ zoom }) => ({\n        cursor: 'pointer',\n        listStyle: 'none',\n        padding: `${5 * zoom}px`,\n        marginBottom: `${5 * zoom}px`,\n        backgroundColor: '#94785c',\n        border: `${zoom}px solid #79584f`,\n    }),\n    selectedMenuItem: ({ zoom }) => ({\n        fontSize: `${11 * zoom}px`,\n        border: `${zoom}px solid #ddd`,\n    }),\n}));\n\nconst GameMenu = () => {\n    // Game\n    const gameWidth = useSelector(selectGameWidth);\n    const gameHeight = useSelector(selectGameHeight);\n    const gameZoom = useSelector(selectGameZoom);\n\n    // Menu\n    const position = useSelector(selectMenuPosition);\n    const items = useSelector(selectMenuItems);\n    const onSelected = useSelector(selectMenuOnSelect);\n\n    const classes = useStyles({\n        width: gameWidth,\n        height: gameHeight,\n        zoom: gameZoom,\n        position,\n    });\n\n    const [selectedItemIndex, setSelectedItemIndex] = useState(0);\n\n    useEffect(() => {\n        const handleKeyPressed = (e) => {\n            switch (e.code) {\n                case ENTER_KEY: {\n                    onSelected(items[selectedItemIndex]);\n                    break;\n                }\n\n                case ARROW_UP_KEY: {\n                    if (selectedItemIndex > 0) {\n                        setSelectedItemIndex(\n                            selectedItemIndex - 1\n                        );\n                    }\n\n                    break;\n                }\n\n                case ARROW_DOWN_KEY: {\n                    if (items.length - 1 > selectedItemIndex) {\n                        setSelectedItemIndex(\n                            selectedItemIndex + 1\n                        );\n                    }\n\n                    break;\n                }\n\n                default: {\n                    break;\n                }\n            }\n        };\n        window.addEventListener('keydown', handleKeyPressed);\n\n        return () => window.removeEventListener('keydown', handleKeyPressed);\n    }, [items, onSelected, selectedItemIndex]);\n\n    return (\n        <div className={classNames(classes.menuWrapper, classes.menuPositionWrapper)}>\n            <ul className={classes.menuItemsWrapper}>\n                {items.map((item, index) => (\n                    // eslint-disable-next-line jsx-a11y/no-noninteractive-element-interactions\n                    <li\n                        // eslint-disable-next-line react/no-array-index-key\n                        key={index}\n                        className={classNames(classes.menuItem, {\n                            [classes.selectedMenuItem]: selectedItemIndex === index,\n                        })}\n                        onMouseEnter={() => {\n                            setSelectedItemIndex(index);\n                        }}\n                        onClick={() => {\n                            onSelected(items[selectedItemIndex]);\n                        }}\n                    >\n                        {item}\n                    </li>\n                ))}\n            </ul>\n        </div>\n    );\n};\n\nexport default GameMenu;\n","import { ADD_LOADED_FONT } from '../constants';\n\nconst addLoadedFontAction = (payload) => (dispatch) => dispatch({\n    type: ADD_LOADED_FONT,\n    payload,\n});\n\nexport default addLoadedFontAction;\n","import { ADD_LOADED_ATLAS } from '../constants';\n\nconst addLoadedAtlasAction = (payload) => (dispatch) => dispatch({\n    type: ADD_LOADED_ATLAS,\n    payload,\n});\n\nexport default addLoadedAtlasAction;\n","import { ADD_LOADED_IMAGE } from '../constants';\n\nconst addLoadedImageAction = (payload) => (dispatch) => dispatch({\n    type: ADD_LOADED_IMAGE,\n    payload,\n});\n\nexport default addLoadedImageAction;\n","import { ADD_LOADED_MAP } from '../constants';\n\nconst addLoadedMapAction = (payload) => (dispatch) => dispatch({\n    type: ADD_LOADED_MAP,\n    payload,\n});\n\nexport default addLoadedMapAction;\n","import { ADD_LOADED_JSON } from '../constants';\n\nconst addLoadedJSONAction = (payload) => (dispatch) => dispatch({\n    type: ADD_LOADED_JSON,\n    payload,\n});\n\nexport default addLoadedJSONAction;\n","import { ADD_TILESET } from '../constants';\n\nconst addTilesetAction = (payload) => (dispatch) => dispatch({\n    type: ADD_TILESET,\n    payload,\n});\n\nexport default addTilesetAction;\n","export const selectLoadedFonts = (state) => state.loadedAssets.fonts;\n\nexport const selectLoadedAtlases = (state) => state.loadedAssets.atlases;\n\nexport const selectLoadedImages = (state) => state.loadedAssets.images;\n\nexport const selectLoadedMaps = (state) => state.loadedAssets.maps;\n\nexport const selectLoadedJSONs = (state) => state.loadedAssets.jsons;\n","import { Scene, Display } from 'phaser';\n\n// Store\nimport store from '../../redux/store';\n\n// Actions\nimport addLoadedFontAction from '../../redux/actions/addLoadedFontAction';\nimport addLoadedAtlasAction from '../../redux/actions/addLoadedAtlasAction';\nimport addLoadedImageAction from '../../redux/actions/addLoadedImageAction';\nimport addLoadedMapAction from '../../redux/actions/addLoadedMapAction';\nimport addLoadedJSONAction from '../../redux/actions/addLoadedJSONAction';\nimport addTilesetAction from '../../redux/actions/addTilesetAction';\n\n// Selectors\nimport {\n    selectLoadedAtlases,\n    selectLoadedImages,\n    selectLoadedFonts,\n    selectLoadedJSONs,\n    selectLoadedMaps,\n} from '../../redux/selectors/selectLoadedAssets';\n\n// Utils\nimport {\n    asyncLoader,\n    isMapFileAvailable,\n    isImageFileAvailable,\n    isTilesetFileAvailable,\n    isGeneratedAtlasFileAvailable,\n} from '../../utils/utils';\n\n// Constants\nimport {\n    KEY,\n    COIN,\n    ENEMY,\n    HEART,\n    CRYSTAL,\n    KEY_SPRITE_NAME,\n    COIN_SPRITE_NAME,\n    IGNORED_TILESETS,\n    ENEMY_SPRITE_NAME,\n    HEART_SPRITE_NAME,\n    CRYSTAL_SPRITE_NAME,\n} from '../../constants';\n\nexport default class LoadAssetsScene extends Scene {\n    constructor() {\n        super('LoadAssetsScene');\n    }\n\n    init(initData) {\n        this.initData = initData;\n    }\n\n    async create() {\n        const {\n            fonts = [],\n            atlases = [],\n            images = [],\n            mapKey = '',\n        } = this.initData?.assets || {};\n\n        const { getState, dispatch } = store;\n        const state = getState();\n\n        // Pre-load all the fonts needed for the scene\n        // so Phaser can render them properly\n        let newFontsCount = 0;\n        fonts?.forEach((font) => {\n            const loadedFonts = selectLoadedFonts(state);\n\n            // If a font is already loaded, then skip this\n            if (loadedFonts.includes(font)) {\n                return;\n            }\n\n            // Set font as already loaded in the redux store\n            dispatch(addLoadedFontAction(font));\n            newFontsCount += 1;\n            const color = this.game.config.backgroundColor;\n            this.add.text(\n                0,\n                0,\n                '',\n                {\n                    fontFamily: font,\n                    color: Display.Color.RGBToString(color.r, color.g, color.b, color.a),\n                }\n            );\n        });\n\n        const loadedAtlases = selectLoadedAtlases(state);\n        const loadedImages = selectLoadedImages(state);\n        const loadedMaps = selectLoadedMaps(state);\n        // Load the Tiled map needed for the next scene\n        if (\n            mapKey\n            && !loadedMaps.includes(mapKey)\n            && isMapFileAvailable(`${mapKey}.json`)\n        ) {\n            const { default: mapJson } = await import(`../../assets/maps/${mapKey}.json`);\n            const tilesets = mapJson.tilesets.map((tileset) =>\n                // the string will be something like \"../tilesets/village.json\" or \"../tilesets/village.png\"\n                tileset.source?.split('/').pop().split('.')[0] || tileset.image?.split('/').pop().split('.')[0]);\n\n            // Load objects assets\n            const objectLayers = mapJson.layers.filter((layer) => layer.type === 'objectgroup');\n            objectLayers.forEach((layer) => {\n                layer.objects.forEach(async (object) => {\n                    const { gid, properties } = object;\n                    switch (gid) {\n                        case ENEMY: {\n                            if (\n                                isGeneratedAtlasFileAvailable(`${ENEMY_SPRITE_NAME}.json`)\n                                && isGeneratedAtlasFileAvailable(`${ENEMY_SPRITE_NAME}.png`)\n                                && !loadedAtlases.includes(ENEMY_SPRITE_NAME)\n                            ) {\n                                // eslint-disable-next-line no-await-in-loop\n                                const { default: jsonPath } =\n                                    await import(`../../assets/atlases/generated/${ENEMY_SPRITE_NAME}.json`);\n                                // eslint-disable-next-line no-await-in-loop\n                                const { default: imagePath } =\n                                    await import(`../../assets/atlases/generated/${ENEMY_SPRITE_NAME}.png`);\n\n                                dispatch(addLoadedAtlasAction(ENEMY_SPRITE_NAME));\n                                await asyncLoader(this.load.atlas(ENEMY_SPRITE_NAME, imagePath, jsonPath));\n                            }\n\n                            break;\n                        }\n                        case COIN: {\n                            if (\n                                isGeneratedAtlasFileAvailable(`${COIN_SPRITE_NAME}.json`)\n                                && isGeneratedAtlasFileAvailable(`${COIN_SPRITE_NAME}.png`)\n                            && !loadedAtlases.includes(COIN_SPRITE_NAME)\n                            ) {\n                                // eslint-disable-next-line no-await-in-loop\n                                const { default: jsonPath } =\n                                    await import(`../../assets/atlases/generated/${COIN_SPRITE_NAME}.json`);\n                                // eslint-disable-next-line no-await-in-loop\n                                const { default: imagePath } =\n                                    await import(`../../assets/atlases/generated/${COIN_SPRITE_NAME}.png`);\n\n                                dispatch(addLoadedAtlasAction(COIN_SPRITE_NAME));\n                                await asyncLoader(this.load.atlas(COIN_SPRITE_NAME, imagePath, jsonPath));\n                            }\n\n                            break;\n                        }\n                        case HEART: {\n                            if (\n                                isImageFileAvailable('heart_full.png')\n                                && !loadedImages.includes(HEART_SPRITE_NAME)\n                            ) {\n                                // eslint-disable-next-line no-await-in-loop\n                                const { default: imagePath } = await import('../../assets/images/heart_full.png'); // `../../assets/images/${HEART_SPRITE_NAME}.png`\n\n                                dispatch(addLoadedImageAction(HEART_SPRITE_NAME));\n                                await asyncLoader(this.load.image(HEART_SPRITE_NAME, imagePath));\n                            }\n\n                            break;\n                        }\n                        case CRYSTAL: {\n                            if (\n                                isImageFileAvailable(`${CRYSTAL_SPRITE_NAME}.png`)\n                                && !loadedImages.includes(CRYSTAL_SPRITE_NAME)\n                            ) {\n                                // eslint-disable-next-line no-await-in-loop\n                                const { default: imagePath } =\n                                    await import(`../../assets/images/${CRYSTAL_SPRITE_NAME}.png`);\n\n                                dispatch(addLoadedImageAction(CRYSTAL_SPRITE_NAME));\n                                await asyncLoader(this.load.image(CRYSTAL_SPRITE_NAME, imagePath));\n                            }\n\n                            break;\n                        }\n                        case KEY: {\n                            if (\n                                isImageFileAvailable(`${CRYSTAL_SPRITE_NAME}.png`)\n                                && !loadedImages.includes(KEY_SPRITE_NAME)\n                            ) {\n                                // eslint-disable-next-line no-await-in-loop\n                                const { default: imagePath } =\n                                    await import(`../../assets/images/${KEY_SPRITE_NAME}.png`);\n\n                                dispatch(addLoadedImageAction(KEY_SPRITE_NAME));\n                                await asyncLoader(this.load.image(KEY_SPRITE_NAME, imagePath));\n                            }\n\n                            break;\n                        }\n                        default: {\n                            break;\n                        }\n                    }\n\n                    properties?.forEach((property) => {\n                        // TODO\n                        const { name, type, value } = property;\n                    });\n                });\n            });\n\n            const loadedJSONs = selectLoadedJSONs(state);\n            // eslint-disable-next-line no-restricted-syntax\n            for (const tilesetName of tilesets) {\n                if (tilesetName && !IGNORED_TILESETS.includes(tilesetName)) {\n                    let tilesetJson = {};\n                    if (!loadedJSONs.includes(tilesetName) && isTilesetFileAvailable(`${tilesetName}.json`)) {\n                        // eslint-disable-next-line no-await-in-loop\n                        const { default: jsonResult } = await import(`../../assets/tilesets/${tilesetName}.json`);\n                        tilesetJson = jsonResult;\n\n                        dispatch(addLoadedJSONAction(tilesetName));\n                        // eslint-disable-next-line no-await-in-loop\n                        await asyncLoader(this.load.json(tilesetName, tilesetJson));\n                    } else {\n                        tilesetJson = this.cache.json.get(tilesetName);\n                    }\n\n                    if (!loadedImages.includes(tilesetName) && isTilesetFileAvailable(tilesetJson.image)) {\n                        // eslint-disable-next-line no-await-in-loop\n                        const { default: tilesetImage } = await import(`../../assets/tilesets/${tilesetJson.image}`);\n\n                        dispatch(addLoadedImageAction(tilesetName));\n                        // eslint-disable-next-line no-await-in-loop\n                        await asyncLoader(this.load.image(tilesetName, tilesetImage));\n                    }\n\n                    mapJson.tilesets = mapJson.tilesets\n                        .filter(\n                            (tileset) => !IGNORED_TILESETS.includes(tileset.source?.split('/')?.pop()?.split('.')?.[0])\n                        ).map((tileset) => {\n                            if (tileset.source?.includes(`/${tilesetName}.json`)) {\n                                const imageExtension = tilesetJson.image.split('.').pop();\n                                const imagePath = tileset.source.replace('.json', `.${imageExtension}`);\n                                // eslint-disable-next-line no-param-reassign\n                                delete tileset.source;\n\n                                return {\n                                    ...tileset,\n                                    ...tilesetJson,\n                                    image: imagePath, // not really necessary but why not\n                                };\n                            }\n\n                            return tileset;\n                        });\n\n                    dispatch(addTilesetAction(tilesetName));\n                }\n            }\n\n            dispatch(addLoadedMapAction(mapKey));\n            // Load map with pre-loaded tilesets\n            await asyncLoader(this.load.tilemapTiledJSON(mapKey, mapJson));\n        }\n\n        // Load all the atlases needed for the next scene\n        // eslint-disable-next-line no-restricted-syntax\n        for (const atlas of atlases) {\n            if (\n                !isGeneratedAtlasFileAvailable(`${atlas}.json`)\n                || loadedAtlases.includes(atlas)\n            ) {\n                // eslint-disable-next-line no-continue\n                continue;\n            }\n\n            // eslint-disable-next-line no-await-in-loop\n            const { default: jsonPath } = await import(`../../assets/atlases/generated/${atlas}.json`);\n            const imageName = jsonPath.textures.find((texture) => texture.image.includes(atlas)).image;\n            if (!imageName || !isGeneratedAtlasFileAvailable(imageName)) {\n                // eslint-disable-next-line no-continue\n                continue;\n            }\n\n            // eslint-disable-next-line no-await-in-loop\n            const { default: imagePath } = await import(`../../assets/atlases/generated/${imageName}`);\n\n            dispatch(addLoadedAtlasAction(atlas));\n            // eslint-disable-next-line no-await-in-loop\n            await asyncLoader(this.load.atlas(atlas, imagePath, jsonPath));\n        }\n\n        // Load all the images needed for the next scene\n        // eslint-disable-next-line no-restricted-syntax\n        for (const image of images) {\n            if (\n                !isImageFileAvailable(`${image}.png`)\n                || loadedImages.includes(image)\n            ) {\n                // eslint-disable-next-line no-continue\n                continue;\n            }\n\n            // eslint-disable-next-line no-await-in-loop\n            const { default: imagePath } = await import(`../../assets/images/${image}.png`);\n\n            dispatch(addLoadedImageAction(image));\n            // eslint-disable-next-line no-await-in-loop\n            await asyncLoader(this.load.image(image, imagePath));\n        }\n\n        // If we have fonts, then wait for them to be loaded before calling the next scene...\n        if (newFontsCount > 0) {\n            document.fonts.ready.then((fontFace) => {\n                this.scene.start(\n                    this.initData.nextScene\n                );\n            });\n        } else {\n            // ... otherwise just call the next scene already\n            this.scene.start(\n                this.initData.nextScene\n            );\n        }\n    }\n}\n","import { SET_MAP_KEY } from '../constants';\n\nconst setMapKeyAction = (payload) => (dispatch) => dispatch({\n    type: SET_MAP_KEY,\n    payload,\n});\n\nexport default setMapKeyAction;\n","import { SET_FACING_DIRECTION } from '../constants';\n\nconst setHeroFacingDirectionAction = (payload) => (dispatch) => dispatch({\n    type: SET_FACING_DIRECTION,\n    payload,\n});\n\nexport default setHeroFacingDirectionAction;\n","import { SET_INITIAL_POSITION } from '../constants';\n\nconst setHeroInitialPositionAction = (payload) => (dispatch) => dispatch({\n    type: SET_INITIAL_POSITION,\n    payload,\n});\n\nexport default setHeroInitialPositionAction;\n","import { SET_PREVIOUS_POSITION } from '../constants';\n\nconst setHeroPreviousPositionAction = (payload) => (dispatch) => dispatch({\n    type: SET_PREVIOUS_POSITION,\n    payload,\n});\n\nexport default setHeroPreviousPositionAction;\n","import { SET_INITIAL_FRAME } from '../constants';\n\nconst setHeroInitialFrameAction = (payload) => (dispatch) => dispatch({\n    type: SET_INITIAL_FRAME,\n    payload,\n});\n\nexport default setHeroInitialFrameAction;\n","import { SET_MENU_ITEMS } from '../constants';\n\nconst setMenuItemsAction = (payload) => (dispatch) => dispatch({\n    type: SET_MENU_ITEMS,\n    payload,\n});\n\nexport default setMenuItemsAction;\n","import { SET_MENU_ON_SELECT } from '../constants';\n\nconst setMenuOnSelectAction = (payload) => (dispatch) => dispatch({\n    type: SET_MENU_ON_SELECT,\n    payload,\n});\n\nexport default setMenuOnSelectAction;\n","import { Scene } from 'phaser';\n\n// Constants\nimport { DOWN_DIRECTION, IDLE_FRAME } from '../../constants';\n\n// Store\nimport store from '../../redux/store';\n\n// Actions\nimport setMapKeyAction from '../../redux/actions/setMapKeyAction';\nimport setHeroFacingDirectionAction from '../../redux/actions/setHeroFacingDirectionAction';\nimport setHeroInitialPositionAction from '../../redux/actions/setHeroInitialPositionAction';\nimport setHeroPreviousPositionAction from '../../redux/actions/setHeroPreviousPositionAction';\nimport setHeroInitialFrameAction from '../../redux/actions/setHeroInitialFrameAction';\nimport setMenuItemsAction from '../../redux/actions/setMenuItemsAction';\nimport setMenuOnSelectAction from '../../redux/actions/setMenuOnSelectAction';\n\nexport default class MainMenuScene extends Scene {\n    constructor() {\n        super('MainMenuScene');\n    }\n\n    preload() {\n        // TODO\n    }\n\n    create() {\n        const { dispatch } = store;\n\n        dispatch(setMenuItemsAction(['Start Game', 'Exit']));\n        dispatch(setMenuOnSelectAction((item) => {\n            if (item === 'Start Game') {\n                handleStartGameSelected();\n            } else {\n                dispatch(setMenuItemsAction([]));\n                dispatch(setMenuOnSelectAction(null));\n                window.location.reload();\n            }\n        }));\n\n        const handleStartGameSelected = () => Promise.all([\n            dispatch(setMenuItemsAction([])),\n            dispatch(setMenuOnSelectAction(null)),\n            dispatch(setMapKeyAction('sample_map')), // sample_indoor\n            dispatch(setHeroFacingDirectionAction(DOWN_DIRECTION)),\n            dispatch(setHeroInitialPositionAction({ x: 30, y: 42 })),\n            dispatch(setHeroPreviousPositionAction({ x: 30, y: 42 })),\n            dispatch(setHeroInitialFrameAction(\n                IDLE_FRAME.replace('position', DOWN_DIRECTION)\n            )),\n        ]).then(() => {\n            this.scene.start('LoadAssetsScene', {\n                nextScene: 'GameScene',\n                assets: {\n                    // fonts: ['\"Press Start 2P\"'],\n                    atlases: ['hero'],\n                    images: [],\n                    mapKey: 'sample_map',\n                    // mapKey: 'sample_indoor',\n                },\n            });\n        });\n    }\n}\n","export const selectMapKey = (state) => state.mapData.mapKey;\n\nexport const selectTilesets = (state) => state.mapData.tilesets;\n","export const selectHeroFacingDirection = (state) => state.heroData.facingDirection;\n\nexport const selectHeroInitialPosition = (state) => state.heroData.initialPosition;\n\nexport const selectHeroPreviousPosition = (state) => state.heroData.previousPosition;\n\nexport const selectHeroInitialFrame = (state) => state.heroData.initialFrame;\n","import { SET_DIALOG_CHARACTER_NAME } from '../constants';\n\nconst setDialogCharacterNameAction = (payload) => (dispatch) => dispatch({\n    type: SET_DIALOG_CHARACTER_NAME,\n    payload,\n});\n\nexport default setDialogCharacterNameAction;\n","import { SET_DIALOG_MESSAGES } from '../constants';\n\nconst setDialogMessagesAction = (payload) => (dispatch) => dispatch({\n    type: SET_DIALOG_MESSAGES,\n    payload,\n});\n\nexport default setDialogMessagesAction;\n","import { SET_DIALOG_ACTION } from '../constants';\n\nconst setDialogActionAction = (payload) => (dispatch) => dispatch({\n    type: SET_DIALOG_ACTION,\n    payload,\n});\n\nexport default setDialogActionAction;\n","import { Input } from 'phaser';\n\n// Constants\nimport {\n    KEY,\n    COIN,\n    HEART,\n    ENEMY,\n    CRYSTAL,\n    IDLE_FRAME,\n    TILE_WIDTH,\n    TILE_HEIGHT,\n    UP_DIRECTION,\n    LEFT_DIRECTION,\n    DOWN_DIRECTION,\n    RIGHT_DIRECTION,\n    KEY_SPRITE_NAME,\n    HERO_SPRITE_NAME,\n    COIN_SPRITE_NAME,\n    ENEMY_SPRITE_NAME,\n    HEART_SPRITE_NAME,\n    CRYSTAL_SPRITE_NAME,\n} from '../constants';\n\n// Utils\nimport { createInteractiveGameObject } from './utils';\n\n// Store\nimport store from '../redux/store';\n\n// Selectors\nimport { selectMapKey, selectTilesets } from '../redux/selectors/selectMapData';\nimport {\n    selectHeroInitialFrame,\n    selectHeroFacingDirection,\n    selectHeroInitialPosition,\n} from '../redux/selectors/selectHeroData';\nimport { selectDialogMessages } from '../redux/selectors/selectDialog';\n\n// Actions\nimport setDialogCharacterNameAction from '../redux/actions/setDialogCharacterNameAction';\nimport setDialogMessagesAction from '../redux/actions/setDialogMessagesAction';\nimport setDialogActionAction from '../redux/actions/setDialogActionAction';\n\nexport const getSelectorData = (selector) => {\n    const { getState } = store;\n\n    return selector(getState());\n};\n\nexport const getDispatch = () => store.dispatch;\n\n/**\n * @param scene\n * @param assetKey\n * @param animationName\n * @param frameQuantity\n */\n// eslint-disable-next-line import/prefer-default-export\nexport const createWalkingAnimation = (\n    scene,\n    assetKey,\n    animationName,\n    frameQuantity\n) => {\n    scene.anims.create({\n        key: `${assetKey}_${animationName}`,\n        frames: Array.from({ length: frameQuantity }).map((n, index) => ({\n            key: assetKey,\n            frame: `${animationName}_${(index + 1).toString().padStart(2, '0')}`,\n        })),\n        frameRate: 4,\n        repeat: -1,\n        yoyo: true,\n    });\n};\n\nexport const handleCreateCharactersMovements = (scene) => {\n    // Movement started\n    scene.gridEngine.movementStarted().subscribe(({ charId, direction }) => {\n        const char = scene.sprites.getChildren().find((sprite) => sprite.name === charId);\n\n        if (char) {\n            char.anims.play(`${char.texture.key}_walk_${direction}`);\n        }\n    });\n\n    // Movement ended\n    scene.gridEngine.movementStopped().subscribe(({ charId, direction }) => {\n        const char = scene.sprites.getChildren().find((sprite) => sprite.name === charId);\n\n        if (char) {\n            char.anims.stop();\n            char.setFrame(IDLE_FRAME.replace('position', direction));\n        }\n    });\n\n    // Direction changed\n    scene.gridEngine.directionChanged().subscribe(({ charId, direction }) => {\n        const char = scene.sprites.getChildren().find((sprite) => sprite.name === charId);\n\n        if (char) {\n            char.setFrame(IDLE_FRAME.replace('position', direction));\n        }\n    });\n};\n\nexport const handleCreateControls = (scene) => {\n    // Controls\n    // eslint-disable-next-line no-param-reassign\n    scene.actionKey = scene.input.keyboard.addKey(Input.Keyboard.KeyCodes.SPACE);\n    // eslint-disable-next-line no-param-reassign\n    scene.cursors = scene.input.keyboard.createCursorKeys();\n    // eslint-disable-next-line no-param-reassign\n    scene.wasd = scene.input.keyboard.addKeys({\n        [UP_DIRECTION]: Input.Keyboard.KeyCodes.W,\n        [DOWN_DIRECTION]: Input.Keyboard.KeyCodes.S,\n        [LEFT_DIRECTION]: Input.Keyboard.KeyCodes.A,\n        [RIGHT_DIRECTION]: Input.Keyboard.KeyCodes.D,\n    });\n};\n\nexport const handleCreateGroups = (scene) => {\n    // Game groups\n    // eslint-disable-next-line no-param-reassign\n    scene.sprites = scene.add.group();\n    // eslint-disable-next-line no-param-reassign\n    scene.enemies = scene.add.group();\n    // eslint-disable-next-line no-param-reassign\n    scene.items = scene.add.group();\n};\n\nexport const handleCreateMap = (scene) => {\n    const mapKey = getSelectorData(selectMapKey);\n    const tilesets = getSelectorData(selectTilesets);\n\n    // Create the map\n    const map = scene.make.tilemap({ key: mapKey });\n    tilesets.forEach((tilesetName) => {\n        map.addTilesetImage(tilesetName, tilesetName);\n    });\n\n    map.layers.forEach((layerData, index) => {\n        const layer = map.createLayer(layerData.name, tilesets, 0, 0);\n    });\n\n    // eslint-disable-next-line no-param-reassign\n    scene.map = map;\n};\n\nexport const handleCreateHero = (scene) => {\n    const initialFrame = getSelectorData(selectHeroInitialFrame);\n\n    // Create hero sprite\n    const heroSprite = scene.physics.add\n        .sprite(0, 0, HERO_SPRITE_NAME, initialFrame)\n        .setName(HERO_SPRITE_NAME)\n        .setDepth(1);\n\n    const actionColliderSizeOffset = 2;\n    // eslint-disable-next-line no-param-reassign\n    heroSprite.actionCollider = createInteractiveGameObject(\n        scene,\n        0,\n        0,\n        TILE_WIDTH - actionColliderSizeOffset,\n        TILE_HEIGHT - actionColliderSizeOffset,\n        true\n    );\n\n    // eslint-disable-next-line no-param-reassign\n    heroSprite.update = (time, delta) => {\n        const facingDirection = scene.gridEngine.getFacingDirection(HERO_SPRITE_NAME);\n\n        switch (facingDirection) {\n            case DOWN_DIRECTION: {\n                heroSprite.actionCollider.setX(\n                    heroSprite.x + (actionColliderSizeOffset / 2)\n                );\n                heroSprite.actionCollider.setY(\n                    heroSprite.y + TILE_HEIGHT\n                );\n\n                break;\n            }\n\n            case UP_DIRECTION: {\n                heroSprite.actionCollider.setX(\n                    heroSprite.x + (actionColliderSizeOffset / 2)\n                );\n                heroSprite.actionCollider.setY(\n                    heroSprite.y - TILE_HEIGHT + (actionColliderSizeOffset / 2)\n                );\n\n                break;\n            }\n\n            case LEFT_DIRECTION: {\n                heroSprite.actionCollider.setX(\n                    heroSprite.x - TILE_HEIGHT + (actionColliderSizeOffset / 2)\n                );\n                heroSprite.actionCollider.setY(\n                    heroSprite.y + (actionColliderSizeOffset / 2)\n                );\n\n                break;\n            }\n\n            case RIGHT_DIRECTION: {\n                heroSprite.actionCollider.setX(\n                    heroSprite.x + TILE_WIDTH + (actionColliderSizeOffset / 2)\n                );\n                heroSprite.actionCollider.setY(\n                    heroSprite.y + (actionColliderSizeOffset / 2)\n                );\n\n                break;\n            }\n\n            default: {\n                break;\n            }\n        }\n    };\n\n    // eslint-disable-next-line no-param-reassign\n    scene.heroSprite = heroSprite;\n    scene.sprites.add(heroSprite);\n};\n\nexport const handleObjectsLayer = (scene) => {\n    // Load game objects like items, enemies, etc\n    const dispatch = getDispatch();\n    scene.map.objects.forEach((objectLayerData, layerIndex) => {\n        objectLayerData?.objects?.forEach((object, objectIndex) => {\n            const { gid, properties, x, y } = object;\n\n            switch (gid) {\n                case ENEMY: {\n                    const name = `${ENEMY_SPRITE_NAME}_${layerIndex}${objectIndex}`;\n                    const enemy = scene.physics.add\n                        .sprite(x, y, ENEMY_SPRITE_NAME, IDLE_FRAME.replace('position', DOWN_DIRECTION))\n                        .setName(name)\n                        .setDepth(1);\n\n                    scene.sprites.add(enemy);\n                    scene.enemies.add(enemy);\n                    scene.gridEngine.addCharacter({\n                        id: name,\n                        offsetY: 0, // default\n                        sprite: enemy,\n                        startPosition: {\n                            x: Math.floor(x / TILE_WIDTH),\n                            y: Math.floor(y / TILE_HEIGHT),\n                        },\n                    });\n\n                    const enemyActionHeroCollider = scene.physics.add.collider(\n                        enemy,\n                        scene.heroSprite.actionCollider,\n                        (e, a) => {\n                            if (Input.Keyboard.JustDown(scene.actionKey)) {\n                                const messages = getSelectorData(selectDialogMessages);\n\n                                if (messages.length === 0) {\n                                    enemyActionHeroCollider.active = false;\n                                    dispatch(setDialogCharacterNameAction('monster'));\n                                    dispatch(setDialogMessagesAction([\n                                        'Lorem ipsum dolor sit amet, consectetur adipiscing elit.',\n                                        'Praesent id neque sodales, feugiat tortor non, fringilla ex.',\n                                        'Neque porro quisquam est qui dolorem ipsum quia dolor sit amet, consectetur',\n                                    ]));\n                                    dispatch(setDialogActionAction(() => {\n                                        // Do this to not trigger the message again\n                                        // Because whenever you call JustDown once, the second time\n                                        // you call it, it will be false\n                                        Input.Keyboard.JustDown(scene.actionKey);\n                                        dispatch(setDialogCharacterNameAction(''));\n                                        dispatch(setDialogMessagesAction([]));\n                                        dispatch(setDialogActionAction(null));\n                                    }));\n\n                                    scene.time.delayedCall(0, () => {\n                                        enemyActionHeroCollider.active = true;\n                                    });\n                                }\n                            }\n                        }\n                    );\n\n                    break;\n                }\n\n                case COIN: {\n                    const name = `${COIN_SPRITE_NAME}_${layerIndex}${objectIndex}`;\n                    const coin = scene.physics.add\n                        .sprite(x, y, COIN_SPRITE_NAME, 'coin_idle_01')\n                        .setOrigin(0, 0)\n                        .setName(name)\n                        .setDepth(1);\n\n                    const animationKey = `${COIN_SPRITE_NAME}_idle`;\n                    if (!scene.anims.exists(animationKey)) {\n                        scene.anims.create({\n                            key: animationKey,\n                            frames: Array.from({ length: 2 }).map((n, index) => ({\n                                key: COIN_SPRITE_NAME,\n                                frame: `${COIN_SPRITE_NAME}_idle_${(index + 1).toString().padStart(2, '0')}`,\n                            })),\n                            frameRate: 3,\n                            repeat: -1,\n                            yoyo: false,\n                        });\n                    }\n\n                    coin.anims.play(animationKey);\n                    scene.items.add(coin);\n\n                    break;\n                }\n\n                case HEART: {\n                    const name = `${HEART_SPRITE_NAME}_${layerIndex}${objectIndex}`;\n                    const heart = scene.physics.add\n                        .image(x, y, HEART_SPRITE_NAME)\n                        .setOrigin(0, 0)\n                        .setName(name)\n                        .setDepth(1);\n\n                    scene.items.add(heart);\n\n                    break;\n                }\n\n                case CRYSTAL: {\n                    const name = `${CRYSTAL_SPRITE_NAME}_${layerIndex}${objectIndex}`;\n                    const crystal = scene.physics.add\n                        .image(x, y, CRYSTAL_SPRITE_NAME)\n                        .setOrigin(0, 0)\n                        .setName(name)\n                        .setDepth(1);\n\n                    scene.items.add(crystal);\n\n                    break;\n                }\n\n                case KEY: {\n                    const name = `${KEY_SPRITE_NAME}_${layerIndex}${objectIndex}`;\n                    const key = scene.physics.add\n                        .image(x, y, KEY_SPRITE_NAME)\n                        .setOrigin(0, 0)\n                        .setName(name)\n                        .setDepth(1);\n\n                    scene.items.add(key);\n\n                    break;\n                }\n                default: {\n                    break;\n                }\n            }\n        });\n    });\n};\n\nexport const handleConfigureCamera = (scene) => {\n    const { game } = scene.sys;\n    const camera = scene.cameras.main;\n\n    // Configure the main camera\n    camera.startFollow(scene.heroSprite, true);\n    camera.setFollowOffset(-scene.heroSprite.width, -scene.heroSprite.height);\n    camera.setBounds(\n        0,\n        0,\n        Math.max(scene.map.widthInPixels, game.scale.gameSize.width),\n        Math.max(scene.map.heightInPixels, game.scale.gameSize.height)\n    );\n\n    if (scene.map.widthInPixels < game.scale.gameSize.width) {\n        camera.setPosition(\n            (game.scale.gameSize.width - scene.map.widthInPixels) / 2\n        );\n    }\n\n    if (scene.map.heightInPixels < game.scale.gameSize.height) {\n        camera.setPosition(\n            camera.x,\n            (game.scale.gameSize.height - scene.map.heightInPixels) / 2\n        );\n    }\n};\n\nexport const handleCreateHeroAnimations = (scene) => {\n    // Animations\n    [UP_DIRECTION, DOWN_DIRECTION, LEFT_DIRECTION, RIGHT_DIRECTION].forEach((direction) => {\n        createWalkingAnimation(\n            scene,\n            HERO_SPRITE_NAME,\n            `walk_${direction}`,\n            3\n        );\n    });\n};\n\nexport const handleConfigureGridEngine = (scene) => {\n    const initialPosition = getSelectorData(selectHeroInitialPosition);\n    const facingDirection = getSelectorData(selectHeroFacingDirection);\n\n    // Grid Engine\n    scene.gridEngine.create(scene.map, {\n        characterCollisionStrategy: 'BLOCK_TWO_TILES', // default\n        collisionTilePropertyName: 'ge_collide', // default\n        numberOfDirections: 4, // default\n        characters: [{\n            id: HERO_SPRITE_NAME,\n            offsetY: 0, // default\n            sprite: scene.heroSprite,\n            startPosition: initialPosition,\n            facingDirection,\n        }],\n    });\n};\n\nexport const handleHeroMovement = (scene) => {\n    if (scene.cursors.left.isDown || scene.wasd[LEFT_DIRECTION].isDown) {\n        scene.gridEngine.move(HERO_SPRITE_NAME, LEFT_DIRECTION);\n    } else if (scene.cursors.right.isDown || scene.wasd[RIGHT_DIRECTION].isDown) {\n        scene.gridEngine.move(HERO_SPRITE_NAME, RIGHT_DIRECTION);\n    } else if (scene.cursors.up.isDown || scene.wasd[UP_DIRECTION].isDown) {\n        scene.gridEngine.move(HERO_SPRITE_NAME, UP_DIRECTION);\n    } else if (scene.cursors.down.isDown || scene.wasd[DOWN_DIRECTION].isDown) {\n        scene.gridEngine.move(HERO_SPRITE_NAME, DOWN_DIRECTION);\n    }\n};\n","import { Scene } from 'phaser';\n\n// Utils\nimport {\n    handleCreateMap,\n    handleCreateHero,\n    handleObjectsLayer,\n    handleHeroMovement,\n    handleCreateGroups,\n    handleCreateControls,\n    handleConfigureCamera,\n    handleConfigureGridEngine,\n    handleCreateHeroAnimations,\n    handleCreateCharactersMovements,\n} from '../../utils/sceneHelpers';\n\nexport default class GameScene extends Scene {\n    constructor() {\n        super('GameScene');\n    }\n\n    create() {\n        // All of these functions need to be called in order\n\n        // Create controls\n        handleCreateControls(this);\n\n        // Create game groups\n        handleCreateGroups(this);\n\n        // Create the map\n        handleCreateMap(this);\n\n        // Create hero sprite\n        handleCreateHero(this);\n\n        // Configure grid engine\n        handleConfigureGridEngine(this);\n\n        // Load game objects like items, enemies, etc\n        handleObjectsLayer(this);\n\n        // Configure the main camera\n        handleConfigureCamera(this);\n\n        // Animations\n        handleCreateHeroAnimations(this);\n\n        // Handle characters movements\n        handleCreateCharactersMovements(this);\n    }\n\n    update(time, delta) {\n        handleHeroMovement(this);\n        this.heroSprite.update(time, delta);\n    }\n}\n","import { useMemo } from 'react';\nimport { animated, useTransition } from 'react-spring';\nimport { makeStyles } from '@mui/styles';\n\nconst useStyles = makeStyles((theme) => ({\n    dialogMessage: ({ zoom }) => ({\n        fontFamily: '\"Press Start 2P\"',\n        fontSize: `${6 * zoom}px`,\n        textTransform: 'uppercase',\n        lineHeight: `${8 * zoom}px`,\n    }),\n}));\n\nconst Message = ({\n    message = [],\n    trail = 35,\n    zoom = 1,\n    onMessageEnded = () => {},\n    forceShowFullMessage = false,\n}) => {\n    const classes = useStyles({ zoom });\n    const items = useMemo(\n        () => message.trim().split('').map((letter, index) => ({\n            item: letter,\n            key: index,\n        })),\n        [message]\n    );\n\n    const transitions = useTransition(items, {\n        trail,\n        from: { display: 'none' },\n        enter: { display: '' },\n        onRest: (status, controller, item) => {\n            if (item.key === items.length - 1) {\n                onMessageEnded();\n            }\n        },\n    });\n\n    return (\n        <div className={classes.dialogMessage}>\n            {forceShowFullMessage && (\n                <span>{message}</span>\n            )}\n\n            {!forceShowFullMessage && transitions((styles, { item, key }) => (\n                <animated.span key={key} style={styles}>\n                    {item}\n                </animated.span>\n            ))}\n        </div>\n    );\n};\n\nexport default Message;\n","import { useCallback, useEffect, useState } from 'react';\nimport { makeStyles } from '@mui/styles';\nimport { useSelector } from 'react-redux';\n\n// Components\nimport Message from './Message';\n\n// Selectors\nimport { selectGameHeight, selectGameWidth, selectGameZoom } from '../redux/selectors/selectGameData';\nimport { selectDialogAction, selectDialogCharacterName, selectDialogMessages } from '../redux/selectors/selectDialog';\n\n// Constants\nimport { ENTER_KEY, ESCAPE_KEY, SPACE_KEY } from '../constants';\n\nconst useStyles = makeStyles((theme) => ({\n    dialogWindow: ({ width, height, zoom }) => ({\n        imageRendering: 'pixelated',\n        fontFamily: '\"Press Start 2P\"',\n        textTransform: 'uppercase',\n        backgroundColor: '#e2b27e',\n        border: 'solid',\n        padding: `${8 * zoom}px`,\n        position: 'absolute',\n        bottom: `${Math.ceil(window.innerHeight - (height * zoom) + (height * 0.05))}px`,\n        width: `${Math.ceil(width * 0.8 * zoom)}px`,\n        left: '50%',\n        transform: 'translate(-50%, 0%)',\n        minHeight: `${Math.ceil((height / 4) * zoom)}px`,\n        maxHeight: `${Math.ceil((height / 3) * zoom)}px`,\n    }),\n    dialogTitle: ({ zoom }) => ({\n        fontSize: `${8 * zoom}px`,\n        marginBottom: `${6 * zoom}px`,\n        fontWeight: 'bold',\n    }),\n    dialogFooter: ({ zoom }) => ({\n        fontSize: `${8 * zoom}px`,\n        cursor: 'pointer',\n        textAlign: 'end',\n        position: 'absolute',\n        right: `${6 * zoom}px`,\n        bottom: `${6 * zoom}px`,\n    }),\n}));\n\nconst DialogBox = () => {\n    const dialogMessages = useSelector(selectDialogMessages);\n    const dialogAction = useSelector(selectDialogAction);\n    const gameWidth = useSelector(selectGameWidth);\n    const gameHeight = useSelector(selectGameHeight);\n    const gameZoom = useSelector(selectGameZoom);\n    const characterName = useSelector(selectDialogCharacterName);\n\n    const [currentMessage, setCurrentMessage] = useState(0);\n    const [messageEnded, setMessageEnded] = useState(false);\n    const [forceShowFullMessage, setForceShowFullMessage] = useState(false);\n    const classes = useStyles({\n        width: gameWidth,\n        height: gameHeight,\n        zoom: gameZoom,\n    });\n\n    const handleClick = useCallback(() => {\n        if (messageEnded) {\n            setMessageEnded(false);\n            setForceShowFullMessage(false);\n            if (currentMessage < dialogMessages.length - 1) {\n                setCurrentMessage(currentMessage + 1);\n            } else {\n                setCurrentMessage(0);\n                dialogAction?.();\n            }\n        } else {\n            setMessageEnded(true);\n            setForceShowFullMessage(true);\n        }\n    }, [dialogAction, currentMessage, messageEnded, dialogMessages.length]);\n\n    useEffect(() => {\n        const handleKeyPressed = (e) => {\n            if ([ENTER_KEY, SPACE_KEY, ESCAPE_KEY].includes(e.code)) {\n                handleClick();\n            }\n        };\n        window.addEventListener('keydown', handleKeyPressed);\n\n        return () => window.removeEventListener('keydown', handleKeyPressed);\n    }, [dialogMessages.length, handleClick]);\n\n    return (\n        <div className={classes.dialogWindow}>\n            <div className={classes.dialogTitle}>\n                {characterName}\n            </div>\n            <Message\n                message={dialogMessages[currentMessage]}\n                key={currentMessage}\n                zoom={gameZoom}\n                forceShowFullMessage={forceShowFullMessage}\n                onMessageEnded={() => {\n                    setMessageEnded(true);\n                }}\n            />\n            <div\n                onClick={handleClick}\n                className={classes.dialogFooter}\n            >\n                {(currentMessage === dialogMessages.length - 1 && messageEnded) ? 'Ok' : 'Next'}\n            </div>\n        </div>\n    );\n};\n\nexport default DialogBox;\n","/* eslint-disable react/jsx-filename-extension */\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { ThemeProvider, createTheme } from '@mui/material/styles';\nimport { Helmet } from 'react-helmet';\n\n// Store\nimport store from './redux/store';\n\n// Styles\nimport './index.css';\n\n// Components\nimport Game from './Game';\n\nconst theme = createTheme();\n\nReactDOM.render(\n    <Provider store={store}>\n        <Helmet>\n            <title>My Phaser Game</title>\n        </Helmet>\n        <ThemeProvider theme={theme}>\n            <Game />\n        </ThemeProvider>\n    </Provider>,\n    document.getElementById('root')\n);\n\n","var map = {\n\t\"./sample_indoor\": 65,\n\t\"./sample_indoor.json\": 65,\n\t\"./sample_map\": 66,\n\t\"./sample_map.json\": 66\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\tif(!__webpack_require__.m[id]) {\n\t\tvar e = new Error(\"Module '\" + req + \"' ('\" + id + \"') is not available (weak dependency)\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nwebpackContext.id = 127;\nmodule.exports = webpackContext;","var map = {\n\t\"./a_button.png\": 51,\n\t\"./b_button.png\": 52,\n\t\"./crystal.png\": 103,\n\t\"./d_pad_button.png\": 28,\n\t\"./heart_empty.png\": 104,\n\t\"./heart_full.png\": 102,\n\t\"./heart_half.png\": 105,\n\t\"./key.png\": 106\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\tif(!__webpack_require__.m[id]) {\n\t\tvar e = new Error(\"Module '\" + req + \"' ('\" + id + \"') is not available (weak dependency)\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nwebpackContext.id = 128;\nmodule.exports = webpackContext;","var map = {\n\t\"./city\": 47,\n\t\"./city.json\": 47,\n\t\"./city.png\": 107,\n\t\"./objects\": 48,\n\t\"./objects.json\": 48,\n\t\"./objects.png\": 108,\n\t\"./village\": 49,\n\t\"./village.json\": 49,\n\t\"./village.png\": 109\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\tif(!__webpack_require__.m[id]) {\n\t\tvar e = new Error(\"Module '\" + req + \"' ('\" + id + \"') is not available (weak dependency)\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nwebpackContext.id = 129;\nmodule.exports = webpackContext;","var map = {\n\t\"./coin\": 39,\n\t\"./coin.json\": 39,\n\t\"./coin.png\": 67,\n\t\"./enemy\": 40,\n\t\"./enemy.json\": 40,\n\t\"./enemy.png\": 68,\n\t\"./hero\": 41,\n\t\"./hero.json\": 41,\n\t\"./hero.png\": 69,\n\t\"./npc_01\": 42,\n\t\"./npc_01.json\": 42,\n\t\"./npc_01.png\": 70,\n\t\"./npc_02\": 43,\n\t\"./npc_02.json\": 43,\n\t\"./npc_02.png\": 71,\n\t\"./npc_03\": 44,\n\t\"./npc_03.json\": 44,\n\t\"./npc_03.png\": 72,\n\t\"./npc_04\": 45,\n\t\"./npc_04.json\": 45,\n\t\"./npc_04.png\": 73,\n\t\"./npc_05\": 46,\n\t\"./npc_05.json\": 46,\n\t\"./npc_05.png\": 74\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\tif(!__webpack_require__.m[id]) {\n\t\tvar e = new Error(\"Module '\" + req + \"' ('\" + id + \"') is not available (weak dependency)\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nwebpackContext.id = 130;\nmodule.exports = webpackContext;","var map = {\n\t\"./sample_indoor.json\": [\n\t\t65,\n\t\t30\n\t],\n\t\"./sample_map.json\": [\n\t\t66,\n\t\t31\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 3);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 132;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./city.json\": [\n\t\t47,\n\t\t8\n\t],\n\t\"./objects.json\": [\n\t\t48,\n\t\t9\n\t],\n\t\"./village.json\": [\n\t\t49,\n\t\t10\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 3);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 133;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./city\": [\n\t\t47,\n\t\t3,\n\t\t8\n\t],\n\t\"./city.json\": [\n\t\t47,\n\t\t3,\n\t\t8\n\t],\n\t\"./city.png\": [\n\t\t107,\n\t\t9,\n\t\t27\n\t],\n\t\"./objects\": [\n\t\t48,\n\t\t3,\n\t\t9\n\t],\n\t\"./objects.json\": [\n\t\t48,\n\t\t3,\n\t\t9\n\t],\n\t\"./objects.png\": [\n\t\t108,\n\t\t9,\n\t\t28\n\t],\n\t\"./village\": [\n\t\t49,\n\t\t3,\n\t\t10\n\t],\n\t\"./village.json\": [\n\t\t49,\n\t\t3,\n\t\t10\n\t],\n\t\"./village.png\": [\n\t\t109,\n\t\t9,\n\t\t29\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[2]).then(function() {\n\t\treturn __webpack_require__.t(id, ids[1])\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 134;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./coin\": [\n\t\t39,\n\t\t3,\n\t\t0\n\t],\n\t\"./coin.json\": [\n\t\t39,\n\t\t3,\n\t\t0\n\t],\n\t\"./coin.png\": [\n\t\t67,\n\t\t9,\n\t\t11\n\t],\n\t\"./enemy\": [\n\t\t40,\n\t\t3,\n\t\t1\n\t],\n\t\"./enemy.json\": [\n\t\t40,\n\t\t3,\n\t\t1\n\t],\n\t\"./enemy.png\": [\n\t\t68,\n\t\t9,\n\t\t12\n\t],\n\t\"./hero\": [\n\t\t41,\n\t\t3,\n\t\t2\n\t],\n\t\"./hero.json\": [\n\t\t41,\n\t\t3,\n\t\t2\n\t],\n\t\"./hero.png\": [\n\t\t69,\n\t\t9,\n\t\t13\n\t],\n\t\"./npc_01\": [\n\t\t42,\n\t\t3,\n\t\t3\n\t],\n\t\"./npc_01.json\": [\n\t\t42,\n\t\t3,\n\t\t3\n\t],\n\t\"./npc_01.png\": [\n\t\t70,\n\t\t9,\n\t\t14\n\t],\n\t\"./npc_02\": [\n\t\t43,\n\t\t3,\n\t\t4\n\t],\n\t\"./npc_02.json\": [\n\t\t43,\n\t\t3,\n\t\t4\n\t],\n\t\"./npc_02.png\": [\n\t\t71,\n\t\t9,\n\t\t15\n\t],\n\t\"./npc_03\": [\n\t\t44,\n\t\t3,\n\t\t5\n\t],\n\t\"./npc_03.json\": [\n\t\t44,\n\t\t3,\n\t\t5\n\t],\n\t\"./npc_03.png\": [\n\t\t72,\n\t\t9,\n\t\t16\n\t],\n\t\"./npc_04\": [\n\t\t45,\n\t\t3,\n\t\t6\n\t],\n\t\"./npc_04.json\": [\n\t\t45,\n\t\t3,\n\t\t6\n\t],\n\t\"./npc_04.png\": [\n\t\t73,\n\t\t9,\n\t\t17\n\t],\n\t\"./npc_05\": [\n\t\t46,\n\t\t3,\n\t\t7\n\t],\n\t\"./npc_05.json\": [\n\t\t46,\n\t\t3,\n\t\t7\n\t],\n\t\"./npc_05.png\": [\n\t\t74,\n\t\t9,\n\t\t18\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[2]).then(function() {\n\t\treturn __webpack_require__.t(id, ids[1])\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 135;\nmodule.exports = webpackAsyncContext;"],"sourceRoot":""}