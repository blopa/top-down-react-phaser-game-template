{"version":3,"sources":["constants.js","redux/constants.js","utils/utils.js","redux/selectors/selectGameData.js","redux/selectors/selectMapData.js","redux/selectors/selectHeroData.js","redux/actions/dialog/setDialogCharacterNameAction.js","redux/actions/dialog/setDialogMessagesAction.js","redux/actions/dialog/setDialogActionAction.js","utils/sceneHelpers.js","utils/phaser.js","redux/selectors/selectDialog.js","redux/reducers/loadedAssetsReducer.js","redux/reducers/gameDataReducer.js","redux/reducers/heroDataReducer.js","redux/reducers/mapDataReducer.js","redux/reducers/dialogReducer.js","redux/reducers/menuReducer.js","redux/reducers/textReducer.js","redux/reducers/index.js","redux/store.js","assets/images/d_pad_button.png","redux/selectors/selectMenu.js","redux/actions/heroData/setHeroFacingDirectionAction.js","redux/actions/mapData/setMapKeyAction.js","redux/actions/heroData/setHeroInitialPositionAction.js","redux/actions/heroData/setHeroPreviousPositionAction.js","redux/actions/heroData/setHeroInitialFrameAction.js","assets/atlases/generated lazy /^/.//.*/.json$/ groupOptions: {} namespace object","../ /^/.//.*/.png$/ groupOptions: {} namespace object","assets/images/a_button.png","assets/images/b_button.png","webpack:///./node_modules/file-loader/dist/cjs.js ^\\.\\/.*\\.png$ namespace object?8b65","Game.jsx","game/scenes/BootScene.js","redux/actions/game/setGameHeightAction.js","redux/actions/game/setGameWidthAction.js","redux/actions/game/setGameZoomAction.js","redux/actions/game/setGameCanvasElementAction.js","components/VirtualGamepad.jsx","components/GameMenu.jsx","redux/selectors/selectText.js","redux/actions/loadedAssets/addLoadedFontAction.js","redux/actions/loadedAssets/addLoadedAtlasAction.js","redux/actions/loadedAssets/addLoadedImageAction.js","redux/actions/loadedAssets/addLoadedMapAction.js","redux/actions/loadedAssets/addLoadedJSONAction.js","redux/actions/mapData/addTilesetAction.js","redux/selectors/selectLoadedAssets.js","game/scenes/LoadAssetsScene.js","redux/actions/menu/setMenuItemsAction.js","redux/actions/menu/setMenuOnSelectAction.js","game/scenes/MainMenuScene.js","redux/actions/game/setGameCameraSizeUpdateCallbackAction.js","game/scenes/GameScene.js","components/Message.jsx","components/DialogBox.jsx","hooks/useRect.jsx","components/GameText.jsx","index.js","assets/maps weak /^/.//.*$","assets/images weak /^/.//.*$","assets/tilesets weak /^/.//.*$","assets/atlases/generated weak /^/.//.*$","assets/maps lazy /^/.//.*/.json$/ groupOptions: {} namespace object","assets/tilesets lazy /^/.//.*/.json$/ groupOptions: {} namespace object","assets/tilesets lazy /^/.//.*$/ groupOptions: {} namespace object","../ /^/.//.*$/ groupOptions: {} namespace object","intl lazy /^/.//.*/.json$/ groupOptions: {} namespace object"],"names":["TILE_WIDTH","TILE_HEIGHT","MIN_GAME_WIDTH","MIN_GAME_HEIGHT","RESIZE_THRESHOLD","RE_RESIZE_THRESHOLD","HERO_SPRITE_NAME","ENEMY_SPRITE_NAME","COIN_SPRITE_NAME","HEART_SPRITE_NAME","CRYSTAL_SPRITE_NAME","KEY_SPRITE_NAME","ENEMY","COIN","HEART","CRYSTAL","KEY","DOOR","IDLE_FRAME","RIGHT_DIRECTION","LEFT_DIRECTION","UP_DIRECTION","DOWN_DIRECTION","IGNORED_TILESETS","ENTER_KEY","SPACE_KEY","ESCAPE_KEY","ARROW_LEFT_KEY","ARROW_UP_KEY","ARROW_RIGHT_KEY","ARROW_DOWN_KEY","ADD_LOADED_FONT","ADD_LOADED_ATLAS","ADD_LOADED_IMAGE","ADD_LOADED_MAP","ADD_LOADED_JSON","SET_MAP_KEY","ADD_TILESET","SET_FACING_DIRECTION","SET_INITIAL_POSITION","SET_PREVIOUS_POSITION","SET_INITIAL_FRAME","SET_GAME_WIDTH","SET_GAME_HEIGHT","SET_GAME_ZOOM","SET_GAME_CANVAS","SET_GAME_LOCALE","SET_GAME_CAMERA_SIZE_CALLBACK","SET_DIALOG_MESSAGES","SET_DIALOG_ACTION","SET_DIALOG_CHARACTER_NAME","SET_MENU_ITEMS","SET_MENU_POSITION","ADD_MENU_ITEM","SET_MENU_ON_SELECT","ADD_TEXT","SET_TEXTS","REMOVE_TEXT","UPDATE_TEXT_VARIABLES","isObject","obj","constructor","Object","simulateKeyEvent","code","type","keysMap","event","document","createEvent","initEvent","keyCode","dispatchEvent","getTranslationVariables","item","key","variables","getDispatch","store","dispatch","getState","createInteractiveGameObject","scene","x","y","width","height","origin","customCollider","GameObjects","Rectangle","setOrigin","physics","add","existing","body","setImmovable","isMapFileAvailable","file","console","error","isImageFileAvailable","isTilesetFileAvailable","isGeneratedAtlasFileAvailable","selectGameWidth","state","game","selectGameHeight","selectGameZoom","zoom","selectGameCanvasElement","canvas","selectGameLocale","locale","selectGameCameraSizeUpdateCallback","cameraSizeUpdateCallback","selectMapKey","mapData","mapKey","selectTilesets","tilesets","selectHeroFacingDirection","heroData","facingDirection","selectHeroInitialPosition","initialPosition","selectHeroInitialFrame","initialFrame","setDialogCharacterNameAction","payload","setDialogMessagesAction","setDialogActionAction","getSelectorData","selector","handleCreateCharactersMovements","gridEngine","movementStarted","subscribe","charId","direction","char","sprites","getChildren","find","sprite","name","anims","play","texture","movementStopped","stop","setFrame","replace","directionChanged","handleCreateControls","actionKey","input","keyboard","addKey","Input","Keyboard","KeyCodes","SPACE","cursors","createCursorKeys","wasd","addKeys","W","S","A","D","handleCreateGroups","group","enemies","items","mapLayers","handleCreateMap","map","make","tilemap","forEach","tilesetName","addTilesetImage","layers","layerData","idx","createLayer","handleCreateHero","heroSprite","setName","setDepth","actionCollider","update","time","delta","top","right","bottom","left","getFacingDirection","setX","actionColliderSizeOffset","setY","updateActionCollider","handleObjectsLayer","objects","objectLayerData","layerIndex","object","objectIndex","gid","properties","propertiesObject","fromEntries","curr","value","enemy","addCharacter","id","offsetY","startPosition","Math","floor","enemyActionHeroCollider","overlap","e","a","JustDown","selectDialogMessages","length","active","delayedCall","coin","animationKey","exists","create","frames","Array","from","n","index","frame","toString","padStart","frameRate","repeat","yoyo","heart","image","crystal","position","overlapCollider","world","removeCollider","split","Number","parseInt","posX","posY","Promise","all","setMapKeyAction","setHeroFacingDirectionAction","setHeroInitialPositionAction","setHeroPreviousPositionAction","setHeroInitialFrameAction","then","changeScene","atlases","images","handleConfigureCamera","sys","camera","cameras","main","startFollow","setFollowOffset","setBounds","max","widthInPixels","scale","gameSize","heightInPixels","setPosition","handleCreateHeroAnimations","assetKey","animationName","frameQuantity","createWalkingAnimation","handleConfigureGridEngine","characters","handleHeroMovement","isDown","move","up","down","nextScene","assets","start","calculateGameSize","tileWidth","tileHeight","widthThreshold","heightThreshold","widthScale","window","innerWidth","heightScale","innerHeight","min","newWidth","newHeight","asyncLoader","loaderPlugin","resolve","reject","on","dialog","messages","selectDialogAction","action","selectDialogCharacterName","characterName","defaultState","fonts","maps","jsons","loadedAssetsReducer","gameDataReducer","previousPosition","heroDataReducer","mapDataReducer","dialogReducer","onSelect","menuReducer","texts","textReducer","text","filter","combineReducers","loadedAssets","menu","configureStore","initialState","createStore","rootReducer","applyMiddleware","thunk","selectMenuItems","selectMenuPosition","selectMenuOnSelect","webpackAsyncContext","req","__webpack_require__","o","Error","ids","t","keys","module","exports","slice","Game","isDevelopment","process","NODE_ENV","useDispatch","useState","setGame","dialogMessages","useSelector","menuItems","gameTexts","selectTexts","setMessages","useEffect","default","loadMessages","updateGameReduxState","useCallback","gameWidth","gameHeight","gameZoom","setGameHeightAction","setGameWidthAction","setGameZoomAction","phaserGame","Phaser","AUTO","title","parent","orientation","Scale","LANDSCAPE","localStorageName","autoRound","pixelArt","autoCenter","CENTER_BOTH","mode","NONE","BootScene","LoadAssetsScene","GameScene","MainMenuScene","arcade","debug","plugins","plugin","GridEngine","mapping","backgroundColor","timeOutFunctionId","setGameCanvasElementAction","workAfterResizeIsDone","scaleGame","setZoom","resize","setTimeout","canvasResizeCallback","clearTimeout","addEventListener","removeEventListener","defaultLocale","config","translationKey","isMobile","this","Scene","useStyles","makeStyles","theme","buttonsWrapper","display","justifyContent","padding","marginTop","ceil","userSelect","userDrag","zIndex","button","pointerEvents","aButton","bButton","dPadWrapper","dPadLeft","marginBottom","dPadRight","transform","dPadUp","marginLeft","dPadDown","VirtualGamepad","classes","dPadLeftRef","useRef","dPadRightRef","dPadUpRef","dPadDownRef","aButtonRef","bButtonRef","eventRef","wasAButtonClicked","current","getBoundingClientRect","elX","elY","radius","Geom","Circle","contains","wasBButtonClicked","wasLeftButtonClicked","Polygon","wasUpButtonClicked","wasRightButtonClicked","wasDownButtonClicked","getPressedButton","handleButtonPressed","pressedButton","element","classList","remove","handlePointerDown","handlePointerUp","handleContextMenuCallback","preventDefault","stopPropagation","className","ref","classNames","src","dPadButton","alt","onContextMenu","menuWrapper","fontFamily","fontSize","textTransform","menuPositionWrapper","menuWidth","minWidth","menuItemsWrapper","textAlign","menuItem","cursor","listStyle","border","selectedMenuItem","GameMenu","onSelected","selectedItemIndex","setSelectedItemIndex","handleKeyPressed","onMouseEnter","onClick","values","addLoadedFontAction","addLoadedAtlasAction","addLoadedImageAction","addLoadedMapAction","addLoadedJSONAction","addTilesetAction","selectLoadedFonts","selectLoadedAtlases","selectLoadedImages","selectLoadedMaps","selectLoadedJSONs","initData","loadedFonts","progressBar","graphics","progressBox","barWidth","round","handleBarProgress","clear","fillStyle","fillRect","load","log","destroy","off","newFontsCount","font","includes","color","Display","Color","RGBToString","r","g","b","loadedAtlases","loadedImages","loadedMaps","mapJson","tileset","source","pop","layer","spriteName","jsonPath","imagePath","atlas","property","loadedJSONs","tilesetJson","jsonResult","json","cache","get","tilesetImage","imageExtension","tilemapTiledJSON","imageName","textures","ready","fontFace","setMenuItemsAction","setMenuOnSelectAction","handleStartGameSelected","location","reload","setGameCameraSizeUpdateCallbackAction","dialogMessage","lineHeight","Message","message","trail","onMessageEnded","forceShowFullMessage","useMemo","trim","letter","transitions","useTransition","enter","onRest","status","controller","styles","span","style","dialogWindow","imageRendering","minHeight","maxHeight","dialogTitle","fontWeight","dialogFooter","DialogBox","dialogAction","currentMessage","setCurrentMessage","messageEnded","setMessageEnded","setForceShowFullMessage","handleClick","getRect","useRect","rect","setRect","handleResize","useLayoutEffect","resizeObserver","ResizeObserver","observe","intersectionObserver","IntersectionObserver","disconnect","textWrapper","domRect","textPositionWrapper","size","margin","GameText","component","Component","createTheme","ReactDOM","render","getElementById","webpackContext","webpackContextResolve","m"],"mappings":"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","file":"static/js/main.50e40ef4.chunk.js","sourcesContent":["export const TILE_WIDTH = 16;\r\nexport const TILE_HEIGHT = 16;\r\n\r\nexport const MIN_GAME_WIDTH = 25 * TILE_WIDTH; // 400\r\nexport const MIN_GAME_HEIGHT = 14 * TILE_HEIGHT; // 224\r\n\r\nexport const RESIZE_THRESHOLD = 500;\r\nexport const RE_RESIZE_THRESHOLD = 10;\r\n\r\nexport const HERO_SPRITE_NAME = 'hero';\r\nexport const ENEMY_SPRITE_NAME = 'enemy';\r\nexport const COIN_SPRITE_NAME = 'coin';\r\nexport const HEART_SPRITE_NAME = 'heart';\r\nexport const CRYSTAL_SPRITE_NAME = 'crystal';\r\nexport const KEY_SPRITE_NAME = 'key';\r\n\r\n// Game Objects Tiled IDs\r\nexport const ENEMY = 1;\r\nexport const COIN = 2;\r\nexport const HEART = 3;\r\nexport const CRYSTAL = 4;\r\nexport const KEY = 5;\r\nexport const DOOR = 6;\r\n\r\nexport const IDLE_FRAME = 'walk_position_02';\r\n\r\n// Directions\r\nexport const RIGHT_DIRECTION = 'right';\r\nexport const LEFT_DIRECTION = 'left';\r\nexport const UP_DIRECTION = 'up';\r\nexport const DOWN_DIRECTION = 'down';\r\n\r\nexport const IGNORED_TILESETS = ['objects'];\r\n\r\n// Keys\r\nexport const ENTER_KEY = 'Enter';\r\nexport const SPACE_KEY = 'Space';\r\nexport const ESCAPE_KEY = 'Escape';\r\nexport const ARROW_LEFT_KEY = 'ArrowLeft';\r\nexport const ARROW_UP_KEY = 'ArrowUp';\r\nexport const ARROW_RIGHT_KEY = 'ArrowRight';\r\nexport const ARROW_DOWN_KEY = 'ArrowDown';\r\n","// Assets\r\nexport const ADD_LOADED_FONT = 'ADD_LOADED_FONT';\r\nexport const ADD_LOADED_ATLAS = 'ADD_LOADED_ATLAS';\r\nexport const ADD_LOADED_IMAGE = 'ADD_LOADED_IMAGE';\r\nexport const ADD_LOADED_MAP = 'ADD_LOADED_MAPS';\r\nexport const ADD_LOADED_JSON = 'ADD_LOADED_JSON';\r\n\r\n// Map data\r\nexport const SET_MAP_KEY = 'SET_MAP_KEY';\r\nexport const ADD_TILESET = 'SET_TILESET';\r\n\r\n// Hero data\r\nexport const SET_FACING_DIRECTION = 'SET_FACING_DIRECTION';\r\nexport const SET_INITIAL_POSITION = 'SET_INITIAL_POSITION';\r\nexport const SET_PREVIOUS_POSITION = 'SET_PREVIOUS_POSITION';\r\nexport const SET_INITIAL_FRAME = 'SET_INITIAL_FRAME';\r\n\r\n// Game data\r\nexport const SET_GAME_WIDTH = 'SET_GAME_WIDTH';\r\nexport const SET_GAME_HEIGHT = 'SET_GAME_HEIGHT';\r\nexport const SET_GAME_ZOOM = 'SET_GAME_ZOOM';\r\nexport const SET_GAME_CANVAS = 'SET_GAME_CANVAS';\r\nexport const SET_GAME_LOCALE = 'SET_GAME_LOCALE';\r\nexport const SET_GAME_CAMERA_SIZE_CALLBACK = 'SET_GAME_CAMERA_SIZE_CALLBACK';\r\n\r\n// Dialog\r\nexport const SET_DIALOG_MESSAGES = 'SET_DIALOG_MESSAGES';\r\nexport const SET_DIALOG_ACTION = 'SET_DIALOG_ACTION';\r\nexport const SET_DIALOG_CHARACTER_NAME = 'SET_DIALOG_CHARACTER_NAME';\r\n\r\n// Menu\r\nexport const SET_MENU_ITEMS = 'SET_MENU_ITEMS';\r\nexport const SET_MENU_POSITION = 'SET_MENU_POSITION';\r\nexport const ADD_MENU_ITEM = 'ADD_MENU_ITEM';\r\nexport const SET_MENU_ON_SELECT = 'SET_MENU_ON_SELECT';\r\n\r\n// Game text\r\nexport const ADD_TEXT = 'ADD_TEXT';\r\nexport const SET_TEXTS = 'SET_TEXTS';\r\nexport const REMOVE_TEXT = 'REMOVE_TEXT';\r\nexport const UPDATE_TEXT_VARIABLES = 'UPDATE_TEXT_VARIABLES';\r\n","import { GameObjects } from 'phaser';\r\nimport {\r\n    ENTER_KEY,\r\n    SPACE_KEY,\r\n    TILE_WIDTH,\r\n    TILE_HEIGHT,\r\n    ARROW_UP_KEY,\r\n    ARROW_DOWN_KEY,\r\n    ARROW_LEFT_KEY,\r\n    ARROW_RIGHT_KEY,\r\n} from '../constants';\r\n\r\n// Store\r\nimport store from '../redux/store';\r\n\r\nexport const isObject = (obj) =>\r\n    typeof obj === 'object' && obj?.constructor === Object;\r\n\r\nexport const isObjectEmpty = (obj) =>\r\n    isObject(obj) && Object.keys(obj).length === 0;\r\n\r\nexport const isObjectNotEmpty = (obj) =>\r\n    isObject(obj) && Object.keys(obj).length > 0;\r\n\r\n/**\r\n * source https://gist.github.com/GlauberF/d8278ce3aa592389e6e3d4e758e6a0c2\r\n * Simulate a key event.\r\n * @param {String} code The code of the key to simulate\r\n * @param {String} type (optional) The type of event : down, up or press. The default is down\r\n */\r\nexport const simulateKeyEvent = (code, type = 'down') => {\r\n    const keysMap = {\r\n        [ENTER_KEY]: 13,\r\n        [SPACE_KEY]: 32,\r\n        [ARROW_LEFT_KEY]: 37,\r\n        [ARROW_UP_KEY]: 38,\r\n        [ARROW_RIGHT_KEY]: 39,\r\n        [ARROW_DOWN_KEY]: 40,\r\n    };\r\n\r\n    const event = document.createEvent('HTMLEvents');\r\n    event.initEvent(`key${type}`, true, false);\r\n    event.code = code;\r\n    event.keyCode = keysMap[code];\r\n\r\n    document.dispatchEvent(event);\r\n};\r\n\r\nexport const getTranslationVariables = (item) => {\r\n    if (isObject(item)) {\r\n        return [item.key, item.variables];\r\n    }\r\n\r\n    return [item, {}];\r\n};\r\n\r\nexport const getSelectorData = (selector) => {\r\n    const { getState } = store;\r\n\r\n    return selector(getState());\r\n};\r\n\r\nexport const getDispatch = () => store.dispatch;\r\n\r\nexport const getState = () => store.getState();\r\n\r\nexport const createInteractiveGameObject = (\r\n    scene,\r\n    x,\r\n    y,\r\n    width,\r\n    height,\r\n    origin = { x: 0, y: 0 }\r\n) => {\r\n    const customCollider = new GameObjects.Rectangle(\r\n        scene,\r\n        x,\r\n        y,\r\n        width,\r\n        height\r\n    ).setOrigin(origin.x, origin.y);\r\n\r\n    scene.physics.add.existing(customCollider);\r\n    customCollider.body.setImmovable(true);\r\n\r\n    return customCollider;\r\n};\r\n\r\n// Functions to check if a file exists within Webpack modules\r\n// This might look dumb, but due to the way Webpack works, this is the only way to properly check\r\n// Using a full path as a variable doesn't work because: https://github.com/webpack/webpack/issues/6680#issuecomment-370800037\r\nexport const isMapFileAvailable = (file) => {\r\n    try {\r\n        require.resolveWeak(`../assets/maps/${file}`);\r\n        return true;\r\n    } catch {\r\n        console.error(`Error loading file ${file}`);\r\n        return false;\r\n    }\r\n};\r\n\r\nexport const isImageFileAvailable = (file) => {\r\n    try {\r\n        require.resolveWeak(`../assets/images/${file}`);\r\n        return true;\r\n    } catch {\r\n        console.error(`Error loading file ${file}`);\r\n        return false;\r\n    }\r\n};\r\n\r\nexport const isTilesetFileAvailable = (file) => {\r\n    try {\r\n        require.resolveWeak(`../assets/tilesets/${file}`);\r\n        return true;\r\n    } catch {\r\n        console.error(`Error loading file ${file}`);\r\n        return false;\r\n    }\r\n};\r\n\r\nexport const isGeneratedAtlasFileAvailable = (file) => {\r\n    try {\r\n        require.resolveWeak(`../assets/atlases/generated/${file}`);\r\n        return true;\r\n    } catch {\r\n        console.error(`Error loading file ${file}`);\r\n        return false;\r\n    }\r\n};\r\n\r\nexport const getDegreeFromRadians = (radians) => (radians * (180 / Math.PI));\r\n\r\nexport const getRadiansFromDegree = (degree) => (degree * (Math.PI / 180));\r\n\r\nexport const rotateRectangleInsideTile = (x, y, width, height, degree) => {\r\n    switch (degree) {\r\n        case 90: {\r\n            return [\r\n                TILE_HEIGHT - (y + height),\r\n                x,\r\n                height,\r\n                width,\r\n            ];\r\n        }\r\n\r\n        case 180: {\r\n            return [\r\n                TILE_WIDTH - (x + width),\r\n                TILE_HEIGHT - (y + height),\r\n                width,\r\n                height,\r\n            ];\r\n        }\r\n\r\n        case 270: {\r\n            return [\r\n                y,\r\n                TILE_WIDTH - (x + width),\r\n                height,\r\n                width,\r\n            ];\r\n        }\r\n\r\n        default: {\r\n            return [x, y, width, height];\r\n        }\r\n    }\r\n};\r\n","export const selectGameWidth = (state) => state.game.width;\r\n\r\nexport const selectGameHeight = (state) => state.game.height;\r\n\r\nexport const selectGameZoom = (state) => state.game.zoom;\r\n\r\nexport const selectGameCanvasElement = (state) => state.game.canvas;\r\n\r\nexport const selectGameLocale = (state) => state.game.locale;\r\n\r\nexport const selectGameCameraSizeUpdateCallback = (state) => state.game.cameraSizeUpdateCallback;\r\n","export const selectMapKey = (state) => state.mapData.mapKey;\r\n\r\nexport const selectTilesets = (state) => state.mapData.tilesets;\r\n","export const selectHeroFacingDirection = (state) => state.heroData.facingDirection;\r\n\r\nexport const selectHeroInitialPosition = (state) => state.heroData.initialPosition;\r\n\r\nexport const selectHeroPreviousPosition = (state) => state.heroData.previousPosition;\r\n\r\nexport const selectHeroInitialFrame = (state) => state.heroData.initialFrame;\r\n","import { SET_DIALOG_CHARACTER_NAME } from '../../constants';\r\n\r\nconst setDialogCharacterNameAction = (payload) => (dispatch) => dispatch({\r\n    type: SET_DIALOG_CHARACTER_NAME,\r\n    payload,\r\n});\r\n\r\nexport default setDialogCharacterNameAction;\r\n","import { SET_DIALOG_MESSAGES } from '../../constants';\r\n\r\nconst setDialogMessagesAction = (payload) => (dispatch) => dispatch({\r\n    type: SET_DIALOG_MESSAGES,\r\n    payload,\r\n});\r\n\r\nexport default setDialogMessagesAction;\r\n","import { SET_DIALOG_ACTION } from '../../constants';\r\n\r\nconst setDialogActionAction = (payload) => (dispatch) => dispatch({\r\n    type: SET_DIALOG_ACTION,\r\n    payload,\r\n});\r\n\r\nexport default setDialogActionAction;\r\n","import { Input } from 'phaser';\r\n\r\n// Constants\r\nimport {\r\n    KEY,\r\n    COIN,\r\n    DOOR,\r\n    HEART,\r\n    ENEMY,\r\n    CRYSTAL,\r\n    IDLE_FRAME,\r\n    TILE_WIDTH,\r\n    TILE_HEIGHT,\r\n    UP_DIRECTION,\r\n    LEFT_DIRECTION,\r\n    DOWN_DIRECTION,\r\n    RIGHT_DIRECTION,\r\n    KEY_SPRITE_NAME,\r\n    HERO_SPRITE_NAME,\r\n    COIN_SPRITE_NAME,\r\n    ENEMY_SPRITE_NAME,\r\n    HEART_SPRITE_NAME,\r\n    CRYSTAL_SPRITE_NAME,\r\n} from '../constants';\r\n\r\n// Utils\r\nimport {\r\n    getDispatch,\r\n    createInteractiveGameObject,\r\n} from './utils';\r\n\r\n// Store\r\nimport store from '../redux/store';\r\n\r\n// Selectors\r\nimport { selectMapKey, selectTilesets } from '../redux/selectors/selectMapData';\r\nimport {\r\n    selectHeroInitialFrame,\r\n    selectHeroFacingDirection,\r\n    selectHeroInitialPosition,\r\n} from '../redux/selectors/selectHeroData';\r\nimport { selectDialogMessages } from '../redux/selectors/selectDialog';\r\n\r\n// Actions\r\nimport setDialogCharacterNameAction from '../redux/actions/dialog/setDialogCharacterNameAction';\r\nimport setDialogMessagesAction from '../redux/actions/dialog/setDialogMessagesAction';\r\nimport setDialogActionAction from '../redux/actions/dialog/setDialogActionAction';\r\nimport setHeroFacingDirectionAction from '../redux/actions/heroData/setHeroFacingDirectionAction';\r\nimport setMapKeyAction from '../redux/actions/mapData/setMapKeyAction';\r\nimport setHeroInitialPositionAction from '../redux/actions/heroData/setHeroInitialPositionAction';\r\nimport setHeroPreviousPositionAction from '../redux/actions/heroData/setHeroPreviousPositionAction';\r\nimport setHeroInitialFrameAction from '../redux/actions/heroData/setHeroInitialFrameAction';\r\n\r\nexport const getSelectorData = (selector) => {\r\n    const { getState } = store;\r\n\r\n    return selector(getState());\r\n};\r\n\r\n/**\r\n * @param scene\r\n * @param assetKey\r\n * @param animationName\r\n * @param frameQuantity\r\n */\r\n// eslint-disable-next-line import/prefer-default-export\r\nexport const createWalkingAnimation = (\r\n    scene,\r\n    assetKey,\r\n    animationName,\r\n    frameQuantity\r\n) => {\r\n    scene.anims.create({\r\n        key: `${assetKey}_${animationName}`,\r\n        frames: Array.from({ length: frameQuantity }).map((n, index) => ({\r\n            key: assetKey,\r\n            frame: `${animationName}_${(index + 1).toString().padStart(2, '0')}`,\r\n        })),\r\n        frameRate: 4,\r\n        repeat: -1,\r\n        yoyo: true,\r\n    });\r\n};\r\n\r\nexport const handleCreateCharactersMovements = (scene) => {\r\n    // Movement started\r\n    scene.gridEngine.movementStarted().subscribe(({ charId, direction }) => {\r\n        const char = scene.sprites.getChildren().find((sprite) => sprite.name === charId);\r\n\r\n        if (char) {\r\n            char.anims.play(`${char.texture.key}_walk_${direction}`);\r\n        }\r\n    });\r\n\r\n    // Movement ended\r\n    scene.gridEngine.movementStopped().subscribe(({ charId, direction }) => {\r\n        const char = scene.sprites.getChildren().find((sprite) => sprite.name === charId);\r\n\r\n        if (char) {\r\n            char.anims.stop();\r\n            char.setFrame(IDLE_FRAME.replace('position', direction));\r\n        }\r\n    });\r\n\r\n    // Direction changed\r\n    scene.gridEngine.directionChanged().subscribe(({ charId, direction }) => {\r\n        const char = scene.sprites.getChildren().find((sprite) => sprite.name === charId);\r\n\r\n        if (char) {\r\n            char.setFrame(IDLE_FRAME.replace('position', direction));\r\n        }\r\n    });\r\n};\r\n\r\nexport const handleCreateControls = (scene) => {\r\n    // Controls\r\n    // eslint-disable-next-line no-param-reassign\r\n    scene.actionKey = scene.input.keyboard.addKey(Input.Keyboard.KeyCodes.SPACE);\r\n    // eslint-disable-next-line no-param-reassign\r\n    scene.cursors = scene.input.keyboard.createCursorKeys();\r\n    // eslint-disable-next-line no-param-reassign\r\n    scene.wasd = scene.input.keyboard.addKeys({\r\n        [UP_DIRECTION]: Input.Keyboard.KeyCodes.W,\r\n        [DOWN_DIRECTION]: Input.Keyboard.KeyCodes.S,\r\n        [LEFT_DIRECTION]: Input.Keyboard.KeyCodes.A,\r\n        [RIGHT_DIRECTION]: Input.Keyboard.KeyCodes.D,\r\n    });\r\n};\r\n\r\nexport const handleCreateGroups = (scene) => {\r\n    // Game groups\r\n    // eslint-disable-next-line no-param-reassign\r\n    scene.sprites = scene.add.group();\r\n    // eslint-disable-next-line no-param-reassign\r\n    scene.enemies = scene.add.group();\r\n    // eslint-disable-next-line no-param-reassign\r\n    scene.items = scene.add.group();\r\n    // eslint-disable-next-line no-param-reassign\r\n    scene.mapLayers = scene.add.group();\r\n};\r\n\r\n/**\r\n * @param scene\r\n * @returns Phaser.GameObjects.Group\r\n */\r\nexport const handleCreateMap = (scene) => {\r\n    const mapKey = getSelectorData(selectMapKey);\r\n    const tilesets = getSelectorData(selectTilesets);\r\n    const customColliders = scene.add.group();\r\n\r\n    // Create the map\r\n    const map = scene.make.tilemap({ key: mapKey });\r\n    tilesets.forEach((tilesetName) => {\r\n        map.addTilesetImage(tilesetName, tilesetName);\r\n    });\r\n\r\n    map.layers.forEach((layerData, idx) => {\r\n        const layer = map.createLayer(layerData.name, tilesets, 0, 0);\r\n    });\r\n\r\n    // eslint-disable-next-line no-param-reassign\r\n    scene.map = map;\r\n};\r\n\r\nexport const handleCreateHero = (scene) => {\r\n    const initialFrame = getSelectorData(selectHeroInitialFrame);\r\n\r\n    // Create hero sprite\r\n    const heroSprite = scene.physics.add\r\n        .sprite(0, 0, HERO_SPRITE_NAME, initialFrame)\r\n        .setName(HERO_SPRITE_NAME)\r\n        .setOrigin(0, 0)\r\n        .setDepth(1);\r\n\r\n    const actionColliderSizeOffset = 2;\r\n    // eslint-disable-next-line no-param-reassign\r\n    heroSprite.actionCollider = createInteractiveGameObject(\r\n        scene,\r\n        0,\r\n        0,\r\n        TILE_WIDTH - actionColliderSizeOffset,\r\n        TILE_HEIGHT - actionColliderSizeOffset\r\n    );\r\n\r\n    const updateActionCollider = (\r\n        { top, right, bottom, left } = heroSprite.body\r\n    ) => {\r\n        const facingDirection = scene.gridEngine.getFacingDirection(HERO_SPRITE_NAME);\r\n\r\n        switch (facingDirection) {\r\n            case DOWN_DIRECTION: {\r\n                heroSprite.actionCollider.setX(left + (actionColliderSizeOffset / 2));\r\n                heroSprite.actionCollider.setY(bottom);\r\n\r\n                break;\r\n            }\r\n\r\n            case UP_DIRECTION: {\r\n                heroSprite.actionCollider.setX(left + (actionColliderSizeOffset / 2));\r\n                heroSprite.actionCollider.setY(top - heroSprite.body.height + actionColliderSizeOffset);\r\n\r\n                break;\r\n            }\r\n\r\n            case LEFT_DIRECTION: {\r\n                heroSprite.actionCollider.setX(left - heroSprite.body.width + actionColliderSizeOffset);\r\n                heroSprite.actionCollider.setY(top + (actionColliderSizeOffset / 2));\r\n\r\n                break;\r\n            }\r\n\r\n            case RIGHT_DIRECTION: {\r\n                heroSprite.actionCollider.setX(right);\r\n                heroSprite.actionCollider.setY(top + (actionColliderSizeOffset / 2));\r\n\r\n                break;\r\n            }\r\n\r\n            default: {\r\n                break;\r\n            }\r\n        }\r\n    };\r\n\r\n    heroSprite.update = (time, delta) => {\r\n        updateActionCollider();\r\n    };\r\n\r\n    // eslint-disable-next-line no-param-reassign\r\n    scene.heroSprite = heroSprite;\r\n    scene.sprites.add(heroSprite);\r\n};\r\n\r\nexport const handleObjectsLayer = (scene) => {\r\n    // Load game objects like items, enemies, etc\r\n    const dispatch = getDispatch();\r\n    scene.map.objects.forEach((objectLayerData, layerIndex) => {\r\n        objectLayerData?.objects?.forEach((object, objectIndex) => {\r\n            const { gid, properties, x, y } = object;\r\n            const propertiesObject = Object.fromEntries(\r\n                properties?.map((curr) => [curr.name, curr.value]) || []\r\n            );\r\n\r\n            switch (gid) {\r\n                case ENEMY: {\r\n                    const name = `${ENEMY_SPRITE_NAME}_${layerIndex}${objectIndex}`;\r\n                    const enemy = scene.physics.add\r\n                        .sprite(x, y, ENEMY_SPRITE_NAME, IDLE_FRAME.replace('position', DOWN_DIRECTION))\r\n                        .setName(name)\r\n                        .setOrigin(0, 1)\r\n                        .setDepth(1);\r\n\r\n                    scene.sprites.add(enemy);\r\n                    scene.enemies.add(enemy);\r\n                    scene.gridEngine.addCharacter({\r\n                        id: name,\r\n                        offsetY: 0, // default\r\n                        sprite: enemy,\r\n                        startPosition: {\r\n                            x: Math.floor(x / TILE_WIDTH),\r\n                            y: Math.floor(y / TILE_HEIGHT) - 1,\r\n                        },\r\n                    });\r\n\r\n                    const enemyActionHeroCollider = scene.physics.add.overlap(\r\n                        enemy,\r\n                        scene.heroSprite.actionCollider,\r\n                        (e, a) => {\r\n                            if (Input.Keyboard.JustDown(scene.actionKey)) {\r\n                                const messages = getSelectorData(selectDialogMessages);\r\n\r\n                                if (messages.length === 0) {\r\n                                    enemyActionHeroCollider.active = false;\r\n                                    dispatch(setDialogCharacterNameAction('monster'));\r\n                                    dispatch(setDialogMessagesAction([\r\n                                        'Lorem ipsum dolor sit amet, consectetur adipiscing elit.',\r\n                                        'Praesent id neque sodales, feugiat tortor non, fringilla ex.',\r\n                                        'Neque porro quisquam est qui dolorem ipsum quia dolor sit amet, consectetur',\r\n                                    ]));\r\n                                    dispatch(setDialogActionAction(() => {\r\n                                        // Do this to not trigger the message again\r\n                                        // Because whenever you call JustDown once, the second time\r\n                                        // you call it, it will be false\r\n                                        Input.Keyboard.JustDown(scene.actionKey);\r\n                                        dispatch(setDialogCharacterNameAction(''));\r\n                                        dispatch(setDialogMessagesAction([]));\r\n                                        dispatch(setDialogActionAction(null));\r\n                                    }));\r\n\r\n                                    scene.time.delayedCall(0, () => {\r\n                                        enemyActionHeroCollider.active = true;\r\n                                    });\r\n                                }\r\n                            }\r\n                        }\r\n                    );\r\n\r\n                    break;\r\n                }\r\n\r\n                case COIN: {\r\n                    const name = `${COIN_SPRITE_NAME}_${layerIndex}${objectIndex}`;\r\n                    const coin = scene.physics.add\r\n                        .sprite(x, y, COIN_SPRITE_NAME, 'coin_idle_01')\r\n                        .setOrigin(0, 1)\r\n                        .setName(name)\r\n                        .setDepth(1);\r\n\r\n                    const animationKey = `${COIN_SPRITE_NAME}_idle`;\r\n                    if (!scene.anims.exists(animationKey)) {\r\n                        scene.anims.create({\r\n                            key: animationKey,\r\n                            frames: Array.from({ length: 2 }).map((n, index) => ({\r\n                                key: COIN_SPRITE_NAME,\r\n                                frame: `${COIN_SPRITE_NAME}_idle_${(index + 1).toString().padStart(2, '0')}`,\r\n                            })),\r\n                            frameRate: 3,\r\n                            repeat: -1,\r\n                            yoyo: false,\r\n                        });\r\n                    }\r\n\r\n                    coin.anims.play(animationKey);\r\n                    scene.items.add(coin);\r\n\r\n                    break;\r\n                }\r\n\r\n                case HEART: {\r\n                    const name = `${HEART_SPRITE_NAME}_${layerIndex}${objectIndex}`;\r\n                    const heart = scene.physics.add\r\n                        .image(x, y, HEART_SPRITE_NAME)\r\n                        .setOrigin(0, 1)\r\n                        .setName(name)\r\n                        .setDepth(1);\r\n\r\n                    scene.items.add(heart);\r\n\r\n                    break;\r\n                }\r\n\r\n                case CRYSTAL: {\r\n                    const name = `${CRYSTAL_SPRITE_NAME}_${layerIndex}${objectIndex}`;\r\n                    const crystal = scene.physics.add\r\n                        .image(x, y, CRYSTAL_SPRITE_NAME)\r\n                        .setOrigin(0, 1)\r\n                        .setName(name)\r\n                        .setDepth(1);\r\n\r\n                    scene.items.add(crystal);\r\n\r\n                    break;\r\n                }\r\n\r\n                case KEY: {\r\n                    const name = `${KEY_SPRITE_NAME}_${layerIndex}${objectIndex}`;\r\n                    const key = scene.physics.add\r\n                        .image(x, y, KEY_SPRITE_NAME)\r\n                        .setOrigin(0, 1)\r\n                        .setName(name)\r\n                        .setDepth(1);\r\n\r\n                    scene.items.add(key);\r\n\r\n                    break;\r\n                }\r\n\r\n                case DOOR: {\r\n                    const { type, map, position } = propertiesObject;\r\n                    const customCollider = createInteractiveGameObject(\r\n                        scene,\r\n                        x,\r\n                        y,\r\n                        TILE_WIDTH,\r\n                        TILE_HEIGHT,\r\n                        { x: 0, y: 1 }\r\n                    );\r\n\r\n                    const overlapCollider = scene.physics.add.overlap(scene.heroSprite, customCollider, () => {\r\n                        scene.physics.world.removeCollider(overlapCollider);\r\n                        const [posX, posY] = position.split(';').map((n) => Number.parseInt(n, 10));\r\n                        const facingDirection = scene.gridEngine.getFacingDirection(HERO_SPRITE_NAME);\r\n\r\n                        Promise.all([\r\n                            dispatch(setMapKeyAction(map)),\r\n                            dispatch(setHeroFacingDirectionAction(facingDirection)),\r\n                            dispatch(setHeroInitialPositionAction({ x: posX, y: posY })),\r\n                            dispatch(setHeroPreviousPositionAction({ x: posX, y: posY })),\r\n                            dispatch(setHeroInitialFrameAction(\r\n                                IDLE_FRAME.replace('position', facingDirection)\r\n                            )),\r\n                        ]).then(() => {\r\n                            // scene.scene.restart();\r\n                            changeScene(scene, 'GameScene', {\r\n                                atlases: ['hero'],\r\n                                images: [],\r\n                                mapKey: map,\r\n                            });\r\n                        });\r\n                    });\r\n\r\n                    break;\r\n                }\r\n\r\n                default: {\r\n                    break;\r\n                }\r\n            }\r\n        });\r\n    });\r\n};\r\n\r\nexport const handleConfigureCamera = (scene) => {\r\n    const { game } = scene.sys;\r\n    const camera = scene.cameras.main;\r\n    // console.log(JSON.stringify(game.scale.gameSize));\r\n\r\n    // Configure the main camera\r\n    camera.startFollow(scene.heroSprite, true);\r\n    camera.setFollowOffset(-scene.heroSprite.width, -scene.heroSprite.height);\r\n    camera.setBounds(\r\n        0,\r\n        0,\r\n        Math.max(scene.map.widthInPixels, game.scale.gameSize.width),\r\n        Math.max(scene.map.heightInPixels, game.scale.gameSize.height)\r\n    );\r\n\r\n    if (scene.map.widthInPixels < game.scale.gameSize.width) {\r\n        camera.setPosition(\r\n            (game.scale.gameSize.width - scene.map.widthInPixels) / 2\r\n        );\r\n    }\r\n\r\n    if (scene.map.heightInPixels < game.scale.gameSize.height) {\r\n        camera.setPosition(\r\n            camera.x,\r\n            (game.scale.gameSize.height - scene.map.heightInPixels) / 2\r\n        );\r\n    }\r\n};\r\n\r\nexport const handleCreateHeroAnimations = (scene) => {\r\n    // Animations\r\n    [UP_DIRECTION, DOWN_DIRECTION, LEFT_DIRECTION, RIGHT_DIRECTION].forEach((direction) => {\r\n        createWalkingAnimation(\r\n            scene,\r\n            HERO_SPRITE_NAME,\r\n            `walk_${direction}`,\r\n            3\r\n        );\r\n    });\r\n};\r\n\r\nexport const handleConfigureGridEngine = (scene) => {\r\n    const initialPosition = getSelectorData(selectHeroInitialPosition);\r\n    const facingDirection = getSelectorData(selectHeroFacingDirection);\r\n\r\n    // Grid Engine\r\n    scene.gridEngine.create(scene.map, {\r\n        // characterCollisionStrategy: 'BLOCK_TWO_TILES', // default\r\n        // collisionTilePropertyName: 'ge_collide', // default\r\n        // numberOfDirections: 4, // default\r\n        characters: [{\r\n            id: HERO_SPRITE_NAME,\r\n            // offsetY: 0, // default\r\n            sprite: scene.heroSprite,\r\n            startPosition: initialPosition,\r\n            facingDirection,\r\n        }],\r\n    });\r\n};\r\n\r\nexport const handleHeroMovement = (scene) => {\r\n    if (scene.cursors.left.isDown || scene.wasd[LEFT_DIRECTION].isDown) {\r\n        scene.gridEngine.move(HERO_SPRITE_NAME, LEFT_DIRECTION);\r\n    } else if (scene.cursors.right.isDown || scene.wasd[RIGHT_DIRECTION].isDown) {\r\n        scene.gridEngine.move(HERO_SPRITE_NAME, RIGHT_DIRECTION);\r\n    } else if (scene.cursors.up.isDown || scene.wasd[UP_DIRECTION].isDown) {\r\n        scene.gridEngine.move(HERO_SPRITE_NAME, UP_DIRECTION);\r\n    } else if (scene.cursors.down.isDown || scene.wasd[DOWN_DIRECTION].isDown) {\r\n        scene.gridEngine.move(HERO_SPRITE_NAME, DOWN_DIRECTION);\r\n    }\r\n};\r\n\r\nexport const changeScene = (scene, nextScene, assets = {}, config = {}) => {\r\n    // const sceneKey = scene.scene.key;\r\n    // scene.scene.restart(sceneKey);\r\n    // scene.scene.stop(sceneKey);\r\n\r\n    scene.scene.start('LoadAssetsScene', {\r\n        nextScene,\r\n        assets,\r\n    });\r\n};\r\n","export const calculateGameSize = (\r\n    width,\r\n    height,\r\n    tileWidth,\r\n    tileHeight,\r\n    widthThreshold = 0.5,\r\n    heightThreshold = 0.5\r\n) => {\r\n    const widthScale = Math.floor(window.innerWidth / width);\r\n    const heightScale = Math.floor(window.innerHeight / height);\r\n    const zoom = Math.min(widthScale, heightScale) || 1;\r\n\r\n    const newWidth = Math.floor(window.innerWidth / tileWidth) * tileWidth / zoom;\r\n    const newHeight = Math.floor(window.innerHeight / tileHeight) * tileHeight / zoom;\r\n\r\n    return {\r\n        zoom,\r\n        width: Math.min(newWidth, Math.floor((width * (1 + widthThreshold)) / tileWidth) * tileWidth),\r\n        height: Math.min(newHeight, Math.floor((height * (1 + heightThreshold)) / tileHeight) * tileHeight),\r\n    };\r\n};\r\n\r\n// Thanks yannick @ https://phaser.discourse.group/t/loading-audio/1306/4\r\nexport const asyncLoader = (loaderPlugin) => new Promise((resolve, reject) => {\r\n    loaderPlugin.on('filecomplete', resolve).on('loaderror', reject);\r\n    loaderPlugin.start();\r\n});\r\n","export const selectDialogMessages = (state) => state.dialog.messages;\r\n\r\nexport const selectDialogAction = (state) => state.dialog.action;\r\n\r\nexport const selectDialogCharacterName = (state) => state.dialog.characterName;\r\n","import {\r\n    ADD_LOADED_MAP,\r\n    ADD_LOADED_FONT,\r\n    ADD_LOADED_JSON,\r\n    ADD_LOADED_ATLAS,\r\n    ADD_LOADED_IMAGE,\r\n} from '../constants';\r\n\r\nconst defaultState = {\r\n    fonts: [],\r\n    atlases: [],\r\n    images: [],\r\n    maps: [],\r\n    jsons: [],\r\n};\r\n\r\nconst loadedAssetsReducer = (state = defaultState, action) => {\r\n    switch (action.type) {\r\n        case ADD_LOADED_FONT: {\r\n            return {\r\n                ...state,\r\n                fonts: [\r\n                    ...state.fonts,\r\n                    action.payload,\r\n                ],\r\n            };\r\n        }\r\n\r\n        case ADD_LOADED_ATLAS: {\r\n            return {\r\n                ...state,\r\n                atlases: [\r\n                    ...state.atlases,\r\n                    action.payload,\r\n                ],\r\n            };\r\n        }\r\n\r\n        case ADD_LOADED_IMAGE: {\r\n            return {\r\n                ...state,\r\n                images: [\r\n                    ...state.images,\r\n                    action.payload,\r\n                ],\r\n            };\r\n        }\r\n\r\n        case ADD_LOADED_MAP: {\r\n            return {\r\n                ...state,\r\n                maps: [\r\n                    ...state.maps,\r\n                    action.payload,\r\n                ],\r\n            };\r\n        }\r\n\r\n        case ADD_LOADED_JSON: {\r\n            return {\r\n                ...state,\r\n                jsons: [\r\n                    ...state.jsons,\r\n                    action.payload,\r\n                ],\r\n            };\r\n        }\r\n\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default loadedAssetsReducer;\r\n","import { MIN_GAME_HEIGHT, MIN_GAME_WIDTH } from '../../constants';\r\nimport {\r\n    SET_GAME_ZOOM,\r\n    SET_GAME_WIDTH,\r\n    SET_GAME_HEIGHT,\r\n    SET_GAME_CANVAS,\r\n    SET_GAME_LOCALE,\r\n    SET_GAME_CAMERA_SIZE_CALLBACK,\r\n} from '../constants';\r\n\r\nconst defaultState = {\r\n    width: MIN_GAME_WIDTH,\r\n    height: MIN_GAME_HEIGHT,\r\n    zoom: 1,\r\n    locale: 'en',\r\n};\r\n\r\nconst gameDataReducer = (state = defaultState, action) => {\r\n    switch (action.type) {\r\n        case SET_GAME_WIDTH: {\r\n            return {\r\n                ...state,\r\n                width: action.payload,\r\n            };\r\n        }\r\n\r\n        case SET_GAME_HEIGHT: {\r\n            return {\r\n                ...state,\r\n                height: action.payload,\r\n            };\r\n        }\r\n\r\n        case SET_GAME_ZOOM: {\r\n            return {\r\n                ...state,\r\n                zoom: action.payload,\r\n            };\r\n        }\r\n\r\n        case SET_GAME_CANVAS: {\r\n            return {\r\n                ...state,\r\n                canvas: action.payload,\r\n            };\r\n        }\r\n\r\n        case SET_GAME_CAMERA_SIZE_CALLBACK: {\r\n            return {\r\n                ...state,\r\n                cameraSizeUpdateCallback: action.payload,\r\n            };\r\n        }\r\n\r\n        case SET_GAME_LOCALE: {\r\n            return {\r\n                ...state,\r\n                locale: action.payload,\r\n            };\r\n        }\r\n\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default gameDataReducer;\r\n","import {\r\n    SET_INITIAL_FRAME,\r\n    SET_INITIAL_POSITION,\r\n    SET_FACING_DIRECTION,\r\n    SET_PREVIOUS_POSITION,\r\n} from '../constants';\r\n\r\nconst defaultState = {\r\n    facingDirection: '',\r\n    initialPosition: {},\r\n    previousPosition: {},\r\n    initialFrame: '',\r\n};\r\n\r\nconst heroDataReducer = (state = defaultState, action) => {\r\n    switch (action.type) {\r\n        case SET_FACING_DIRECTION: {\r\n            return {\r\n                ...state,\r\n                facingDirection: action.payload,\r\n            };\r\n        }\r\n\r\n        case SET_INITIAL_POSITION: {\r\n            return {\r\n                ...state,\r\n                initialPosition: action.payload,\r\n            };\r\n        }\r\n\r\n        case SET_PREVIOUS_POSITION: {\r\n            return {\r\n                ...state,\r\n                previousPosition: action.payload,\r\n            };\r\n        }\r\n\r\n        case SET_INITIAL_FRAME: {\r\n            return {\r\n                ...state,\r\n                initialFrame: action.payload,\r\n            };\r\n        }\r\n\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default heroDataReducer;\r\n","import {\r\n    ADD_TILESET,\r\n    SET_MAP_KEY,\r\n} from '../constants';\r\n\r\nconst defaultState = {\r\n    mapKey: '',\r\n    tilesets: [],\r\n};\r\n\r\nconst mapDataReducer = (state = defaultState, action) => {\r\n    switch (action.type) {\r\n        case SET_MAP_KEY: {\r\n            return {\r\n                ...state,\r\n                mapKey: action.payload,\r\n            };\r\n        }\r\n\r\n        case ADD_TILESET: {\r\n            return {\r\n                ...state,\r\n                tilesets: [\r\n                    ...state.tilesets,\r\n                    action.payload,\r\n                ],\r\n            };\r\n        }\r\n\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default mapDataReducer;\r\n","import {\r\n    SET_DIALOG_ACTION,\r\n    SET_DIALOG_MESSAGES,\r\n    SET_DIALOG_CHARACTER_NAME,\r\n} from '../constants';\r\n\r\nconst defaultState = {\r\n    messages: [],\r\n    action: null,\r\n    characterName: '',\r\n};\r\n\r\nconst dialogReducer = (state = defaultState, action) => {\r\n    switch (action.type) {\r\n        case SET_DIALOG_MESSAGES: {\r\n            return {\r\n                ...state,\r\n                messages: action.payload,\r\n            };\r\n        }\r\n\r\n        case SET_DIALOG_ACTION: {\r\n            return {\r\n                ...state,\r\n                action: action.payload,\r\n            };\r\n        }\r\n\r\n        case SET_DIALOG_CHARACTER_NAME: {\r\n            return {\r\n                ...state,\r\n                characterName: action.payload,\r\n            };\r\n        }\r\n\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default dialogReducer;\r\n","import {\r\n    ADD_MENU_ITEM,\r\n    SET_MENU_ITEMS,\r\n    SET_MENU_POSITION,\r\n    SET_MENU_ON_SELECT,\r\n} from '../constants';\r\n\r\nconst defaultState = {\r\n    items: [],\r\n    position: 'center',\r\n    onSelect: null,\r\n};\r\n\r\nconst menuReducer = (state = defaultState, action) => {\r\n    switch (action.type) {\r\n        case SET_MENU_ITEMS: {\r\n            return {\r\n                ...state,\r\n                items: action.payload,\r\n            };\r\n        }\r\n\r\n        case SET_MENU_ON_SELECT: {\r\n            return {\r\n                ...state,\r\n                onSelect: action.payload,\r\n            };\r\n        }\r\n\r\n        case SET_MENU_POSITION: {\r\n            return {\r\n                ...state,\r\n                position: action.payload,\r\n            };\r\n        }\r\n\r\n        case ADD_MENU_ITEM: {\r\n            return {\r\n                ...state,\r\n                items: [\r\n                    ...state.items,\r\n                    action.payload,\r\n                ],\r\n            };\r\n        }\r\n\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default menuReducer;\r\n","import {\r\n    ADD_TEXT,\r\n    SET_TEXTS,\r\n    REMOVE_TEXT,\r\n    UPDATE_TEXT_VARIABLES,\r\n} from '../constants';\r\n\r\n// example = {\r\n//     key: 'go',\r\n//     config: {\r\n//         position: 'center',\r\n//         color: '#FFFFFF',\r\n//         top: 0,\r\n//     },\r\n//     variables: {},\r\n// }\r\n\r\nconst defaultState = {\r\n    texts: [],\r\n};\r\n\r\nconst textReducer = (state = defaultState, action) => {\r\n    switch (action.type) {\r\n        case SET_TEXTS: {\r\n            return {\r\n                ...state,\r\n                texts: action.payload,\r\n            };\r\n        }\r\n\r\n        case ADD_TEXT: {\r\n            return {\r\n                ...state,\r\n                texts: [\r\n                    ...state.texts,\r\n                    action.payload,\r\n                ],\r\n            };\r\n        }\r\n\r\n        case UPDATE_TEXT_VARIABLES: {\r\n            const {\r\n                key,\r\n                variables,\r\n            } = action.payload;\r\n\r\n            return {\r\n                ...state,\r\n                texts: [\r\n                    ...state.texts.map((text) => {\r\n                        if (text.key === key) {\r\n                            return {\r\n                                ...text,\r\n                                variables,\r\n                            };\r\n                        }\r\n\r\n                        return text;\r\n                    }),\r\n                ],\r\n            };\r\n        }\r\n\r\n        case REMOVE_TEXT: {\r\n            return {\r\n                ...state,\r\n                texts: [\r\n                    ...state.texts.filter(\r\n                        (text) => text.key !== action.payload\r\n                    ),\r\n                ],\r\n            };\r\n        }\r\n\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default textReducer;\r\n","import { combineReducers } from 'redux';\r\n\r\n// Reducers\r\nimport loadedAssetsReducer from './loadedAssetsReducer';\r\nimport gameDataReducer from './gameDataReducer';\r\nimport heroDataReducer from './heroDataReducer';\r\nimport mapDataReducer from './mapDataReducer';\r\nimport dialogReducer from './dialogReducer';\r\nimport menuReducer from './menuReducer';\r\nimport textReducer from './textReducer';\r\n\r\nexport default combineReducers({\r\n    loadedAssets: loadedAssetsReducer,\r\n    heroData: heroDataReducer,\r\n    mapData: mapDataReducer,\r\n    game: gameDataReducer,\r\n    dialog: dialogReducer,\r\n    menu: menuReducer,\r\n    text: textReducer,\r\n});\r\n","import { createStore, applyMiddleware } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport rootReducer from './reducers';\r\n\r\nfunction configureStore(initialState = {}) {\r\n    return createStore(\r\n        rootReducer,\r\n        initialState,\r\n        applyMiddleware(thunk)\r\n    );\r\n}\r\n\r\nexport default configureStore();\r\n","export default __webpack_public_path__ + \"e626617811caba9b333c770981ec9384.png\";","export const selectMenuItems = (state) => state.menu.items;\r\n\r\nexport const selectMenuPosition = (state) => state.menu.position;\r\n\r\nexport const selectMenuOnSelect = (state) => state.menu.onSelect;\r\n","import { SET_FACING_DIRECTION } from '../../constants';\r\n\r\nconst setHeroFacingDirectionAction = (payload) => (dispatch) => dispatch({\r\n    type: SET_FACING_DIRECTION,\r\n    payload,\r\n});\r\n\r\nexport default setHeroFacingDirectionAction;\r\n","import { SET_MAP_KEY } from '../../constants';\r\n\r\nconst setMapKeyAction = (payload) => (dispatch) => dispatch({\r\n    type: SET_MAP_KEY,\r\n    payload,\r\n});\r\n\r\nexport default setMapKeyAction;\r\n","import { SET_INITIAL_POSITION } from '../../constants';\r\n\r\nconst setHeroInitialPositionAction = (payload) => (dispatch) => dispatch({\r\n    type: SET_INITIAL_POSITION,\r\n    payload,\r\n});\r\n\r\nexport default setHeroInitialPositionAction;\r\n","import { SET_PREVIOUS_POSITION } from '../../constants';\r\n\r\nconst setHeroPreviousPositionAction = (payload) => (dispatch) => dispatch({\r\n    type: SET_PREVIOUS_POSITION,\r\n    payload,\r\n});\r\n\r\nexport default setHeroPreviousPositionAction;\r\n","import { SET_INITIAL_FRAME } from '../../constants';\r\n\r\nconst setHeroInitialFrameAction = (payload) => (dispatch) => dispatch({\r\n    type: SET_INITIAL_FRAME,\r\n    payload,\r\n});\r\n\r\nexport default setHeroInitialFrameAction;\r\n","var map = {\n\t\"./coin.json\": [\n\t\t74,\n\t\t30\n\t],\n\t\"./enemy.json\": [\n\t\t75,\n\t\t31\n\t],\n\t\"./hero.json\": [\n\t\t76,\n\t\t32\n\t],\n\t\"./npc_01.json\": [\n\t\t77,\n\t\t33\n\t],\n\t\"./npc_02.json\": [\n\t\t78,\n\t\t34\n\t],\n\t\"./npc_03.json\": [\n\t\t79,\n\t\t35\n\t],\n\t\"./npc_04.json\": [\n\t\t80,\n\t\t36\n\t],\n\t\"./npc_05.json\": [\n\t\t81,\n\t\t37\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 3);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 64;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./a_button.png\": [\n\t\t66\n\t],\n\t\"./b_button.png\": [\n\t\t67\n\t],\n\t\"./crystal.png\": [\n\t\t169,\n\t\t23\n\t],\n\t\"./d_pad_button.png\": [\n\t\t43\n\t],\n\t\"./heart_empty.png\": [\n\t\t170,\n\t\t24\n\t],\n\t\"./heart_full.png\": [\n\t\t168,\n\t\t19\n\t],\n\t\"./heart_half.png\": [\n\t\t171,\n\t\t25\n\t],\n\t\"./key.png\": [\n\t\t172,\n\t\t26\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 65;\nmodule.exports = webpackAsyncContext;","export default __webpack_public_path__ + \"28fbe1ed0ea4f2d7067dcb3799703b9b.png\";","export default __webpack_public_path__ + \"1d70a5d8a5b03ee62ec095c92a9100f3.png\";","var map = {\n\t\"./coin.png\": [\n\t\t113,\n\t\t4\n\t],\n\t\"./enemy.png\": [\n\t\t114,\n\t\t6\n\t],\n\t\"./hero.png\": [\n\t\t115,\n\t\t8\n\t],\n\t\"./npc_01.png\": [\n\t\t116,\n\t\t10\n\t],\n\t\"./npc_02.png\": [\n\t\t117,\n\t\t12\n\t],\n\t\"./npc_03.png\": [\n\t\t118,\n\t\t14\n\t],\n\t\"./npc_04.png\": [\n\t\t119,\n\t\t16\n\t],\n\t\"./npc_05.png\": [\n\t\t120,\n\t\t18\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 84;\nmodule.exports = webpackAsyncContext;","import Phaser from 'phaser';\r\nimport GridEngine from 'grid-engine';\r\nimport { useCallback, useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { IntlProvider } from 'react-intl';\r\nimport isMobile from 'is-mobile';\r\n\r\n// Utils\r\nimport { calculateGameSize } from './utils/phaser';\r\n\r\n// Constants\r\nimport {\r\n    TILE_WIDTH,\r\n    TILE_HEIGHT,\r\n    MIN_GAME_WIDTH,\r\n    MIN_GAME_HEIGHT,\r\n    RESIZE_THRESHOLD,\r\n    RE_RESIZE_THRESHOLD,\r\n} from './constants';\r\n\r\n// Game Scenes\r\nimport GameScene from './game/scenes/GameScene';\r\nimport BootScene from './game/scenes/BootScene';\r\nimport LoadAssetsScene from './game/scenes/LoadAssetsScene';\r\nimport MainMenuScene from './game/scenes/MainMenuScene';\r\n\r\n// Actions\r\nimport setGameHeightAction from './redux/actions/game/setGameHeightAction';\r\nimport setGameWidthAction from './redux/actions/game/setGameWidthAction';\r\nimport setGameZoomAction from './redux/actions/game/setGameZoomAction';\r\nimport setGameCanvasElementAction from './redux/actions/game/setGameCanvasElementAction';\r\n\r\n// Components\r\nimport DialogBox from './components/DialogBox';\r\nimport VirtualGamepad from './components/VirtualGamepad';\r\nimport GameMenu from './components/GameMenu';\r\nimport GameText from './components/GameText';\r\n\r\n// Selectors\r\nimport { selectDialogMessages } from './redux/selectors/selectDialog';\r\nimport { selectMenuItems } from './redux/selectors/selectMenu';\r\nimport { selectTexts } from './redux/selectors/selectText';\r\nimport { selectGameCameraSizeUpdateCallback, selectGameLocale } from './redux/selectors/selectGameData';\r\n\r\nconst Game = () => {\r\n    const isDevelopment = process?.env?.NODE_ENV !== 'production';\r\n    const dispatch = useDispatch();\r\n    const [game, setGame] = useState(null);\r\n    const dialogMessages = useSelector(selectDialogMessages);\r\n    const menuItems = useSelector(selectMenuItems);\r\n    const gameTexts = useSelector(selectTexts);\r\n    const locale = useSelector(selectGameLocale);\r\n    const cameraSizeUpdateCallback = useSelector(selectGameCameraSizeUpdateCallback);\r\n\r\n    const [messages, setMessages] = useState({});\r\n\r\n    useEffect(() => {\r\n        async function loadMessages() {\r\n            const module = await import(`./intl/${locale}.json`);\r\n            setMessages(module.default);\r\n        }\r\n\r\n        loadMessages();\r\n    }, [locale]);\r\n\r\n    const updateGameReduxState = useCallback((\r\n        gameWidth,\r\n        gameHeight,\r\n        gameZoom\r\n    ) => {\r\n        dispatch(setGameHeightAction(gameHeight));\r\n        dispatch(setGameWidthAction(gameWidth));\r\n        dispatch(setGameZoomAction(gameZoom));\r\n    }, [dispatch]);\r\n\r\n    // Create the game inside a useEffect\r\n    // to create it only once\r\n    useEffect(() => {\r\n        // do this otherwise development hot-reload\r\n        // will create a bunch of Phaser instances\r\n        if (game) {\r\n            return;\r\n        }\r\n\r\n        const { width, height, zoom } = calculateGameSize(\r\n            MIN_GAME_WIDTH,\r\n            MIN_GAME_HEIGHT,\r\n            TILE_WIDTH,\r\n            TILE_HEIGHT\r\n        );\r\n\r\n        const phaserGame = new Phaser.Game({\r\n            type: Phaser.AUTO,\r\n            title: 'some-game-title',\r\n            parent: 'game-content',\r\n            orientation: Phaser.Scale.LANDSCAPE,\r\n            localStorageName: 'some-game-title',\r\n            width,\r\n            height,\r\n            zoom,\r\n            autoRound: true,\r\n            pixelArt: true,\r\n            scale: {\r\n                autoCenter: Phaser.Scale.CENTER_BOTH,\r\n                mode: Phaser.Scale.NONE,\r\n            },\r\n            scene: [\r\n                BootScene,\r\n                LoadAssetsScene,\r\n                GameScene,\r\n                MainMenuScene,\r\n            ],\r\n            physics: {\r\n                default: 'arcade',\r\n                arcade: {\r\n                    debug: isDevelopment,\r\n                },\r\n            },\r\n            plugins: {\r\n                scene: [\r\n                    {\r\n                        key: 'gridEngine',\r\n                        plugin: GridEngine,\r\n                        mapping: 'gridEngine',\r\n                    },\r\n                ],\r\n            },\r\n            backgroundColor: '#000000',\r\n        });\r\n\r\n        updateGameReduxState(width, height, zoom);\r\n        setGame(phaserGame);\r\n\r\n        if (isDevelopment) {\r\n            window.phaserGame = phaserGame;\r\n        }\r\n    }, [\r\n        game,\r\n        dispatch,\r\n        isDevelopment,\r\n        updateGameReduxState,\r\n    ]);\r\n\r\n    useEffect(() => {\r\n        if (!game) {\r\n            return () => {};\r\n        }\r\n\r\n        if (game.canvas) {\r\n            dispatch(setGameCanvasElementAction(game.canvas));\r\n        }\r\n\r\n        // Create listener to resize the game\r\n        // when the window is resized\r\n        let timeOutFunctionId;\r\n        const workAfterResizeIsDone = () => {\r\n            const scaleGame = () => {\r\n                const gameSize = calculateGameSize(\r\n                    MIN_GAME_WIDTH,\r\n                    MIN_GAME_HEIGHT,\r\n                    TILE_WIDTH,\r\n                    TILE_HEIGHT\r\n                );\r\n\r\n                // console.log(JSON.stringify(gameSize));\r\n                game.scale.setZoom(gameSize.zoom);\r\n                game.scale.resize(gameSize.width, gameSize.height);\r\n                // game.scale.setGameSize(gameSize.width, gameSize.height);\r\n                // game.scale.displaySize.resize(gameSize.width, gameSize.height);\r\n                // game.scale.resize(gameSize.width, gameSize.height).getParentBounds();\r\n                updateGameReduxState(gameSize.width, gameSize.height, gameSize.zoom);\r\n                // game.canvas.style.width = `${gameSize.width}px`;\r\n                // game.canvas.style.height = `${gameSize.height}px`;\r\n                cameraSizeUpdateCallback?.();\r\n            };\r\n\r\n            scaleGame();\r\n\r\n            // re-run function after resize is done to re-trigger css calculations\r\n            setTimeout(scaleGame, RE_RESIZE_THRESHOLD);\r\n        };\r\n\r\n        const canvasResizeCallback = () => {\r\n            clearTimeout(timeOutFunctionId);\r\n            timeOutFunctionId = setTimeout(workAfterResizeIsDone, RESIZE_THRESHOLD);\r\n        };\r\n\r\n        // TODO move to the ResizeObserver https://jsfiddle.net/rudiedirkx/p0ckdcnv/\r\n        window.addEventListener('resize', canvasResizeCallback);\r\n\r\n        return () => {\r\n            window.removeEventListener('resize', canvasResizeCallback);\r\n        };\r\n    }, [\r\n        game,\r\n        dispatch,\r\n        updateGameReduxState,\r\n        cameraSizeUpdateCallback,\r\n    ]);\r\n\r\n    return (\r\n        <IntlProvider\r\n            messages={messages}\r\n            locale={locale}\r\n            defaultLocale=\"en\"\r\n        >\r\n            <div\r\n                id=\"game-content\"\r\n                key=\"game-content\"\r\n            >\r\n                {/* this is where the game canvas will be rendered */}\r\n            </div>\r\n            {dialogMessages.length > 0 && (\r\n                <DialogBox />\r\n            )}\r\n            {menuItems.length > 0 && (\r\n                <GameMenu />\r\n            )}\r\n            {gameTexts.length > 0 && gameTexts.map((text) => {\r\n                const { key, variables, config } = text;\r\n\r\n                return (\r\n                    <GameText\r\n                        key={key}\r\n                        translationKey={key}\r\n                        variables={variables}\r\n                        config={config}\r\n                    />\r\n                );\r\n            })}\r\n            {isMobile() && (\r\n                <VirtualGamepad />\r\n            )}\r\n        </IntlProvider>\r\n    );\r\n};\r\n\r\nexport default Game;\r\n","import { Scene } from 'phaser';\r\n\r\n// Utils\r\nimport { changeScene } from '../../utils/sceneHelpers';\r\n\r\nexport default class BootScene extends Scene {\r\n    constructor() {\r\n        super('BootScene');\r\n    }\r\n\r\n    preload() {\r\n        // Preload assets for the splash and title screens\r\n    }\r\n\r\n    create() {\r\n        changeScene(this, 'MainMenuScene', {\r\n            fonts: ['\"Press Start 2P\"'],\r\n        });\r\n    }\r\n}\r\n","import { SET_GAME_HEIGHT } from '../../constants';\r\n\r\nconst setGameHeightAction = (payload) => (dispatch) => dispatch({\r\n    type: SET_GAME_HEIGHT,\r\n    payload,\r\n});\r\n\r\nexport default setGameHeightAction;\r\n","import { SET_GAME_WIDTH } from '../../constants';\r\n\r\nconst setGameWidthAction = (payload) => (dispatch) => dispatch({\r\n    type: SET_GAME_WIDTH,\r\n    payload,\r\n});\r\n\r\nexport default setGameWidthAction;\r\n","import { SET_GAME_ZOOM } from '../../constants';\r\n\r\nconst setGameZoomAction = (payload) => (dispatch) => dispatch({\r\n    type: SET_GAME_ZOOM,\r\n    payload,\r\n});\r\n\r\nexport default setGameZoomAction;\r\n","import { SET_GAME_CANVAS } from '../../constants';\r\n\r\nconst setGameCanvasElementAction = (payload) => (dispatch) => dispatch({\r\n    type: SET_GAME_CANVAS,\r\n    payload,\r\n});\r\n\r\nexport default setGameCanvasElementAction;\r\n","/* eslint-disable import/no-unresolved, import/no-webpack-loader-syntax */\r\nimport { useCallback, useEffect, useRef } from 'react';\r\nimport { Geom } from 'phaser';\r\nimport { makeStyles } from '@mui/styles';\r\nimport classNames from 'classnames';\r\nimport { useSelector } from 'react-redux';\r\n\r\n// Images\r\nimport dPadButton from '!!file-loader!../assets/images/d_pad_button.png';\r\nimport aButton from '!!file-loader!../assets/images/a_button.png';\r\nimport bButton from '!!file-loader!../assets/images/b_button.png';\r\n\r\n// Selectors\r\nimport { selectGameHeight, selectGameWidth, selectGameZoom } from '../redux/selectors/selectGameData';\r\n\r\n// Utils\r\nimport { simulateKeyEvent } from '../utils/utils';\r\n\r\n// Constants\r\nimport {\r\n    ARROW_DOWN_KEY,\r\n    ARROW_LEFT_KEY,\r\n    ARROW_RIGHT_KEY,\r\n    ARROW_UP_KEY,\r\n    ENTER_KEY,\r\n    SPACE_KEY,\r\n} from '../constants';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    buttonsWrapper: ({ zoom, height }) => ({\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        padding: `0 ${15 * zoom}px`,\r\n        // marginTop: `-${85 * zoom}px`,\r\n        marginTop: `${Math.ceil(window.innerHeight - (height * zoom) - (100 * zoom))}px`,\r\n        position: 'relative',\r\n        userSelect: 'none',\r\n        userDrag: 'none',\r\n        zIndex: 10,\r\n    }),\r\n    button: ({ zoom, width }) => ({\r\n        pointerEvents: 'none',\r\n        '-webkit-touch-callout': 'none',\r\n        userSelect: 'none',\r\n        userDrag: 'none',\r\n        '&.is-touched': {\r\n            filter: 'saturate(300%) brightness(70%)',\r\n        },\r\n    }),\r\n    aButton: ({ zoom, width }) => ({\r\n        width: `${40 * zoom}px`,\r\n        height: `${40 * zoom}px`,\r\n    }),\r\n    bButton: ({ zoom, width }) => ({\r\n        width: `${40 * zoom}px`,\r\n        height: `${40 * zoom}px`,\r\n    }),\r\n    dPadWrapper: ({ zoom, width }) => ({\r\n        width: `${76 * zoom}px`,\r\n        height: `${76 * zoom}px`,\r\n    }),\r\n    dPadLeft: ({ zoom, width }) => ({\r\n        width: `${38 * zoom}px`,\r\n        height: `${30.5 * zoom}px`,\r\n        marginBottom: `-${19 * zoom}px`,\r\n    }),\r\n    dPadRight: ({ zoom, width }) => ({\r\n        transform: 'rotate(180deg)',\r\n        width: `${38 * zoom}px`,\r\n        height: `${30.5 * zoom}px`,\r\n        marginBottom: `-${19 * zoom}px`,\r\n    }),\r\n    dPadUp: ({ zoom, width }) => ({\r\n        transform: 'rotate(90deg)',\r\n        width: `${38 * zoom}px`,\r\n        height: `${30.5 * zoom}px`,\r\n        marginLeft: `-${57 * zoom}px`,\r\n    }),\r\n    dPadDown: ({ zoom, width }) => ({\r\n        transform: 'rotate(270deg)',\r\n        width: `${38 * zoom}px`,\r\n        height: `${30.5 * zoom}px`,\r\n        marginLeft: `-${38 * zoom}px`,\r\n        marginBottom: `-${38 * zoom}px`,\r\n    }),\r\n}));\r\n\r\nconst VirtualGamepad = () => {\r\n    // TODO redo this with that answer from stackoverflow\r\n    const gameWidth = useSelector(selectGameWidth);\r\n    const gameHeight = useSelector(selectGameHeight);\r\n    const gameZoom = useSelector(selectGameZoom);\r\n\r\n    const classes = useStyles({\r\n        width: gameWidth,\r\n        height: gameHeight,\r\n        zoom: gameZoom,\r\n    });\r\n\r\n    const dPadLeftRef = useRef(null);\r\n    const dPadRightRef = useRef(null);\r\n    const dPadUpRef = useRef(null);\r\n    const dPadDownRef = useRef(null);\r\n    const aButtonRef = useRef(null);\r\n    const bButtonRef = useRef(null);\r\n    const eventRef = useRef({});\r\n\r\n    const wasAButtonClicked = useCallback((x, y) => {\r\n        const { width, x: elX, y: elY } = aButtonRef.current.getBoundingClientRect();\r\n        const radius = width / 2;\r\n        const circle = new Geom.Circle(\r\n            // this is needed because Circles have origin set to 0.5\r\n            elX + radius,\r\n            elY + radius,\r\n            radius\r\n        );\r\n\r\n        return circle.contains(x, y);\r\n    }, [aButtonRef]);\r\n\r\n    const wasBButtonClicked = useCallback((x, y) => {\r\n        const { width, x: elX, y: elY } = bButtonRef.current.getBoundingClientRect();\r\n        const radius = width / 2;\r\n        const circle = new Geom.Circle(\r\n            // this is needed because Circles have origin set to 0.5\r\n            elX + radius,\r\n            elY + radius,\r\n            radius\r\n        );\r\n\r\n        return circle.contains(x, y);\r\n    }, [bButtonRef]);\r\n\r\n    const wasLeftButtonClicked = useCallback((x, y) => {\r\n        const { left, right, top, bottom, height } = dPadLeftRef.current.getBoundingClientRect();\r\n        const polygon = new Geom.Polygon([\r\n            { x: left, y: top },\r\n            { x: right - 31, y: top },\r\n            { x: right, y: top + (height / 2) },\r\n            { x: right - 31, y: bottom },\r\n            { x: left, y: bottom },\r\n        ]);\r\n\r\n        return polygon.contains(x, y);\r\n    }, [dPadLeftRef]);\r\n\r\n    const wasUpButtonClicked = useCallback((x, y) => {\r\n        const { left, right, top, bottom, width } = dPadUpRef.current.getBoundingClientRect();\r\n        const polygon = new Geom.Polygon([\r\n            { x: left, y: top },\r\n            { x: right, y: top },\r\n            { x: right, y: bottom - 31 },\r\n            { x: left + (width / 2), y: bottom },\r\n            { x: left, y: bottom - 31 },\r\n        ]);\r\n\r\n        return polygon.contains(x, y);\r\n    }, [dPadUpRef]);\r\n\r\n    const wasRightButtonClicked = useCallback((x, y) => {\r\n        const { left, right, top, bottom, height } = dPadRightRef.current.getBoundingClientRect();\r\n        const polygon = new Geom.Polygon([\r\n            { x: left, y: top + (height / 2) },\r\n            { x: left + 31, y: top },\r\n            { x: right, y: top },\r\n            { x: right, y: bottom },\r\n            { x: left + 31, y: bottom },\r\n        ]);\r\n\r\n        return polygon.contains(x, y);\r\n    }, [dPadRightRef]);\r\n\r\n    const wasDownButtonClicked = useCallback((x, y) => {\r\n        const { left, right, top, bottom, width } = dPadDownRef.current.getBoundingClientRect();\r\n        const polygon = new Geom.Polygon([\r\n            { x: left + (width / 2), y: top },\r\n            { x: right, y: top + 31 },\r\n            { x: right, y: bottom },\r\n            { x: left, y: bottom },\r\n            { x: left, y: top + 31 },\r\n        ]);\r\n\r\n        return polygon.contains(x, y);\r\n    }, [dPadDownRef]);\r\n\r\n    const getPressedButton = useCallback((x, y) => {\r\n        if (wasLeftButtonClicked(x, y)) {\r\n            return [ARROW_LEFT_KEY, dPadLeftRef];\r\n        }\r\n\r\n        if (wasRightButtonClicked(x, y)) {\r\n            return [ARROW_RIGHT_KEY, dPadRightRef];\r\n        }\r\n\r\n        if (wasUpButtonClicked(x, y)) {\r\n            return [ARROW_UP_KEY, dPadUpRef];\r\n        }\r\n\r\n        if (wasDownButtonClicked(x, y)) {\r\n            return [ARROW_DOWN_KEY, dPadDownRef];\r\n        }\r\n\r\n        if (wasAButtonClicked(x, y)) {\r\n            return [SPACE_KEY, aButtonRef];\r\n        }\r\n\r\n        if (wasBButtonClicked(x, y)) {\r\n            return [ENTER_KEY, bButtonRef];\r\n        }\r\n\r\n        return [];\r\n    }, [\r\n        wasAButtonClicked,\r\n        wasBButtonClicked,\r\n        wasUpButtonClicked,\r\n        wasDownButtonClicked,\r\n        wasLeftButtonClicked,\r\n        wasRightButtonClicked,\r\n    ]);\r\n\r\n    const handleButtonPressed = useCallback((event, type) => {\r\n        const { x, y } = event;\r\n\r\n        const [pressedButton, element] = getPressedButton(x, y);\r\n        if (pressedButton && element) {\r\n            simulateKeyEvent(pressedButton, type);\r\n            if (type === 'down') {\r\n                element.current.classList.add('is-touched');\r\n            } else {\r\n                element.current.classList.remove('is-touched');\r\n            }\r\n        }\r\n    }, [getPressedButton]);\r\n\r\n    useEffect(() => {\r\n        const handlePointerDown = (event) => {\r\n            eventRef.current = event;\r\n            handleButtonPressed(event, 'down');\r\n        };\r\n        document.addEventListener('pointerdown', handlePointerDown);\r\n\r\n        const handlePointerUp = (event) => {\r\n            handleButtonPressed(eventRef.current, 'up');\r\n            eventRef.current = {};\r\n        };\r\n        document.addEventListener('pointerup', handlePointerUp);\r\n\r\n        return () => {\r\n            window.removeEventListener('pointerdown', handlePointerDown);\r\n            window.removeEventListener('pointerup', handlePointerUp);\r\n        };\r\n    }, []);\r\n\r\n    const handleContextMenuCallback = useCallback((event) => {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        return false;\r\n    }, []);\r\n\r\n    return (\r\n        <div className={classes.buttonsWrapper}>\r\n            <div className={classes.dPadWrapper}>\r\n                <img\r\n                    ref={dPadLeftRef}\r\n                    className={classNames(classes.button, classes.dPadLeft)}\r\n                    src={dPadButton}\r\n                    alt=\"test\"\r\n                    onContextMenu={handleContextMenuCallback}\r\n                />\r\n                <img\r\n                    ref={dPadRightRef}\r\n                    className={classNames(classes.button, classes.dPadRight)}\r\n                    src={dPadButton}\r\n                    alt=\"test\"\r\n                    onContextMenu={handleContextMenuCallback}\r\n                />\r\n                <img\r\n                    ref={dPadUpRef}\r\n                    className={classNames(classes.button, classes.dPadUp)}\r\n                    src={dPadButton}\r\n                    alt=\"test\"\r\n                    onContextMenu={handleContextMenuCallback}\r\n                />\r\n                <img\r\n                    ref={dPadDownRef}\r\n                    className={classNames(classes.button, classes.dPadDown)}\r\n                    src={dPadButton}\r\n                    alt=\"test\"\r\n                    onContextMenu={handleContextMenuCallback}\r\n                />\r\n            </div>\r\n            <div>\r\n                <img\r\n                    ref={aButtonRef}\r\n                    className={classNames(classes.button, classes.aButton)}\r\n                    src={aButton}\r\n                    alt=\"test\"\r\n                    onContextMenu={handleContextMenuCallback}\r\n                />\r\n                <img\r\n                    ref={bButtonRef}\r\n                    className={classNames(classes.button, classes.bButton)}\r\n                    src={bButton}\r\n                    alt=\"test\"\r\n                    onContextMenu={handleContextMenuCallback}\r\n                />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default VirtualGamepad;\r\n","import { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@mui/styles';\r\nimport classNames from 'classnames';\r\nimport { useSelector } from 'react-redux';\r\nimport { FormattedMessage } from 'react-intl';\r\n\r\n// Constants\r\nimport { ARROW_DOWN_KEY, ARROW_UP_KEY, ENTER_KEY } from '../constants';\r\n\r\n// Selectors\r\nimport { selectGameHeight, selectGameWidth, selectGameZoom } from '../redux/selectors/selectGameData';\r\nimport { selectMenuItems, selectMenuOnSelect, selectMenuPosition } from '../redux/selectors/selectMenu';\r\n\r\n// Utils\r\nimport { getTranslationVariables } from '../utils/utils';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    menuWrapper: ({ zoom }) => ({\r\n        fontFamily: '\"Press Start 2P\"',\r\n        fontSize: `${10 * zoom}px`,\r\n        textTransform: 'uppercase',\r\n        position: 'absolute',\r\n        transform: 'translate(-50%, 0%)',\r\n    }),\r\n    menuPositionWrapper: ({ zoom, position, width, height }) => {\r\n        const left = window.innerWidth - (width * zoom);\r\n        const menuWidth = 160 * zoom;\r\n        if (position === 'center') {\r\n            return {\r\n                minWidth: `${menuWidth}px`,\r\n                left: '50%',\r\n                top: `${(height * zoom) / 2}px`,\r\n            };\r\n        }\r\n\r\n        if (position === 'left') {\r\n            return {\r\n                minWidth: `${menuWidth}px`,\r\n                left: `${(95 * zoom) + left / 2}px`,\r\n                top: `${50 * zoom}px`,\r\n            };\r\n        }\r\n\r\n        return {};\r\n    },\r\n    menuItemsWrapper: {\r\n        textAlign: 'center',\r\n        padding: 0,\r\n    },\r\n    menuItem: ({ zoom }) => ({\r\n        cursor: 'pointer',\r\n        listStyle: 'none',\r\n        padding: `${5 * zoom}px`,\r\n        marginBottom: `${5 * zoom}px`,\r\n        backgroundColor: '#94785c',\r\n        border: `${zoom}px solid #79584f`,\r\n    }),\r\n    selectedMenuItem: ({ zoom }) => ({\r\n        fontSize: `${11 * zoom}px`,\r\n        border: `${zoom}px solid #ddd`,\r\n    }),\r\n}));\r\n\r\nconst GameMenu = () => {\r\n    // Game\r\n    const gameWidth = useSelector(selectGameWidth);\r\n    const gameHeight = useSelector(selectGameHeight);\r\n    const gameZoom = useSelector(selectGameZoom);\r\n\r\n    // Menu\r\n    const position = useSelector(selectMenuPosition);\r\n    const items = useSelector(selectMenuItems);\r\n    const onSelected = useSelector(selectMenuOnSelect);\r\n\r\n    const classes = useStyles({\r\n        width: gameWidth,\r\n        height: gameHeight,\r\n        zoom: gameZoom,\r\n        position,\r\n    });\r\n\r\n    const [selectedItemIndex, setSelectedItemIndex] = useState(0);\r\n\r\n    useEffect(() => {\r\n        const handleKeyPressed = (e) => {\r\n            switch (e.code) {\r\n                case ENTER_KEY: {\r\n                    onSelected(items[selectedItemIndex]);\r\n                    break;\r\n                }\r\n\r\n                case ARROW_UP_KEY: {\r\n                    if (selectedItemIndex > 0) {\r\n                        setSelectedItemIndex(\r\n                            selectedItemIndex - 1\r\n                        );\r\n                    }\r\n\r\n                    break;\r\n                }\r\n\r\n                case ARROW_DOWN_KEY: {\r\n                    if (items.length - 1 > selectedItemIndex) {\r\n                        setSelectedItemIndex(\r\n                            selectedItemIndex + 1\r\n                        );\r\n                    }\r\n\r\n                    break;\r\n                }\r\n\r\n                default: {\r\n                    break;\r\n                }\r\n            }\r\n        };\r\n        window.addEventListener('keydown', handleKeyPressed);\r\n\r\n        return () => window.removeEventListener('keydown', handleKeyPressed);\r\n    }, [items, onSelected, selectedItemIndex]);\r\n\r\n    return (\r\n        <div className={classNames(classes.menuWrapper, classes.menuPositionWrapper)}>\r\n            <ul className={classes.menuItemsWrapper}>\r\n                {items.map((item, index) => {\r\n                    const [key, variables] = getTranslationVariables(item);\r\n\r\n                    return (\r\n                        // eslint-disable-next-line jsx-a11y/no-noninteractive-element-interactions\r\n                        <li\r\n                            key={key}\r\n                            className={classNames(classes.menuItem, {\r\n                                [classes.selectedMenuItem]: selectedItemIndex === index,\r\n                            })}\r\n                            onMouseEnter={() => {\r\n                                setSelectedItemIndex(index);\r\n                            }}\r\n                            onClick={() => {\r\n                                onSelected(key, item);\r\n                            }}\r\n                        >\r\n                            <FormattedMessage\r\n                                id={key}\r\n                                values={variables}\r\n                            />\r\n                        </li>\r\n                    );\r\n                })}\r\n            </ul>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default GameMenu;\r\n","// eslint-disable-next-line import/prefer-default-export\r\nexport const selectTexts = (state) => state.text.texts;\r\n","import { ADD_LOADED_FONT } from '../../constants';\r\n\r\nconst addLoadedFontAction = (payload) => (dispatch) => dispatch({\r\n    type: ADD_LOADED_FONT,\r\n    payload,\r\n});\r\n\r\nexport default addLoadedFontAction;\r\n","import { ADD_LOADED_ATLAS } from '../../constants';\r\n\r\nconst addLoadedAtlasAction = (payload) => (dispatch) => dispatch({\r\n    type: ADD_LOADED_ATLAS,\r\n    payload,\r\n});\r\n\r\nexport default addLoadedAtlasAction;\r\n","import { ADD_LOADED_IMAGE } from '../../constants';\r\n\r\nconst addLoadedImageAction = (payload) => (dispatch) => dispatch({\r\n    type: ADD_LOADED_IMAGE,\r\n    payload,\r\n});\r\n\r\nexport default addLoadedImageAction;\r\n","import { ADD_LOADED_MAP } from '../../constants';\r\n\r\nconst addLoadedMapAction = (payload) => (dispatch) => dispatch({\r\n    type: ADD_LOADED_MAP,\r\n    payload,\r\n});\r\n\r\nexport default addLoadedMapAction;\r\n","import { ADD_LOADED_JSON } from '../../constants';\r\n\r\nconst addLoadedJSONAction = (payload) => (dispatch) => dispatch({\r\n    type: ADD_LOADED_JSON,\r\n    payload,\r\n});\r\n\r\nexport default addLoadedJSONAction;\r\n","import { ADD_TILESET } from '../../constants';\r\n\r\nconst addTilesetAction = (payload) => (dispatch) => dispatch({\r\n    type: ADD_TILESET,\r\n    payload,\r\n});\r\n\r\nexport default addTilesetAction;\r\n","export const selectLoadedFonts = (state) => state.loadedAssets.fonts;\r\n\r\nexport const selectLoadedAtlases = (state) => state.loadedAssets.atlases;\r\n\r\nexport const selectLoadedImages = (state) => state.loadedAssets.images;\r\n\r\nexport const selectLoadedMaps = (state) => state.loadedAssets.maps;\r\n\r\nexport const selectLoadedJSONs = (state) => state.loadedAssets.jsons;\r\n","import { Scene, Display } from 'phaser';\r\n\r\n// Actions\r\nimport addLoadedFontAction from '../../redux/actions/loadedAssets/addLoadedFontAction';\r\nimport addLoadedAtlasAction from '../../redux/actions/loadedAssets/addLoadedAtlasAction';\r\nimport addLoadedImageAction from '../../redux/actions/loadedAssets/addLoadedImageAction';\r\nimport addLoadedMapAction from '../../redux/actions/loadedAssets/addLoadedMapAction';\r\nimport addLoadedJSONAction from '../../redux/actions/loadedAssets/addLoadedJSONAction';\r\nimport addTilesetAction from '../../redux/actions/mapData/addTilesetAction';\r\n\r\n// Selectors\r\nimport {\r\n    selectLoadedAtlases,\r\n    selectLoadedImages,\r\n    selectLoadedFonts,\r\n    selectLoadedJSONs,\r\n    selectLoadedMaps,\r\n} from '../../redux/selectors/selectLoadedAssets';\r\n\r\n// Utils\r\nimport {\r\n    getState,\r\n    getDispatch,\r\n    isMapFileAvailable,\r\n    isImageFileAvailable,\r\n    isTilesetFileAvailable,\r\n    isGeneratedAtlasFileAvailable,\r\n} from '../../utils/utils';\r\nimport { asyncLoader } from '../../utils/phaser';\r\n\r\n// Constants\r\nimport {\r\n    KEY,\r\n    COIN,\r\n    ENEMY,\r\n    HEART,\r\n    CRYSTAL,\r\n    KEY_SPRITE_NAME,\r\n    COIN_SPRITE_NAME,\r\n    IGNORED_TILESETS,\r\n    ENEMY_SPRITE_NAME,\r\n    HEART_SPRITE_NAME,\r\n    CRYSTAL_SPRITE_NAME,\r\n} from '../../constants';\r\n\r\nexport default class LoadAssetsScene extends Scene {\r\n    constructor() {\r\n        super('LoadAssetsScene');\r\n    }\r\n\r\n    init(initData) {\r\n        this.initData = initData;\r\n    }\r\n\r\n    async create() {\r\n        const { width: gameWidth, height: gameHeight } = this.cameras.main;\r\n        const {\r\n            fonts = [],\r\n            atlases = [],\r\n            images = [],\r\n            mapKey = '',\r\n        } = this.initData?.assets || {};\r\n\r\n        const dispatch = getDispatch();\r\n        const state = getState();\r\n        const loadedFonts = selectLoadedFonts(state);\r\n\r\n        // setup loading bar\r\n        const progressBar = this.add.graphics();\r\n        const progressBox = this.add.graphics();\r\n\r\n        const barWidth = Math.round(gameWidth * 0.6);\r\n        const handleBarProgress = (value) => {\r\n            progressBar.clear();\r\n            progressBar.fillStyle(0xFFFFFF, 1);\r\n            progressBox.fillRect(\r\n                (gameWidth - barWidth) / 2,\r\n                gameHeight - 80,\r\n                barWidth * value,\r\n                20\r\n            );\r\n        };\r\n\r\n        this.load.on('progress', handleBarProgress);\r\n\r\n        this.load.on('fileprogress', (file) => {\r\n            console.log(file.key);\r\n        });\r\n\r\n        this.load.on('complete', () => {\r\n            progressBar.destroy();\r\n            progressBox.destroy();\r\n\r\n            this.load.off('progress');\r\n            this.load.off('fileprogress');\r\n            this.load.off('complete');\r\n        });\r\n\r\n        // Pre-load all the fonts needed for the scene\r\n        // so Phaser can render them properly\r\n        let newFontsCount = 0;\r\n        fonts?.forEach((font, idx) => {\r\n            // If a font is already loaded, then skip this\r\n            if (loadedFonts.includes(font)) {\r\n                return;\r\n            }\r\n\r\n            if (!mapKey && atlases.length === 0 && images.length === 0) {\r\n                handleBarProgress(fonts.length - (fonts.length - (idx + 1)));\r\n            }\r\n\r\n            // Set font as already loaded in the redux store\r\n            dispatch(addLoadedFontAction(font));\r\n            newFontsCount += 1;\r\n            const color = this.game.config.backgroundColor;\r\n            this.add.text(\r\n                0,\r\n                0,\r\n                '',\r\n                {\r\n                    fontFamily: font,\r\n                    color: Display.Color.RGBToString(color.r, color.g, color.b, color.a),\r\n                }\r\n            );\r\n        });\r\n\r\n        const loadedAtlases = selectLoadedAtlases(state);\r\n        const loadedImages = selectLoadedImages(state);\r\n        const loadedMaps = selectLoadedMaps(state);\r\n        // Load the Tiled map needed for the next scene\r\n        if (\r\n            mapKey\r\n            && !loadedMaps.includes(mapKey)\r\n            && isMapFileAvailable(`${mapKey}.json`)\r\n        ) {\r\n            const { default: mapJson } = await import(`../../assets/maps/${mapKey}.json`);\r\n            const tilesets = mapJson.tilesets.map((tileset) =>\r\n                // the string will be something like \"../tilesets/village.json\" or \"../tilesets/village.png\"\r\n                tileset.source?.split('/').pop().split('.')[0] || tileset.image?.split('/').pop().split('.')[0]);\r\n\r\n            // Load objects assets\r\n            const objectLayers = mapJson.layers.filter((layer) => layer.type === 'objectgroup');\r\n            objectLayers.forEach((layer) => {\r\n                layer.objects.forEach(async (object) => {\r\n                    const { gid, properties } = object;\r\n                    switch (gid) {\r\n                        case ENEMY: {\r\n                            // for some reason, if I don't assign this constant to a local variable\r\n                            // webpack production build do something that the code doesn't work properly\r\n                            // on the browser\r\n                            const spriteName = ENEMY_SPRITE_NAME;\r\n\r\n                            if (\r\n                                isGeneratedAtlasFileAvailable(`${spriteName}.json`)\r\n                                && isGeneratedAtlasFileAvailable(`${spriteName}.png`)\r\n                                && !loadedAtlases.includes(spriteName)\r\n                            ) {\r\n                                // eslint-disable-next-line no-await-in-loop\r\n                                const { default: jsonPath } =\r\n                                    await import(`../../assets/atlases/generated/${spriteName}.json`);\r\n                                // eslint-disable-next-line no-await-in-loop\r\n                                const { default: imagePath } =\r\n                                    await import(`!!file-loader!../../assets/atlases/generated/${spriteName}.png`);\r\n\r\n                                dispatch(addLoadedAtlasAction(spriteName));\r\n                                await asyncLoader(this.load.atlas(spriteName, imagePath, jsonPath));\r\n                            }\r\n\r\n                            break;\r\n                        }\r\n                        case COIN: {\r\n                            const spriteName = COIN_SPRITE_NAME;\r\n\r\n                            if (\r\n                                isGeneratedAtlasFileAvailable(`${spriteName}.json`)\r\n                                && isGeneratedAtlasFileAvailable(`${spriteName}.png`)\r\n                            && !loadedAtlases.includes(spriteName)\r\n                            ) {\r\n                                // eslint-disable-next-line no-await-in-loop\r\n                                const { default: jsonPath } =\r\n                                    await import(`../../assets/atlases/generated/${spriteName}.json`);\r\n                                // eslint-disable-next-line no-await-in-loop\r\n                                const { default: imagePath } =\r\n                                    await import(`!!file-loader!../../assets/atlases/generated/${spriteName}.png`);\r\n\r\n                                dispatch(addLoadedAtlasAction(spriteName));\r\n                                await asyncLoader(this.load.atlas(spriteName, imagePath, jsonPath));\r\n                            }\r\n\r\n                            break;\r\n                        }\r\n                        case HEART: {\r\n                            const spriteName = HEART_SPRITE_NAME;\r\n                            if (\r\n                                isImageFileAvailable('heart_full.png')\r\n                                && !loadedImages.includes(spriteName)\r\n                            ) {\r\n                                // eslint-disable-next-line no-await-in-loop, import/no-unresolved, import/no-webpack-loader-syntax\r\n                                const { default: imagePath } = await import('!!file-loader!../../assets/images/heart_full.png'); // `../../assets/images/${spriteName}.png`\r\n\r\n                                dispatch(addLoadedImageAction(spriteName));\r\n                                await asyncLoader(this.load.image(spriteName, imagePath));\r\n                            }\r\n\r\n                            break;\r\n                        }\r\n                        case CRYSTAL: {\r\n                            const spriteName = CRYSTAL_SPRITE_NAME;\r\n\r\n                            if (\r\n                                isImageFileAvailable(`${spriteName}.png`)\r\n                                && !loadedImages.includes(spriteName)\r\n                            ) {\r\n                                // eslint-disable-next-line no-await-in-loop\r\n                                const { default: imagePath } =\r\n                                    await import(`!!file-loader!../../assets/images/${spriteName}.png`);\r\n\r\n                                dispatch(addLoadedImageAction(spriteName));\r\n                                await asyncLoader(this.load.image(spriteName, imagePath));\r\n                            }\r\n\r\n                            break;\r\n                        }\r\n                        case KEY: {\r\n                            const spriteName = KEY_SPRITE_NAME;\r\n\r\n                            if (\r\n                                isImageFileAvailable(`${spriteName}.png`)\r\n                                && !loadedImages.includes(spriteName)\r\n                            ) {\r\n                                // eslint-disable-next-line no-await-in-loop\r\n                                const { default: imagePath } =\r\n                                    await import(`!!file-loader!../../assets/images/${spriteName}.png`);\r\n\r\n                                dispatch(addLoadedImageAction(spriteName));\r\n                                await asyncLoader(this.load.image(spriteName, imagePath));\r\n                            }\r\n\r\n                            break;\r\n                        }\r\n                        default: {\r\n                            break;\r\n                        }\r\n                    }\r\n\r\n                    properties?.forEach((property) => {\r\n                        // TODO\r\n                        const { name, type, value } = property;\r\n                    });\r\n                });\r\n            });\r\n\r\n            const loadedJSONs = selectLoadedJSONs(state);\r\n            // eslint-disable-next-line no-restricted-syntax\r\n            for (const tilesetName of tilesets) {\r\n                if (tilesetName && !IGNORED_TILESETS.includes(tilesetName)) {\r\n                    let tilesetJson = {};\r\n                    if (!loadedJSONs.includes(tilesetName) && isTilesetFileAvailable(`${tilesetName}.json`)) {\r\n                        // eslint-disable-next-line no-await-in-loop\r\n                        const { default: jsonResult } = await import(`../../assets/tilesets/${tilesetName}.json`);\r\n                        tilesetJson = jsonResult;\r\n\r\n                        dispatch(addLoadedJSONAction(tilesetName));\r\n                        // eslint-disable-next-line no-await-in-loop\r\n                        await asyncLoader(this.load.json(tilesetName, tilesetJson));\r\n                    } else {\r\n                        tilesetJson = this.cache.json.get(tilesetName);\r\n                    }\r\n\r\n                    if (!loadedImages.includes(tilesetName) && isTilesetFileAvailable(tilesetJson.image)) {\r\n                        // eslint-disable-next-line no-await-in-loop\r\n                        const { default: tilesetImage } = await import(`../../assets/tilesets/${tilesetJson.image}`);\r\n\r\n                        dispatch(addLoadedImageAction(tilesetName));\r\n                        // eslint-disable-next-line no-await-in-loop\r\n                        await asyncLoader(this.load.image(tilesetName, tilesetImage));\r\n                    }\r\n\r\n                    mapJson.tilesets = mapJson.tilesets\r\n                        .filter(\r\n                            (tileset) => !IGNORED_TILESETS.includes(tileset.source?.split('/')?.pop()?.split('.')?.[0])\r\n                        ).map((tileset) => {\r\n                            if (tileset.source?.includes(`/${tilesetName}.json`)) {\r\n                                const imageExtension = tilesetJson.image.split('.').pop();\r\n                                const imagePath = tileset.source.replace('.json', `.${imageExtension}`);\r\n                                // eslint-disable-next-line no-param-reassign\r\n                                delete tileset.source;\r\n\r\n                                return {\r\n                                    ...tileset,\r\n                                    ...tilesetJson,\r\n                                    image: imagePath, // not really necessary but why not\r\n                                };\r\n                            }\r\n\r\n                            return tileset;\r\n                        });\r\n\r\n                    dispatch(addTilesetAction(tilesetName));\r\n                }\r\n            }\r\n\r\n            dispatch(addLoadedMapAction(mapKey));\r\n            // Load map with pre-loaded tilesets\r\n            await asyncLoader(this.load.tilemapTiledJSON(mapKey, mapJson));\r\n        }\r\n\r\n        // Load all the atlases needed for the next scene\r\n        // eslint-disable-next-line no-restricted-syntax\r\n        for (const atlas of atlases) {\r\n            if (\r\n                !isGeneratedAtlasFileAvailable(`${atlas}.json`)\r\n                || loadedAtlases.includes(atlas)\r\n            ) {\r\n                // eslint-disable-next-line no-continue\r\n                continue;\r\n            }\r\n\r\n            // eslint-disable-next-line no-await-in-loop\r\n            const { default: jsonPath } = await import(`../../assets/atlases/generated/${atlas}.json`);\r\n            const imageName = jsonPath.textures.find((texture) => texture.image.includes(atlas))?.image;\r\n            if (!imageName || !isGeneratedAtlasFileAvailable(imageName)) {\r\n                // eslint-disable-next-line no-continue\r\n                continue;\r\n            }\r\n\r\n            // eslint-disable-next-line no-await-in-loop\r\n            const { default: imagePath } = await import(`!!file-loader!../../assets/atlases/generated/${imageName}`);\r\n\r\n            dispatch(addLoadedAtlasAction(atlas));\r\n            // eslint-disable-next-line no-await-in-loop\r\n            await asyncLoader(this.load.atlas(atlas, imagePath, jsonPath));\r\n        }\r\n\r\n        // Load all the images needed for the next scene\r\n        // eslint-disable-next-line no-restricted-syntax\r\n        for (const image of images) {\r\n            if (\r\n                !isImageFileAvailable(`${image}.png`)\r\n                || loadedImages.includes(image)\r\n            ) {\r\n                // eslint-disable-next-line no-continue\r\n                continue;\r\n            }\r\n\r\n            // eslint-disable-next-line no-await-in-loop\r\n            const { default: imagePath } = await import(`!!file-loader!../../assets/images/${image}.png`);\r\n\r\n            dispatch(addLoadedImageAction(image));\r\n            // eslint-disable-next-line no-await-in-loop\r\n            await asyncLoader(this.load.image(image, imagePath));\r\n        }\r\n\r\n        // If we have fonts, then wait for them to be loaded before calling the next scene...\r\n        if (newFontsCount > 0) {\r\n            document.fonts.ready.then((fontFace) => {\r\n                this.scene.start(\r\n                    this.initData.nextScene\r\n                );\r\n            });\r\n        } else {\r\n            // ... otherwise just call the next scene already\r\n            this.scene.start(\r\n                this.initData.nextScene\r\n            );\r\n        }\r\n    }\r\n}\r\n","import { SET_MENU_ITEMS } from '../../constants';\r\n\r\nconst setMenuItemsAction = (payload) => (dispatch) => dispatch({\r\n    type: SET_MENU_ITEMS,\r\n    payload,\r\n});\r\n\r\nexport default setMenuItemsAction;\r\n","import { SET_MENU_ON_SELECT } from '../../constants';\r\n\r\nconst setMenuOnSelectAction = (payload) => (dispatch) => dispatch({\r\n    type: SET_MENU_ON_SELECT,\r\n    payload,\r\n});\r\n\r\nexport default setMenuOnSelectAction;\r\n","import { Scene } from 'phaser';\r\n\r\n// Constants\r\nimport { DOWN_DIRECTION, IDLE_FRAME } from '../../constants';\r\n\r\n// Actions\r\nimport setMapKeyAction from '../../redux/actions/mapData/setMapKeyAction';\r\nimport setHeroFacingDirectionAction from '../../redux/actions/heroData/setHeroFacingDirectionAction';\r\nimport setHeroInitialPositionAction from '../../redux/actions/heroData/setHeroInitialPositionAction';\r\nimport setHeroPreviousPositionAction from '../../redux/actions/heroData/setHeroPreviousPositionAction';\r\nimport setHeroInitialFrameAction from '../../redux/actions/heroData/setHeroInitialFrameAction';\r\nimport setMenuItemsAction from '../../redux/actions/menu/setMenuItemsAction';\r\nimport setMenuOnSelectAction from '../../redux/actions/menu/setMenuOnSelectAction';\r\n\r\n// Utils\r\nimport { changeScene } from '../../utils/sceneHelpers';\r\nimport { getDispatch } from '../../utils/utils';\r\n\r\nexport default class MainMenuScene extends Scene {\r\n    constructor() {\r\n        super('MainMenuScene');\r\n    }\r\n\r\n    preload() {\r\n        // TODO\r\n    }\r\n\r\n    create() {\r\n        const dispatch = getDispatch();\r\n\r\n        dispatch(setMenuItemsAction(['start_game', 'exit']));\r\n        dispatch(setMenuOnSelectAction((key, item) => {\r\n            if (key === 'start_game') {\r\n                handleStartGameSelected();\r\n            } else {\r\n                dispatch(setMenuItemsAction([]));\r\n                dispatch(setMenuOnSelectAction(null));\r\n                window.location.reload();\r\n            }\r\n        }));\r\n\r\n        const handleStartGameSelected = () => Promise.all([\r\n            dispatch(setMenuItemsAction([])),\r\n            dispatch(setMenuOnSelectAction(null)),\r\n            dispatch(setMapKeyAction('sample_map')), // sample_indoor\r\n            dispatch(setHeroFacingDirectionAction(DOWN_DIRECTION)),\r\n            dispatch(setHeroInitialPositionAction({ x: 30, y: 42 })),\r\n            dispatch(setHeroPreviousPositionAction({ x: 30, y: 42 })),\r\n            dispatch(setHeroInitialFrameAction(\r\n                IDLE_FRAME.replace('position', DOWN_DIRECTION)\r\n            )),\r\n        ]).then(() => {\r\n            changeScene(this, 'GameScene', {\r\n                // fonts: ['\"Press Start 2P\"'],\r\n                atlases: ['hero'],\r\n                images: [],\r\n                mapKey: 'sample_map',\r\n                // mapKey: 'sample_indoor',\r\n            });\r\n        });\r\n    }\r\n}\r\n","import { SET_GAME_CAMERA_SIZE_CALLBACK } from '../../constants';\r\n\r\nconst setGameCameraSizeUpdateCallbackAction = (payload) => (dispatch) => dispatch({\r\n    type: SET_GAME_CAMERA_SIZE_CALLBACK,\r\n    payload,\r\n});\r\n\r\nexport default setGameCameraSizeUpdateCallbackAction;\r\n","import { Scene } from 'phaser';\r\n\r\n// Utils\r\nimport {\r\n    handleCreateMap,\r\n    handleCreateHero,\r\n    handleObjectsLayer,\r\n    handleHeroMovement,\r\n    handleCreateGroups,\r\n    handleCreateControls,\r\n    handleConfigureCamera,\r\n    handleConfigureGridEngine,\r\n    handleCreateHeroAnimations,\r\n    handleCreateCharactersMovements,\r\n} from '../../utils/sceneHelpers';\r\n\r\n// Utils\r\nimport { getDispatch } from '../../utils/utils';\r\n\r\n// Actions\r\nimport setGameCameraSizeUpdateCallbackAction from '../../redux/actions/game/setGameCameraSizeUpdateCallbackAction';\r\n\r\nexport default class GameScene extends Scene {\r\n    constructor() {\r\n        super('GameScene');\r\n    }\r\n\r\n    create() {\r\n        const dispatch = getDispatch();\r\n\r\n        // All of these functions need to be called in order\r\n\r\n        // Create controls\r\n        handleCreateControls(this);\r\n\r\n        // Create game groups\r\n        handleCreateGroups(this);\r\n\r\n        // Create the map\r\n        handleCreateMap(this);\r\n\r\n        // Create hero sprite\r\n        handleCreateHero(this);\r\n\r\n        // Configure grid engine\r\n        handleConfigureGridEngine(this);\r\n\r\n        // Load game objects like items, enemies, etc\r\n        handleObjectsLayer(this);\r\n\r\n        // Configure the main camera\r\n        handleConfigureCamera(this);\r\n        dispatch(setGameCameraSizeUpdateCallbackAction(() => {\r\n            handleConfigureCamera(this);\r\n        }));\r\n\r\n        // Hero animations\r\n        handleCreateHeroAnimations(this);\r\n\r\n        // Handle characters movements\r\n        handleCreateCharactersMovements(this);\r\n    }\r\n\r\n    update(time, delta) {\r\n        handleHeroMovement(this);\r\n        this.heroSprite.update(time, delta);\r\n    }\r\n}\r\n","import { useMemo } from 'react';\r\nimport { animated, useTransition } from 'react-spring';\r\nimport { makeStyles } from '@mui/styles';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    dialogMessage: ({ zoom }) => ({\r\n        fontFamily: '\"Press Start 2P\"',\r\n        fontSize: `${6 * zoom}px`,\r\n        textTransform: 'uppercase',\r\n        lineHeight: `${8 * zoom}px`,\r\n    }),\r\n}));\r\n\r\nconst Message = ({\r\n    message = [],\r\n    trail = 35,\r\n    zoom = 1,\r\n    onMessageEnded = () => {},\r\n    forceShowFullMessage = false,\r\n}) => {\r\n    const classes = useStyles({ zoom });\r\n    const items = useMemo(\r\n        () => message.trim().split('').map((letter, index) => ({\r\n            item: letter,\r\n            key: index,\r\n        })),\r\n        [message]\r\n    );\r\n\r\n    const transitions = useTransition(items, {\r\n        trail,\r\n        from: { display: 'none' },\r\n        enter: { display: '' },\r\n        onRest: (status, controller, item) => {\r\n            if (item.key === items.length - 1) {\r\n                onMessageEnded();\r\n            }\r\n        },\r\n    });\r\n\r\n    return (\r\n        <div className={classes.dialogMessage}>\r\n            {forceShowFullMessage && (\r\n                <span>{message}</span>\r\n            )}\r\n\r\n            {!forceShowFullMessage && transitions((styles, { item, key }) => (\r\n                <animated.span key={key} style={styles}>\r\n                    {item}\r\n                </animated.span>\r\n            ))}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Message;\r\n","import { useCallback, useEffect, useState } from 'react';\r\nimport { makeStyles } from '@mui/styles';\r\nimport { useSelector } from 'react-redux';\r\n\r\n// Components\r\nimport Message from './Message';\r\n\r\n// Selectors\r\nimport { selectGameHeight, selectGameWidth, selectGameZoom } from '../redux/selectors/selectGameData';\r\nimport { selectDialogAction, selectDialogCharacterName, selectDialogMessages } from '../redux/selectors/selectDialog';\r\n\r\n// Constants\r\nimport { ENTER_KEY, ESCAPE_KEY, SPACE_KEY } from '../constants';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    dialogWindow: ({ width, height, zoom }) => ({\r\n        imageRendering: 'pixelated',\r\n        fontFamily: '\"Press Start 2P\"',\r\n        textTransform: 'uppercase',\r\n        backgroundColor: '#e2b27e',\r\n        border: 'solid',\r\n        padding: `${8 * zoom}px`,\r\n        position: 'absolute',\r\n        bottom: `${Math.ceil(window.innerHeight - (height * zoom) + (height * 0.05))}px`,\r\n        width: `${Math.ceil(width * 0.8 * zoom)}px`,\r\n        left: '50%',\r\n        transform: 'translate(-50%, 0%)',\r\n        minHeight: `${Math.ceil((height / 4) * zoom)}px`,\r\n        maxHeight: `${Math.ceil((height / 3) * zoom)}px`,\r\n    }),\r\n    dialogTitle: ({ zoom }) => ({\r\n        fontSize: `${8 * zoom}px`,\r\n        marginBottom: `${6 * zoom}px`,\r\n        fontWeight: 'bold',\r\n    }),\r\n    dialogFooter: ({ zoom }) => ({\r\n        fontSize: `${8 * zoom}px`,\r\n        cursor: 'pointer',\r\n        textAlign: 'end',\r\n        position: 'absolute',\r\n        right: `${6 * zoom}px`,\r\n        bottom: `${6 * zoom}px`,\r\n    }),\r\n}));\r\n\r\nconst DialogBox = () => {\r\n    const dialogMessages = useSelector(selectDialogMessages);\r\n    const dialogAction = useSelector(selectDialogAction);\r\n    const gameWidth = useSelector(selectGameWidth);\r\n    const gameHeight = useSelector(selectGameHeight);\r\n    const gameZoom = useSelector(selectGameZoom);\r\n    const characterName = useSelector(selectDialogCharacterName);\r\n\r\n    const [currentMessage, setCurrentMessage] = useState(0);\r\n    const [messageEnded, setMessageEnded] = useState(false);\r\n    const [forceShowFullMessage, setForceShowFullMessage] = useState(false);\r\n    const classes = useStyles({\r\n        width: gameWidth,\r\n        height: gameHeight,\r\n        zoom: gameZoom,\r\n    });\r\n\r\n    const handleClick = useCallback(() => {\r\n        if (messageEnded) {\r\n            setMessageEnded(false);\r\n            setForceShowFullMessage(false);\r\n            if (currentMessage < dialogMessages.length - 1) {\r\n                setCurrentMessage(currentMessage + 1);\r\n            } else {\r\n                setCurrentMessage(0);\r\n                dialogAction?.();\r\n            }\r\n        } else {\r\n            setMessageEnded(true);\r\n            setForceShowFullMessage(true);\r\n        }\r\n    }, [dialogAction, currentMessage, messageEnded, dialogMessages.length]);\r\n\r\n    useEffect(() => {\r\n        const handleKeyPressed = (e) => {\r\n            if ([ENTER_KEY, SPACE_KEY, ESCAPE_KEY].includes(e.code)) {\r\n                handleClick();\r\n            }\r\n        };\r\n        window.addEventListener('keydown', handleKeyPressed);\r\n\r\n        return () => window.removeEventListener('keydown', handleKeyPressed);\r\n    }, [dialogMessages.length, handleClick]);\r\n\r\n    return (\r\n        <div className={classes.dialogWindow}>\r\n            <div className={classes.dialogTitle}>\r\n                {characterName}\r\n            </div>\r\n            <Message\r\n                message={dialogMessages[currentMessage]}\r\n                key={currentMessage}\r\n                zoom={gameZoom}\r\n                forceShowFullMessage={forceShowFullMessage}\r\n                onMessageEnded={() => {\r\n                    setMessageEnded(true);\r\n                }}\r\n            />\r\n            <div\r\n                onClick={handleClick}\r\n                className={classes.dialogFooter}\r\n            >\r\n                {(currentMessage === dialogMessages.length - 1 && messageEnded) ? 'Ok' : 'Next'}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default DialogBox;\r\n","import { useLayoutEffect, useCallback, useState } from 'react';\r\n\r\n// code by https://gist.github.com/morajabi/523d7a642d8c0a2f71fcfa0d8b3d2846\r\nconst useRect = (element) => {\r\n    const [rect, setRect] = useState(getRect(element || null));\r\n\r\n    const handleResize = useCallback(() => {\r\n        if (!element) {\r\n            return;\r\n        }\r\n\r\n        // Update client rect\r\n        setRect(getRect(element));\r\n    }, [element]);\r\n\r\n    useLayoutEffect(() => {\r\n        if (!element) {\r\n            return () => {};\r\n        }\r\n\r\n        handleResize();\r\n        let resizeObserver = new ResizeObserver(() => handleResize());\r\n        resizeObserver.observe(element);\r\n\r\n        let intersectionObserver = new IntersectionObserver(() => handleResize());\r\n        intersectionObserver.observe(element);\r\n\r\n        return () => {\r\n            if (!resizeObserver) {\r\n                return;\r\n            }\r\n\r\n            intersectionObserver.disconnect();\r\n            resizeObserver.disconnect();\r\n            resizeObserver = null;\r\n            intersectionObserver = null;\r\n        };\r\n    }, [handleResize, element]);\r\n\r\n    return rect;\r\n};\r\n\r\nfunction getRect(element) {\r\n    if (!element) {\r\n        return {\r\n            bottom: 0,\r\n            height: 0,\r\n            left: 0,\r\n            right: 0,\r\n            top: 0,\r\n            width: 0,\r\n        };\r\n    }\r\n\r\n    return element.getBoundingClientRect();\r\n}\r\n\r\nexport default useRect;\r\n","import { FormattedMessage } from 'react-intl';\r\nimport { makeStyles } from '@mui/styles';\r\nimport { useSelector } from 'react-redux';\r\nimport classNames from 'classnames';\r\n\r\n// Selectors\r\nimport {\r\n    selectGameZoom,\r\n    selectGameWidth,\r\n    selectGameHeight,\r\n    selectGameCanvasElement,\r\n} from '../redux/selectors/selectGameData';\r\n\r\n// Hooks\r\nimport useRect from '../hooks/useRect';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    textWrapper: ({ zoom, top, position, domRect }) => ({\r\n        top: `${(domRect?.top || 0) + (top * zoom)}px`,\r\n        userSelect: 'none',\r\n        userDrag: 'none',\r\n        position: 'absolute',\r\n        textAlign: position,\r\n        width: `calc(100% - ${((domRect?.left || 0) * 2) + (10 * zoom)}px)`,\r\n        transform: 'translate(-50%, 0%)',\r\n    }),\r\n    textPositionWrapper: ({ position }) => {\r\n        if (position === 'center') {\r\n            return {\r\n                left: '50%',\r\n            };\r\n        }\r\n\r\n        return {};\r\n    },\r\n    text: ({ zoom, color, size }) => ({\r\n        fontFamily: '\"Press Start 2P\"',\r\n        fontSize: `${size * zoom}px`,\r\n        textTransform: 'uppercase',\r\n        margin: 0,\r\n        color,\r\n    }),\r\n}));\r\n\r\nconst GameText = ({\r\n    translationKey,\r\n    variables = {},\r\n    config = {},\r\n    component: Component = 'p',\r\n}) => {\r\n    // Game\r\n    const gameWidth = useSelector(selectGameWidth);\r\n    const gameHeight = useSelector(selectGameHeight);\r\n    const gameZoom = useSelector(selectGameZoom);\r\n    const canvas = useSelector(selectGameCanvasElement);\r\n    const domRect = useRect(canvas);\r\n\r\n    const {\r\n        color = '#FFFFFF',\r\n        position = 'center',\r\n        top = 0,\r\n        size = 10,\r\n    } = config;\r\n\r\n    const classes = useStyles({\r\n        height: gameHeight,\r\n        width: gameWidth,\r\n        zoom: gameZoom,\r\n        position,\r\n        domRect,\r\n        color,\r\n        size,\r\n        top,\r\n    });\r\n\r\n    return (\r\n        <div className={classNames(classes.textWrapper, classes.textPositionWrapper)}>\r\n            <Component className={classes.text}>\r\n                <FormattedMessage\r\n                    id={translationKey}\r\n                    values={variables}\r\n                />\r\n            </Component>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default GameText;\r\n","/* eslint-disable react/jsx-filename-extension */\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport { ThemeProvider, createTheme } from '@mui/material/styles';\r\nimport { Helmet } from 'react-helmet';\r\n\r\n// Store\r\nimport store from './redux/store';\r\n\r\n// Styles\r\nimport './index.css';\r\n\r\n// Components\r\nimport Game from './Game';\r\n\r\nconst theme = createTheme();\r\n\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <Helmet>\r\n            <title>My Phaser Game</title>\r\n        </Helmet>\r\n        <ThemeProvider theme={theme}>\r\n            <Game />\r\n        </ThemeProvider>\r\n    </Provider>,\r\n    document.getElementById('root')\r\n);\r\n\r\n","var map = {\n\t\"./sample_indoor\": 72,\n\t\"./sample_indoor.json\": 72,\n\t\"./sample_map\": 73,\n\t\"./sample_map.json\": 73\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\tif(!__webpack_require__.m[id]) {\n\t\tvar e = new Error(\"Module '\" + req + \"' ('\" + id + \"') is not available (weak dependency)\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nwebpackContext.id = 152;\nmodule.exports = webpackContext;","var map = {\n\t\"./a_button.png\": 195,\n\t\"./b_button.png\": 196,\n\t\"./crystal.png\": 197,\n\t\"./d_pad_button.png\": 198,\n\t\"./heart_empty.png\": 199,\n\t\"./heart_full.png\": 200,\n\t\"./heart_half.png\": 201,\n\t\"./key.png\": 202\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\tif(!__webpack_require__.m[id]) {\n\t\tvar e = new Error(\"Module '\" + req + \"' ('\" + id + \"') is not available (weak dependency)\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nwebpackContext.id = 153;\nmodule.exports = webpackContext;","var map = {\n\t\"./city\": 49,\n\t\"./city.json\": 49,\n\t\"./city.png\": 121,\n\t\"./objects\": 50,\n\t\"./objects.json\": 50,\n\t\"./objects.png\": 122,\n\t\"./village\": 51,\n\t\"./village.json\": 51,\n\t\"./village.png\": 123\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\tif(!__webpack_require__.m[id]) {\n\t\tvar e = new Error(\"Module '\" + req + \"' ('\" + id + \"') is not available (weak dependency)\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nwebpackContext.id = 154;\nmodule.exports = webpackContext;","var map = {\n\t\"./coin\": 74,\n\t\"./coin.json\": 74,\n\t\"./coin.png\": 187,\n\t\"./enemy\": 75,\n\t\"./enemy.json\": 75,\n\t\"./enemy.png\": 188,\n\t\"./hero\": 76,\n\t\"./hero.json\": 76,\n\t\"./hero.png\": 189,\n\t\"./npc_01\": 77,\n\t\"./npc_01.json\": 77,\n\t\"./npc_01.png\": 190,\n\t\"./npc_02\": 78,\n\t\"./npc_02.json\": 78,\n\t\"./npc_02.png\": 191,\n\t\"./npc_03\": 79,\n\t\"./npc_03.json\": 79,\n\t\"./npc_03.png\": 192,\n\t\"./npc_04\": 80,\n\t\"./npc_04.json\": 80,\n\t\"./npc_04.png\": 193,\n\t\"./npc_05\": 81,\n\t\"./npc_05.json\": 81,\n\t\"./npc_05.png\": 194\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\tif(!__webpack_require__.m[id]) {\n\t\tvar e = new Error(\"Module '\" + req + \"' ('\" + id + \"') is not available (weak dependency)\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nwebpackContext.id = 155;\nmodule.exports = webpackContext;","var map = {\n\t\"./sample_indoor.json\": [\n\t\t72,\n\t\t38\n\t],\n\t\"./sample_map.json\": [\n\t\t73,\n\t\t39\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 3);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 156;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./city.json\": [\n\t\t49,\n\t\t0\n\t],\n\t\"./objects.json\": [\n\t\t50,\n\t\t1\n\t],\n\t\"./village.json\": [\n\t\t51,\n\t\t2\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 3);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 157;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./city\": [\n\t\t49,\n\t\t3,\n\t\t0\n\t],\n\t\"./city.json\": [\n\t\t49,\n\t\t3,\n\t\t0\n\t],\n\t\"./city.png\": [\n\t\t121,\n\t\t9,\n\t\t27\n\t],\n\t\"./objects\": [\n\t\t50,\n\t\t3,\n\t\t1\n\t],\n\t\"./objects.json\": [\n\t\t50,\n\t\t3,\n\t\t1\n\t],\n\t\"./objects.png\": [\n\t\t122,\n\t\t9,\n\t\t28\n\t],\n\t\"./village\": [\n\t\t51,\n\t\t3,\n\t\t2\n\t],\n\t\"./village.json\": [\n\t\t51,\n\t\t3,\n\t\t2\n\t],\n\t\"./village.png\": [\n\t\t123,\n\t\t9,\n\t\t29\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[2]).then(function() {\n\t\treturn __webpack_require__.t(id, ids[1])\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 158;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./coin\": [\n\t\t124,\n\t\t7,\n\t\t3\n\t],\n\t\"./coin.json\": [\n\t\t124,\n\t\t7,\n\t\t3\n\t],\n\t\"./coin.png\": [\n\t\t113,\n\t\t9,\n\t\t4\n\t],\n\t\"./enemy\": [\n\t\t125,\n\t\t7,\n\t\t5\n\t],\n\t\"./enemy.json\": [\n\t\t125,\n\t\t7,\n\t\t5\n\t],\n\t\"./enemy.png\": [\n\t\t114,\n\t\t9,\n\t\t6\n\t],\n\t\"./hero\": [\n\t\t126,\n\t\t7,\n\t\t7\n\t],\n\t\"./hero.json\": [\n\t\t126,\n\t\t7,\n\t\t7\n\t],\n\t\"./hero.png\": [\n\t\t115,\n\t\t9,\n\t\t8\n\t],\n\t\"./npc_01\": [\n\t\t127,\n\t\t7,\n\t\t9\n\t],\n\t\"./npc_01.json\": [\n\t\t127,\n\t\t7,\n\t\t9\n\t],\n\t\"./npc_01.png\": [\n\t\t116,\n\t\t9,\n\t\t10\n\t],\n\t\"./npc_02\": [\n\t\t128,\n\t\t7,\n\t\t11\n\t],\n\t\"./npc_02.json\": [\n\t\t128,\n\t\t7,\n\t\t11\n\t],\n\t\"./npc_02.png\": [\n\t\t117,\n\t\t9,\n\t\t12\n\t],\n\t\"./npc_03\": [\n\t\t129,\n\t\t7,\n\t\t13\n\t],\n\t\"./npc_03.json\": [\n\t\t129,\n\t\t7,\n\t\t13\n\t],\n\t\"./npc_03.png\": [\n\t\t118,\n\t\t9,\n\t\t14\n\t],\n\t\"./npc_04\": [\n\t\t130,\n\t\t7,\n\t\t15\n\t],\n\t\"./npc_04.json\": [\n\t\t130,\n\t\t7,\n\t\t15\n\t],\n\t\"./npc_04.png\": [\n\t\t119,\n\t\t9,\n\t\t16\n\t],\n\t\"./npc_05\": [\n\t\t131,\n\t\t7,\n\t\t17\n\t],\n\t\"./npc_05.json\": [\n\t\t131,\n\t\t7,\n\t\t17\n\t],\n\t\"./npc_05.png\": [\n\t\t120,\n\t\t9,\n\t\t18\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[2]).then(function() {\n\t\treturn __webpack_require__.t(id, ids[1])\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 159;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./en.json\": [\n\t\t173,\n\t\t40\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 3);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 161;\nmodule.exports = webpackAsyncContext;"],"sourceRoot":""}